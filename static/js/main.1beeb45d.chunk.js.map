{"version":3,"sources":["components/MultiCrops/Crop/Crop.module.scss","logo.svg","components/Canvas/Canvas.js","components/MultiCrops/Crop/Icons.js","components/MultiCrops/Crop/Crop.js","components/MultiCrops/MultiCrops.js","components/MultiCrops/utils.js","components/RegionSelector/RegionSelector.js","pages/Home/Home.js","App.js","index.js"],"names":["module","exports","canvasStyle","padding","Canvas","props","crop","canvasRef","img","callback","useRef","imgRef","current","useEffect","image","canvas","ctx","getContext","useCanvas","scaleX","naturalWidth","width","scaleY","naturalHeight","height","pixelRatio","window","devicePixelRatio","setTransform","imageSmoothingQuality","drawImage","x","y","ref","style","onClick","toBlob","blob","previewUrl","URL","createObjectURL","anchor","document","createElement","download","id","href","click","revokeObjectURL","generateDownload","NumberIcon","number","className","jsx","PropTypes","defaultProps","Crop","handleResizeMove","e","index","coordinate","coordinates","onResize","onChange","onComplete","rect","deltaRect","left","top","nextCoordinate","nextCoordinates","update","is","Function","handleDragMove","onDrag","dx","dy","handleDelete","onDelete","remove","onContextMenu","event","preventDefault","stopPropagation","interact","this","draggable","modifiers","restrictRect","restriction","resizable","edges","right","bottom","on","nextProps","equals","unset","cropStyle","styles","ordN","ordNe","ordNw","ordS","ordSe","ordSw","ordE","ordW","map","Component","display","position","transform","boxSizing","cursor","border","borderImageSource","borderImageSlice","borderImageRepeat","shape","isRequired","isValidPoint","assoc","shortid","generate","omit","point","strictNumber","both","Number","complement","NaN","MultiCrops","drawingIndex","pointA","renderCrops","addIndex","indexedMap","coor","getCursorPosition","container","getBoundingClientRect","clientX","clientY","handleMouseDown","target","length","handleMouseMove","onDraw","pointB","Math","min","abs","clone","handleMouseUp","src","onLoad","onMouseDown","onMouseMove","onMouseUp","alt","string","arrayOf","func","canvasListStyle","flexFlow","alignItems","justifyAlign","justifyContent","overflow","backgroundColor","regionSelectorStyle","RegionSelector","useState","crops","setCrops","completedCrops","setCompletedCrops","useCallback","console","log","QQQ","Home","upImg","setUpImg","type","accept","files","reader","FileReader","addEventListener","result","readAsDataURL","App","basename","path","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1beeb45d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ordN\":\"Crop_ordN__F6Lkk\",\"ordNe\":\"Crop_ordNe__3yQCN\",\"ordNw\":\"Crop_ordNw__3FA7M\",\"ordS\":\"Crop_ordS__3XH0n\",\"ordSe\":\"Crop_ordSe__1UAa4\",\"ordSw\":\"Crop_ordSw__3NCyA\",\"ordE\":\"Crop_ordE__1HdlK\",\"ordW\":\"Crop_ordW__3q7pb\",\"ord-n\":\"Crop_ord-n__d_Xqz\",\"ord-e\":\"Crop_ord-e__177ep\",\"ord-s\":\"Crop_ord-s__2Z2QJ\",\"ord-w\":\"Crop_ord-w__87J-t\"};","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\nconst canvasStyle = {\r\n  padding: '10px',\r\n}\r\n\r\nfunction generateDownload(canvas, crop) {\r\n  if (!crop || !canvas) {\r\n    return;\r\n  }\r\n\r\n  canvas.toBlob(\r\n    (blob) => {\r\n      const previewUrl = window.URL.createObjectURL(blob);\r\n\r\n      const anchor = document.createElement('a');\r\n      anchor.download = `crop_${crop.id}.png`;\r\n      anchor.href = URL.createObjectURL(blob);\r\n      anchor.click();\r\n\r\n      window.URL.revokeObjectURL(previewUrl);\r\n    },\r\n    'image/png',\r\n    1\r\n  );\r\n}\r\n\r\nconst useCanvas = (img, callback) => {\r\n    const canvasRef = useRef(null);\r\n    const imgRef = useRef(null);\r\n    imgRef.current = img;\r\n\r\n    useEffect(() => {\r\n        const image = imgRef.current;\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        callback([canvas, ctx, image]);\r\n    }, []);\r\n\r\n    return canvasRef;\r\n}\r\n\r\nconst Canvas = (props) => {\r\n    const {crop, img} = props;\r\n    const canvasRef = useCanvas(img, ([canvas, ctx, image]) => {\r\n    const scaleX = image.naturalWidth / image.width;\r\n    const scaleY = image.naturalHeight / image.height;\r\n    const pixelRatio = window.devicePixelRatio;\r\n\r\n    canvas.width = crop.width * pixelRatio;\r\n    canvas.height = crop.height * pixelRatio;\r\n\r\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n    ctx.imageSmoothingQuality = 'high';\r\n\r\n    ctx.drawImage(\r\n      image,\r\n      crop.x * scaleX,\r\n      crop.y * scaleY,\r\n      crop.width * scaleX,\r\n      crop.height * scaleY,\r\n      0,\r\n      0,\r\n      crop.width,\r\n      crop.height\r\n    );\r\n  });\r\n\r\n  return (<canvas \r\n    ref={canvasRef} \r\n    style={canvasStyle}\r\n    onClick={() =>\r\n          generateDownload(canvasRef.current, crop)}\r\n/>);\r\n};\r\n\r\nexport default Canvas;\r\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\n\nexport const DeleteIcon = props => (\n  <div\n    className=\"rmc-icon-container\"\n    {...props}\n  >\n    <div className=\"rmc-remove\" />\n    <style jsx>{`\n      .rmc-icon-container {\n        width: 15px;\n        height: 15px;\n        cursor: pointer;\n        float: right;\n        background:#262626;\n        opacity: 0.8;\n      }\n      .rmc-remove {\n        color: white;\n        position: absolute;\n        margin-top: 6px;\n      }\n\n      .rmc-remove:hover {\n        cursor: pointer;\n      }\n\n      .rmc-remove:before {\n        content: '';\n        position: absolute;\n        width: 15px;\n        height: 1px;\n        background-color: currentColor;\n        -webkit-transform: rotate(45deg);\n                transform: rotate(45deg);\n      }\n\n      .rmc-remove:after {\n        content: '';\n        position: absolute;\n        width: 15px;\n        height: 1px;\n        background-color: currentColor;\n        -webkit-transform: rotate(-45deg);\n                transform: rotate(-45deg);\n      }\n    `}\n    </style>\n  </div>\n\n)\n\nexport const NumberIcon = ({ number }) => (\n  <div className=\"rmc-number\">\n    { number }\n    <style jsx>{`\n      .rmc-number {\n        width: 15px;\n        height: 15px;\n        float: left;\n        font-size: 12px;\n        text-align: center;\n        line-height: 15px;\n        color: white;\n        opacity: 0.8;\n      }\n    `}\n    {/* background:#262626; */}\n    </style>\n    \n        \n  </div>\n)\n\nconst { number } = PropTypes\n\nNumberIcon.propTypes = {\n  number,\n}\n\nNumberIcon.defaultProps = {\n  number: '',\n}\n\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { equals, is, update, remove } from 'ramda'\nimport interact from 'interactjs'\nimport { DeleteIcon, NumberIcon } from './Icons'\nimport styles from './Crop.module.scss'\n\nclass Crop extends Component {\n\n  static cropStyle = (coordinate) => {\n    const {\n      x, y, width, height,\n    } = coordinate\n\n    return {\n      display: 'inline-block',\n      position: 'absolute',\n      transform: 'translate3d(0, 0, 0)',\n      boxSizing: 'border-box',\n      cursor: 'move',\n      width,\n      height,\n      top: y,\n      left: x,\n      border: '1px solid',\n      borderImageSource: 'url(\"data:image/gif;base64,R0lGODlhCgAKAJECAAAAAP///////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI5RDc5MTFDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI5RDc5MTBDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoAAgAsAAAAAAoACgAAAhWEERkn7W3ei7KlagMWF/dKgYeyGAUAIfkEBQoAAgAsAAAAAAoACgAAAg+UYwLJ7RnQm7QmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYgLJHdiinNSAVfOEKoUCACH5BAUKAAIALAAAAAAKAAoAAAIRVISAdusPo3RAzYtjaMIaUQAAIfkEBQoAAgAsAAAAAAoACgAAAg+MDiem7Q8bSLFaG5il6xQAIfkEBQoAAgAsAAAAAAoACgAAAg+UYRLJ7QnQm7SmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYBLJDdiinNSEVfOEKoECACH5BAUKAAIALAAAAAAKAAoAAAIRFISBdusPo3RBzYsjaMIaUQAAOw==\")',\n      borderImageSlice: '1',\n      borderImageRepeat: 'repeat',\n    }\n  }\n\n  componentDidMount() {\n    interact(this.crop)\n      .draggable({\n        modifiers: [\n          interact.modifiers.restrictRect({\n            restriction: 'parent'\n          })\n        ],\n      })\n      .resizable({\n        edges: {\n          left: true, right: true, bottom: true, top: true,\n        },\n        modifiers: [\n          interact.modifiers.restrictRect({\n            restriction: 'parent'\n          })\n        ],\n      })\n      // .actionChecker(function (event, action) {\n      //   console.log(event);\n      //   return event.button === 0 ? action : null;\n      // })\n      // .on('tap', function (event) {\n      //   console.log(event.type, event)\n      // })\n      .on('dragmove', this.handleDragMove)\n      .on('resizemove', this.handleResizeMove)\n  }\n  shouldComponentUpdate(nextProps) {\n    // reduce uncessary update\n    return !equals(nextProps.coordinate, this.props.coordinate)\n      || (nextProps.index !== this.props.index)\n  }\n\n  handleResizeMove = (e) => {\n    const {\n      index,\n      coordinate,\n      coordinate: { x, y },\n      coordinates,\n      onResize,\n      onChange,\n      onComplete,\n    } = this.props\n    const { width, height } = e.rect\n    const { left, top } = e.deltaRect\n\n    const nextCoordinate = {\n      ...coordinate, x: x + left, y: y + top, width, height,\n    }\n    const nextCoordinates = update(index, nextCoordinate)(coordinates)\n    if (is(Function, onResize)) {\n      onResize(nextCoordinate, index, nextCoordinates)\n    }\n    if (is(Function, onChange)) {\n      onChange(nextCoordinate, index, nextCoordinates)\n    }\n    if (is(Function, onComplete)) {\n      onComplete(nextCoordinate, index, nextCoordinates)\n    }\n  }\n  handleDragMove = (e) => {\n    const {\n      index,\n      coordinate,\n      coordinate: { x, y },\n      coordinates,\n      onDrag,\n      onChange,\n      onComplete,\n    } = this.props\n    const { dx, dy } = e\n    const nextCoordinate = { ...coordinate, x: x + dx, y: y + dy }\n    const nextCoordinates = update(index, nextCoordinate)(coordinates)\n    if (is(Function, onDrag)) {\n      onDrag(nextCoordinate, index, nextCoordinates)\n    }\n\n    if (is(Function, onChange)) {\n      onChange(nextCoordinate, index, nextCoordinates)\n    }\n\n    if (is(Function, onComplete)) {\n      onComplete(nextCoordinate, index, nextCoordinates)\n    }\n  }\n\n  handleDelete = () => {\n    const {\n      index,\n      coordinate,\n      onDelete,\n      coordinates,\n    } = this.props\n    const nextCoordinates = remove(index, 1)(coordinates)\n    if (is(Function, onDelete)) {\n      onDelete(coordinate, index, nextCoordinates)\n    }\n  }\n\n  onContextMenu = (event) => {\n    // console.log(event);\n    event.preventDefault();\n    event.stopPropagation(); \n    this.handleDelete();\n    return false;\n  }\n\n  componentWillUnmount() {\n    interact(this.crop)\n      .unset()\n  }\n\n  \n  render() {\n    const { coordinate, index } = this.props\n    return (\n      <div\n        onContextMenu={this.onContextMenu}\n        style={Crop.cropStyle(coordinate)}\n        ref={crop => this.crop = crop}\n      >\n        <NumberIcon number={index + 1} />\n        {/* <DeleteIcon\n          onClick={this.handleDelete}\n        /> */}\n        {/* {console.log(this)} */}\n        {\n          [styles.ordN, styles.ordNe, styles.ordNw, styles.ordS, styles.ordSe, styles.ordSw, styles.ordE, styles.ordW]\n          .map(\n            (style, id)=> <div className={style} key={id} />\n          )\n        }\n      </div>\n    )\n  }\n}\n\n\nexport const coordinateType = PropTypes.shape({\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n})\n\nCrop.propTypes = {\n  coordinate: coordinateType.isRequired,\n  index: PropTypes.number.isRequired,\n  onResize: PropTypes.func, // eslint-disable-line\n  onDrag: PropTypes.func, // eslint-disable-line\n  onDelete: PropTypes.func, // eslint-disable-line\n  onChange: PropTypes.func, // eslint-disable-line\n  onComplete: PropTypes.func, // eslint-disable-line\n  coordinates: PropTypes.array // eslint-disable-line\n}\n\nexport default Crop\n","import React, { Component } from 'react'\nimport { both, clone, is, complement, equals, map, addIndex } from 'ramda'\nimport PropTypes from 'prop-types'\nimport shortid from 'shortid'\nimport Crop, { coordinateType } from './Crop/Crop'\n\n\nconst isValidPoint = (point = {}) => {\n  const strictNumber = number => both(\n    is(Number),\n    complement(equals(NaN)),\n  )(number)\n  return strictNumber(point.x) && strictNumber(point.y)\n}\n\n\nclass MultiCrops extends Component {\n  drawingIndex = -1\n\n  pointA = {}\n\n  id = shortid.generate()\n\n  renderCrops = (props) => {\n    const indexedMap = addIndex(map)\n    return indexedMap((coor, index) =>\n      (<Crop\n        // improve performance when delet crop in middle array\n        key={coor.id || index}\n        index={index}\n        coordinate={coor}\n        {...props}\n      />))(props.coordinates)\n  }\n\n  getCursorPosition = (e) => {\n    const { left, top } = this.container.getBoundingClientRect()\n    return {\n      x: e.clientX - left,\n      y: e.clientY - top,\n    }\n  }\n\n  handleMouseDown = (e) => {\n    const { coordinates } = this.props\n    if (e.target === this.img || e.target === this.container) {\n      const { x, y } = this.getCursorPosition(e)\n\n      this.drawingIndex = coordinates.length\n      this.pointA = { x, y }\n      this.id = shortid.generate()\n    }\n  }\n\n\n  handleMouseMove = (e) => {\n    const { onDraw, onChange, coordinates } = this.props\n    const { pointA } = this\n    if (isValidPoint(pointA)) {\n      const pointB = this.getCursorPosition(e)\n\n      // get the drawing coordinate\n      const coordinate = {\n        x: Math.min(pointA.x, pointB.x),\n        y: Math.min(pointA.y, pointB.y),\n        width: Math.abs(pointA.x - pointB.x),\n        height: Math.abs(pointA.y - pointB.y),\n        id: this.id,\n      }\n      const nextCoordinates = clone(coordinates)\n      nextCoordinates[this.drawingIndex] = coordinate\n      if (is(Function, onDraw)) {\n        onDraw(coordinate, this.drawingIndex, nextCoordinates)\n      }\n      if (is(Function, onChange)) {\n        onChange(coordinate, this.drawingIndex, nextCoordinates)\n      }\n    }\n  }\n\n  handleMouseUp = (e) => {\n    // const { onComplete, coordinates } = this.props\n    // this.pointA = {};\n    // const coordinate = coordinates[this.drawingIndex]\n    // const nextCoordinates = clone(coordinates)\n    // if (is(Function, onComplete)) {\n    //     onComplete(coordinate, this.drawingIndex, nextCoordinates)\n    // }\n    const { onComplete, coordinates } = this.props\n    const { pointA } = this\n    if (isValidPoint(pointA)) {\n      const pointB = this.getCursorPosition(e)\n\n      // get the drawing coordinate\n      const coordinate = {\n        x: Math.min(pointA.x, pointB.x),\n        y: Math.min(pointA.y, pointB.y),\n        width: Math.abs(pointA.x - pointB.x),\n        height: Math.abs(pointA.y - pointB.y),\n        id: this.id,\n      }\n      const nextCoordinates = clone(coordinates)\n      nextCoordinates[this.drawingIndex] = coordinate\n      if (is(Function, onComplete)) {\n        onComplete(coordinate, this.drawingIndex, nextCoordinates)\n      }\n    }\n    this.pointA = {};\n  }\n\n\n  render() {\n    const {\n      src, width, height, onLoad,\n    } = this.props\n    // const { clicked } = this.state\n    return (\n      <div\n        style={{\n          display: 'inline-block',\n          position: 'relative',\n        }}\n        onMouseDown={this.handleMouseDown}\n        onMouseMove={this.handleMouseMove}\n        onMouseUp={this.handleMouseUp}\n        ref={container => this.container = container}\n      >\n        <img\n          ref={img => this.img = img}\n          src={src}\n          width={width}\n          height={height}\n          onLoad={onLoad}\n          alt=\"\"\n          draggable={false}\n        />\n        {this.renderCrops(this.props)}\n\n      </div>\n    )\n  }\n}\n\nconst {\n  string, arrayOf, number, func,\n} = PropTypes\n\nMultiCrops.propTypes = {\n  coordinates: arrayOf(coordinateType),\n  src: string,\n  width: number, // eslint-disable-line\n  height: number, // eslint-disable-line\n  onDraw: func, // eslint-disable-line\n  onChange: func, // eslint-disable-line\n  onComplete: func, // eslint-disable-line\n  onLoad: func, // eslint-disable-line\n}\n\nMultiCrops.defaultProps = {\n  coordinates: [],\n  src: '',\n}\n\nexport { removeid, addid } from './utils'\nexport default MultiCrops\n\n","import shortid from 'shortid'\nimport { map, assoc, omit } from 'ramda'\n\nexport const addid = map(assoc('id', shortid.generate()))\n\nexport const removeid = map(omit(['id']))\n","import Canvas from './../Canvas/Canvas';\r\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport MultiCrops from './../MultiCrops/MultiCrops';\r\n\r\n\r\n\r\nconst canvasListStyle = {\r\n  display: 'flex',\r\n  flexFlow: 'row wrap', \r\n  alignItems: 'center',\r\n  justifyAlign: 'center',\r\n  justifyContent: 'start',\r\n  width: 'inherit',\r\n  height: '300px',\r\n  overflow: 'auto',\r\n  backgroundColor: 'lightgrey',\r\n}\r\n\r\nconst regionSelectorStyle = {\r\n  width: '600px',\r\n  height: '70vh',\r\n  backgroundColor: 'lightgrey'\r\n}\r\n\r\nconst RegionSelector = (props) => {\r\n\r\n  const {src} = props;\r\n\r\n  const [crops, setCrops] = useState([]);\r\n  const [completedCrops, setCompletedCrops] = useState([]);\r\n  const imgRef = useRef(null);\r\n\r\n  const onLoad = useCallback((img) => {\r\n    imgRef.current = img.target;\r\n  }, []);\r\n\r\n  const onChange = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n    console.log(crop);\r\n  }, []);\r\n\r\n  const onDelete = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n    console.log(crop);\r\n    setCompletedCrops(crops);\r\n  }, []);\r\n\r\n  const onComplete = useCallback((crop, index, crops) => {\r\n    console.log(crop);\r\n    setCompletedCrops(crops);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log({QQQ: completedCrops});\r\n  }, [completedCrops])\r\n\r\n    return (\r\n      <div style={regionSelectorStyle}>\r\n        <MultiCrops\r\n          src={src}\r\n          width={'600'}\r\n          coordinates={crops}\r\n          onChange={onChange}\r\n          onDelete={onDelete}\r\n          onComplete={onComplete}\r\n          onLoad={onLoad}\r\n        />\r\n        <div style={canvasListStyle}>\r\n          {completedCrops.map( (crop) =>\r\n            <Canvas\r\n              key={crop.id}\r\n              crop={crop}\r\n              img={imgRef.current}\r\n            />\r\n            )\r\n          }\r\n        </div>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default RegionSelector;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport RegionSelector from '../../components/RegionSelector/RegionSelector';\r\n\r\nconst Home = () => {\r\n\r\n  const [upImg, setUpImg] = useState();\r\n\r\n\r\n  const onSelectFile = (e) => {\r\n  if (e.target.files && e.target.files.length > 0) {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => setUpImg(reader.result));\r\n    reader.readAsDataURL(e.target.files[0]);\r\n  }\r\n  };\r\n\r\n  return (\r\n    <div style = {{\r\n      position: 'absolute',\r\n      top: '10%',\r\n      left: '50%',\r\n      transform: 'translate(-50%, -10%)', \r\n      display: 'flex',\r\n      flexFlow: 'column', \r\n      alignItems: 'center',\r\n      justifyAlign: 'center',\r\n      justifyContent: 'space-evenly',\r\n      height: '100vh',\r\n    }}>\r\n      <div>\r\n        <input type=\"file\" accept=\"image/*\" onChange={onSelectFile} />\r\n      </div>\r\n      <RegionSelector src={upImg}  />\r\n      <div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;","import {BrowserRouter, Route, Switch} from 'react-router-dom';\nimport logo from './logo.svg';\nimport './App.css';\nimport Home from './pages/Home/Home';\n\nfunction App() {\n  return (\n    <BrowserRouter basename=\"/\">\n        <Switch>\n            <Route path=\"/\" component={Home}/>\n        </Switch>\n      </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// serviceWorker.unregister();\n"],"sourceRoot":""}