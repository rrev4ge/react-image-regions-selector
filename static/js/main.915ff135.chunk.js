(this["webpackJsonpregion-selector"]=this["webpackJsonpregion-selector"]||[]).push([[0],{12:function(e,t,n){e.exports={ordN:"Crop_ordN__F6Lkk",ordNe:"Crop_ordNe__3yQCN",ordNw:"Crop_ordNw__3FA7M",ordS:"Crop_ordS__3XH0n",ordSe:"Crop_ordSe__1UAa4",ordSw:"Crop_ordSw__3NCyA",ordE:"Crop_ordE__1HdlK",ordW:"Crop_ordW__3q7pb","ord-n":"Crop_ord-n__d_Xqz","ord-e":"Crop_ord-e__177ep","ord-s":"Crop_ord-s__2Z2QJ","ord-w":"Crop_ord-w__87J-t"}},50:function(e,t,n){},51:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(42),a=n.n(i),s=(n(50),n(43)),c=n(5),d=(n.p,n(51),n(15)),u=n(1),p={padding:"10px"};var l=function(e){var t=e.crop,n=(e.img,function(e,t){var n=e.crop,r=e.img,i=Object(o.useRef)(null),a=Object(o.useRef)(null);return a.current=r,Object(o.useEffect)((function(){var e=a.current,n=i.current,o=n.getContext("2d");t([n,o,e])}),[n]),i}(e,(function(e){var n=Object(d.a)(e,3),o=n[0],r=n[1],i=n[2],a=i.naturalWidth/i.width,s=i.naturalHeight/i.height,c=window.devicePixelRatio;o.width=t.width*c,o.height=t.height*c,r.setTransform(c,0,0,c,0,0),r.imageSmoothingQuality="high",r.drawImage(i,t.x*a,t.y*s,t.width*a,t.height*s,0,0,t.width,t.height)})));return Object(u.jsx)("canvas",{ref:n,style:p,onClick:function(){return function(e,t){t&&e&&e.toBlob((function(e){var n=window.URL.createObjectURL(e),o=document.createElement("a");o.download="crop_".concat(t.id,".png"),o.href=URL.createObjectURL(e),o.click(),window.URL.revokeObjectURL(n)}),"image/png",1)}(n.current,t)}})},g=n(11),h=n(28),A=n(29),b=n(30),v=n(35),f=n(33),j=n(74),m=n(67),y=n(76),C=n(72),O=n(69),x=n(32),E=n(75),w=n(7),M=n.n(w),D=n(22),R=n.n(D),I=n(45),L=n(73),B=n(68),T=n(25),k=n.n(T),z=function(e){var t=e.number;return Object(u.jsxs)("div",{className:"rmc-number",children:[t,Object(u.jsx)("style",{jsx:!0,children:"\n      .rmc-number {\n        width: 15px;\n        height: 15px;\n        float: left;\n        font-size: 12px;\n        text-align: center;\n        line-height: 15px;\n        color: white;\n        opacity: 0.8;\n      }\n    "})]})};M.a.number;z.defaultProps={number:""};var S=n(12),U=n.n(S),N=function(e){Object(v.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(h.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).prevCoordinate={},e.prevCoordinates=[],e.isLeftBtnActive=!1,e.isRightBtnActive=!1,e.actionTrigger=function(e,t,n,o,r,i){return t.type,t.type,n},e.handleChange=function(t){var n=e.props,o=n.index,r=n.coordinate,i=n.coordinate,a=i.x,s=i.y,c=n.coordinates,d=n.onResize,u=(n.onRestore,n.onDrag),p=n.onChange,l=t.dx,h=t.dy,A={};if("resizemove"===t.type){var b=t.rect,v=b.width,f=b.height,j=t.deltaRect,y=j.left,C=j.top;A=Object(g.a)(Object(g.a)({},r),{},{x:a+y,y:s+C,width:v,height:f})}"dragmove"===t.type&&(A=Object(g.a)(Object(g.a)({},r),{},{x:a+l,y:s+h}));var O=Object(L.a)(o,A)(c);Object(m.a)(Function,d)&&"resizemove"===t.type&&d(A,o,O),Object(m.a)(Function,p)&&["dragmove","resizemove"].includes(t.type)&&p(A,o,O),Object(m.a)(Function,u)&&"dragmove"===t.type&&u(A,o,O),["dragend","resizeend"].includes(t.type)&&e.props.isChange(t)},e.changeStartPosition=function(t){var n=e.props,o=n.index,r=n.coordinate,i=n.coordinates;["dragstart","resizestart"].includes(t.type)&&(e.prevCoordinate=Object(g.a)({},r),e.prevCoordinates=Object(I.a)(i),e.prevCoordinates=Object(L.a)(o,e.prevCoordinate,i)),["dragstart","resizestart"].includes(t.type)&&e.props.isChange(t)},e.handleRestore=function(t){var n=e.props,o=n.index,r=n.onRestore;Object(m.a)(Function,r)&&r(e.prevCoordinate,o,e.prevCoordinates)},e.handleDelete=function(t){var n=e.props,o=n.index,r=n.coordinate,i=n.onDelete,a=n.coordinates,s=Object(B.a)(o,1)(a);Object(m.a)(Function,i)&&i(r,o,s)},e.onContextMenu=function(t){t.preventDefault(),t.stopPropagation(),2===t.button&&(!1===e.isLeftBtnActive&&e.handleDelete(),!0===e.isLeftBtnActive&&(e.handleRestore(),e.isLeftBtnActive=!1))},e.onMouseDown=function(t){0===t.button&&(e.isLeftBtnActive=!0),2===t.button&&(e.isRightBtnActive=!0)},e.onMouseUp=function(t){0===t.button&&(e.isLeftBtnActive=!1),2===t.button&&(e.isRightBtnActive=!1)},e.onKeyDown=function(t){t.preventDefault(),t.stopPropagation(),"Escape"===t.code&&(console.log("Escape"),e.handleRestore(),e.isLeftBtnActive=!1)},e.onKeyUp=function(e){e.preventDefault(),e.stopPropagation()},e}return Object(A.a)(n,[{key:"componentDidMount",value:function(){k()(this.crop).draggable({modifiers:[k.a.modifiers.restrictRect({restriction:"parent"})]}).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},modifiers:[k.a.modifiers.restrictRect({restriction:"parent"})]}).on(["dragstart","resizestart"],this.changeStartPosition).on(["dragmove","dragend","resizemove","resizeend"],this.handleChange).actionChecker(this.actionTrigger)}},{key:"shouldComponentUpdate",value:function(e){return!Object(C.a)(e.coordinate,this.props.coordinate)||e.index!==this.props.index}},{key:"componentWillUnmount",value:function(){k()(this.crop).unset()}},{key:"render",value:function(){var e=this,t=this.props,o=t.coordinate,r=t.index;return Object(u.jsxs)("div",{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onContextMenu:this.onContextMenu,style:n.cropStyle(o),ref:function(t){return e.crop=t},onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,tabIndex:"0",children:[Object(u.jsx)(z,{number:r+1}),[U.a.ordN,U.a.ordNe,U.a.ordNw,U.a.ordS,U.a.ordSe,U.a.ordSw,U.a.ordE,U.a.ordW].map((function(e,t){return Object(u.jsx)("div",{className:e},t)}))]})}}]),n}(o.Component);N.cropStyle=function(e){var t=e.x,n=e.y;return{display:"inline-block",position:"absolute",transform:"translate3d(0, 0, 0)",boxSizing:"border-box",cursor:"move",width:e.width,height:e.height,top:n,left:t,border:"1px solid",borderImageSource:'url("data:image/gif;base64,R0lGODlhCgAKAJECAAAAAP///////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI5RDc5MTFDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI5RDc5MTBDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoAAgAsAAAAAAoACgAAAhWEERkn7W3ei7KlagMWF/dKgYeyGAUAIfkEBQoAAgAsAAAAAAoACgAAAg+UYwLJ7RnQm7QmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYgLJHdiinNSAVfOEKoUCACH5BAUKAAIALAAAAAAKAAoAAAIRVISAdusPo3RAzYtjaMIaUQAAIfkEBQoAAgAsAAAAAAoACgAAAg+MDiem7Q8bSLFaG5il6xQAIfkEBQoAAgAsAAAAAAoACgAAAg+UYRLJ7QnQm7SmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYBLJDdiinNSEVfOEKoECACH5BAUKAAIALAAAAAAKAAoAAAIRFISBdusPo3RBzYsjaMIaUQAAOw==")',borderImageSlice:"1",borderImageRepeat:"repeat",msTouchAction:"none",touchAction:"none",userSelect:"none"}};M.a.shape({x:M.a.number.isRequired,y:M.a.number.isRequired,width:M.a.number.isRequired,height:M.a.number.isRequired});var Y=N,F=n(70),Q=n(71),_=(Object(x.a)(Object(F.a)("id",R.a.generate())),Object(x.a)(Object(Q.a)(["id"])),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){return Object(j.a)(Object(m.a)(Number),Object(y.a)(Object(C.a)(NaN)))(e)};return t(e.x)&&t(e.y)}),J=function(e){Object(v.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(h.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).drawingIndex=-1,e.pointA={},e.id=R.a.generate(),e.prevCoordinate={},e.prevCoordinates=[],e.mouseEnter=!0,e.isEscBtnTarget=!1,e.isDragResize=!1,e.isLeftBtnTarget=!1,e.isChange=function(t){["dragstart","resizestart"].includes(t.type)&&(e.isDragResize=!0,console.log({E:t.type,D:e.isDragResize})),["dragend","resizeend"].includes(t.type)&&(e.isDragResize=!1,console.log({E:t.type,D:e.isDragResize}))},e.renderCrops=function(t){return Object(O.a)(x.a)((function(n,o){return Object(u.jsx)(Y,Object(g.a)({index:o,coordinate:n,isChange:function(t){e.isChange(t)}},t),n.id||o)}))(t.coordinates)},e.getCursorPosition=function(t){var n=e.container.getBoundingClientRect(),o=n.left,r=n.top;return"touchstart"===t.type||"touchmove"===t.type?{x:t.touches[0].pageX-o,y:t.touches[0].pageY-r}:"mousedown"===t.type||"mousemove"===t.type?{x:t.clientX-o,y:t.clientY-r}:void 0},e.handleMouseDown=function(t){var n=e.props.coordinates;if(e.isDragResize=!1,(0===t.button||"touchstart"===t.type)&&(e.isLeftBtnTarget=!0,console.log(e.isDragResize),t.target===e.img||t.target===e.container)){var o=e.getCursorPosition(t),r=o.x,i=o.y;e.drawingIndex=n.length,e.pointA={x:r,y:i},e.id=R.a.generate(),e.isLeftBtnTarget=!0,e.prevCoordinate={},e.prevCoordinates=Object(E.a)(n),e.isEscBtnTarget=!1}},e.outsideEvents=function(t){var n=e.props,o=n.onRestore,r=n.coordinates,i=n.coordinate;0===t.button&&(!0!==e.isEscBtnTarget&&(e.isEscBtnTarget=!1,Object(m.a)(Function,o)&&o(i,e.drawingIndex,r),e.handleMouseUp(t)),!0===e.isEscBtnTarget&&t.target!==e.container&&(e.restoreCrops(t),e.isEscBtnTarget=!1),document.removeEventListener("mouseup",e.outsideEvents,!0),document.removeEventListener("keyup",e.outsideEvents,!0),document.removeEventListener("contextmenu",e.outsideEvents,!0)),"Escape"===t.code&&(e.isEscBtnTarget=!0),2===t.button&&(console.log(t.code),t.preventDefault(),t.stopPropagation(),console.log({E:t,TARGET:t.target,THIS:e.container}),t.target!==e.container&&e.restoreCrops(t),document.removeEventListener("mouseup",e.outsideEvents,!0),document.removeEventListener("keyup",e.outsideEvents,!0),document.removeEventListener("contextmenu",e.outsideEvents,!0)),e.isLeftBtnTarget=!1},e.handleMouseMove=function(t){if((0===t.button||"touchmove"===t.type)&&t.target===e.img){var n=e.props,o=n.onDraw,r=n.onChange,i=n.coordinates,a=Object(b.a)(e).pointA;if(_(a)){var s=e.getCursorPosition(t),c={x:Math.min(a.x,s.x),y:Math.min(a.y,s.y),width:Math.abs(a.x-s.x),height:Math.abs(a.y-s.y),id:e.id},d=Object(E.a)(i);d[e.drawingIndex]=c,Object(m.a)(Function,o)&&o(c,e.drawingIndex,d),Object(m.a)(Function,r)&&r(c,e.drawingIndex,d)}}},e.restoreCrops=function(t){var n=e.props,o=(n.onDraw,n.onChange,n.onRestore);Object(m.a)(Function,o)&&o(e.prevCoordinate,e.drawingIndex-1,e.prevCoordinates),e.pointA={},e.isLeftBtnTarget=!1,e.isLeftBtnTarget=!1,e.isEscBtnTarget=!1},e.handleMouseUp=function(t){var n=e.props;n.onDraw,n.onChange;e.pointA={},e.isLeftBtnTarget=!1,e.isEscBtnTarget=!1},e.handleMouseLeave=function(){console.log(e.isDragResize),!1===e.isDragResize&&!0===e.isLeftBtnTarget&&(console.log(e.isDragResize),document.addEventListener("mouseup",e.outsideEvents,!0),document.addEventListener("keydown",e.outsideEvents,!0),document.addEventListener("contextmenu",e.outsideEvents,!0))},e.handleMouseEnter=function(){document.removeEventListener("mouseup",e.outsideEvents,!0),document.removeEventListener("keydown",e.outsideEvents,!0),document.removeEventListener("contextmenu",e.outsideEvents,!0)},e.onKeyDown=function(t){"Escape"===t.code&&(e.isEscBtnTarget=!0)},e.onContextMenu=function(e){e.preventDefault(),e.stopPropagation()},e}return Object(A.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.src,o=t.width,r=t.height,i=t.onLoad;return Object(u.jsxs)("div",{style:{display:"inline-block",position:"relative",msTouchAction:"none",touchAction:"none",userSelect:"none"},onTouchStart:this.handleMouseDown,onTouchMove:this.handleMouseMove,onTouchEnd:function(t){e.isEscBtnTarget?e.restoreCrops(t):e.handleMouseUp(t)},onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter,onKeyDown:this.onKeyDown,onContextMenu:this.isLeftBtnTarget?this.onContextMenu:null,onMouseUp:function(t){e.isEscBtnTarget?e.restoreCrops(t):e.handleMouseUp(t)},ref:function(t){return e.container=t},tabIndex:"0",children:[Object(u.jsx)("img",{ref:function(t){return e.img=t},src:n,width:o,height:r,onLoad:i,alt:"",draggable:!1}),this.renderCrops(this.props)]})}}]),n}(o.Component);M.a.string,M.a.arrayOf,M.a.number,M.a.func;J.defaultProps={coordinates:[],src:""};var Z=J,G={display:"flex",flexFlow:"row wrap",alignItems:"start",justifyAlign:"start",justifyContent:"start",width:"inherit",height:"300px",overflow:"auto",backgroundColor:"lightgrey"},W={width:"600px",height:"70vh",backgroundColor:"lightgrey",msTouchAction:"none",touchAction:"none",userSelect:"none"},P=function(e){var t=e.src,n=Object(o.useState)([]),r=Object(d.a)(n,2),i=r[0],a=r[1],s=Object(o.useState)([]),c=Object(d.a)(s,2),p=c[0],g=c[1],h=Object(o.useRef)(null),A=Object(o.useCallback)((function(e){a([]),g([]),h.current=e.target}),[]),b=Object(o.useCallback)((function(e,t,n){a(n)}),[]),v=Object(o.useCallback)((function(e,t,n){a(n),g(n)}),[]),f=Object(o.useCallback)((function(e,t,n){a(n),g(n)}),[]),j=Object(o.useCallback)((function(e,t,n){a(n),g(n)}),[]);return Object(u.jsxs)("div",{style:W,onTouchEnd:function(e){g(i)},onClick:function(e){0===e.button&&g(i)},children:[Object(u.jsx)(Z,{src:t,width:"600",coordinates:i,onChange:b,onDelete:v,onRestore:f,onComplete:j,onLoad:A}),Object(u.jsx)("div",{style:G,children:p.map((function(e,t){return Object(u.jsx)(l,{index:e.id||t,crop:e,img:h.current},e.id||t)}))})]})},V=function(){var e=Object(o.useState)(),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(u.jsxs)("div",{style:{position:"absolute",top:"10%",left:"50%",transform:"translate(-50%, -10%)",display:"flex",flexFlow:"column",alignItems:"center",justifyAlign:"center",justifyContent:"space-evenly",height:"100vh"},children:[Object(u.jsx)("div",{children:Object(u.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){return r(t.result)})),t.readAsDataURL(e.target.files[0])}}})}),Object(u.jsx)(P,{src:n}),Object(u.jsx)("div",{})]})};var K=function(){return Object(u.jsx)(s.a,{basename:"/",children:Object(u.jsx)(c.c,{children:Object(u.jsx)(c.a,{path:"/",component:V})})})};a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(K,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.915ff135.chunk.js.map