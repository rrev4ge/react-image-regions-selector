{"version":3,"sources":["components/MultiCrops/Crop/Crop.module.scss","logo.svg","components/Canvas/Canvas.js","components/MultiCrops/Crop/Icons.js","components/MultiCrops/Crop/Crop.js","components/MultiCrops/MultiCrops.js","components/MultiCrops/utils.js","components/RegionSelector/RegionSelector.js","pages/Home/Home.js","App.js","index.js"],"names":["module","exports","canvasStyle","padding","Canvas","props","crop","canvasRef","img","callback","useRef","imgRef","current","useEffect","image","canvas","ctx","getContext","useCanvas","scaleX","naturalWidth","width","scaleY","naturalHeight","height","pixelRatio","window","devicePixelRatio","setTransform","imageSmoothingQuality","drawImage","x","y","ref","style","onClick","toBlob","blob","previewUrl","URL","createObjectURL","anchor","document","createElement","download","id","href","click","revokeObjectURL","generateDownload","NumberIcon","number","className","jsx","PropTypes","defaultProps","Crop","prevCoordinate","prevCoordinates","isLeftBtnActive","isRightBtnActive","actionTrigger","pointer","event","action","interactable","element","interaction","type","handleChange","e","index","coordinate","coordinates","onResize","onDrag","onRestore","onChange","dx","dy","nextCoordinate","rect","deltaRect","left","top","nextCoordinates","update","is","Function","includes","isChange","removeEventListener","onContextMenu","changeStartPosition","addEventListener","handleRestore","handleDelete","onDelete","remove","preventDefault","stopPropagation","button","onMouseDown","onMouseUp","outsideEvents","onKeyDown","code","onKeyUp","interact","this","draggable","modifiers","restrictRect","restriction","resizable","edges","right","bottom","on","actionChecker","nextProps","equals","unset","cropStyle","tabIndex","styles","ordN","ordNe","ordNw","ordS","ordSe","ordSw","ordE","ordW","map","Component","display","position","transform","boxSizing","cursor","border","borderImageSource","borderImageSlice","borderImageRepeat","msTouchAction","touchAction","userSelect","shape","isRequired","isValidPoint","assoc","shortid","generate","omit","point","strictNumber","both","Number","complement","NaN","MultiCrops","drawingIndex","pointA","isEscBtnTarget","isDragResize","isLeftBtnTarget","mouseLeave","renderCrops","addIndex","indexedMap","coor","getCursorPosition","container","getBoundingClientRect","touches","pageX","pageY","clientX","clientY","handleMouseDown","target","length","clone","handleMouseUp","restoreCrops","handleMouseMove","onDraw","offsetParent","pointB","console","log","t","Math","min","abs","handleMouseLeave","handleMouseEnter","src","onLoad","onTouchStart","onTouchMove","onTouchEnd","onMouseMove","onMouseLeave","onMouseEnter","alt","onDragStart","string","arrayOf","func","canvasListStyle","flexFlow","alignItems","justifyAlign","justifyContent","overflow","backgroundColor","regionSelectorStyle","RegionSelector","useState","crops","setCrops","completedCrops","setCompletedCrops","useCallback","onComplete","i","Home","upImg","setUpImg","accept","files","reader","FileReader","result","readAsDataURL","App","basename","path","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.89a12df0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ordN\":\"Crop_ordN__F6Lkk\",\"ordNe\":\"Crop_ordNe__3yQCN\",\"ordNw\":\"Crop_ordNw__3FA7M\",\"ordS\":\"Crop_ordS__3XH0n\",\"ordSe\":\"Crop_ordSe__1UAa4\",\"ordSw\":\"Crop_ordSw__3NCyA\",\"ordE\":\"Crop_ordE__1HdlK\",\"ordW\":\"Crop_ordW__3q7pb\",\"ord-n\":\"Crop_ord-n__d_Xqz\",\"ord-e\":\"Crop_ord-e__177ep\",\"ord-s\":\"Crop_ord-s__2Z2QJ\",\"ord-w\":\"Crop_ord-w__87J-t\"};","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\nconst canvasStyle = {\r\n  padding: '10px',\r\n}\r\n\r\nfunction generateDownload(canvas, crop) {\r\n  if (!crop || !canvas) {\r\n    return;\r\n  }\r\n\r\n  canvas.toBlob(\r\n    (blob) => {\r\n      const previewUrl = window.URL.createObjectURL(blob);\r\n\r\n      const anchor = document.createElement('a');\r\n      anchor.download = `crop_${crop.id}.png`;\r\n      anchor.href = URL.createObjectURL(blob);\r\n      anchor.click();\r\n\r\n      window.URL.revokeObjectURL(previewUrl);\r\n    },\r\n    'image/png',\r\n    1\r\n  );\r\n}\r\n\r\nconst useCanvas = (props, callback) => {\r\n    const {crop, img} = props;\r\n\r\n    const canvasRef = useRef(null);\r\n    const imgRef = useRef(null);\r\n    imgRef.current = img;\r\n\r\n    useEffect(() => {\r\n        const image = imgRef.current;\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        callback([canvas, ctx, image]);\r\n    }, [crop]);\r\n\r\n    return canvasRef;\r\n}\r\n\r\nconst Canvas = (props) => {\r\n    const {crop, img} = props;\r\n\r\n    const canvasRef = useCanvas(props, ([canvas, ctx, image]) => {\r\n    const scaleX = image.naturalWidth / image.width;\r\n    const scaleY = image.naturalHeight / image.height;\r\n    const pixelRatio = window.devicePixelRatio;\r\n\r\n    canvas.width = crop.width * pixelRatio;\r\n    canvas.height = crop.height * pixelRatio;\r\n\r\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n    ctx.imageSmoothingQuality = 'high';\r\n\r\n    ctx.drawImage(\r\n      image,\r\n      crop.x * scaleX,\r\n      crop.y * scaleY,\r\n      crop.width * scaleX,\r\n      crop.height * scaleY,\r\n      0,\r\n      0,\r\n      crop.width,\r\n      crop.height\r\n    );\r\n  });\r\n\r\n  return (<canvas \r\n    ref={canvasRef} \r\n    style={canvasStyle}\r\n    onClick={() =>\r\n          generateDownload(canvasRef.current, crop)}\r\n/>);\r\n};\r\n\r\nexport default Canvas;\r\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\n\nexport const DeleteIcon = props => (\n  <div\n    className=\"rmc-icon-container\"\n    {...props}\n  >\n    <div className=\"rmc-remove\" />\n    <style jsx>{`\n      .rmc-icon-container {\n        width: 15px;\n        height: 15px;\n        cursor: pointer;\n        float: right;\n        background:#262626;\n        opacity: 0.8;\n      }\n      .rmc-remove {\n        color: white;\n        position: absolute;\n        margin-top: 6px;\n      }\n\n      .rmc-remove:hover {\n        cursor: pointer;\n      }\n\n      .rmc-remove:before {\n        content: '';\n        position: absolute;\n        width: 15px;\n        height: 1px;\n        background-color: currentColor;\n        -webkit-transform: rotate(45deg);\n                transform: rotate(45deg);\n      }\n\n      .rmc-remove:after {\n        content: '';\n        position: absolute;\n        width: 15px;\n        height: 1px;\n        background-color: currentColor;\n        -webkit-transform: rotate(-45deg);\n                transform: rotate(-45deg);\n      }\n    `}\n    </style>\n  </div>\n\n)\n\nexport const NumberIcon = ({ number }) => (\n  <div className=\"rmc-number\">\n    { number }\n    <style jsx>{`\n      .rmc-number {\n        width: 15px;\n        height: 15px;\n        float: left;\n        font-size: 12px;\n        text-align: center;\n        line-height: 15px;\n        color: white;\n        opacity: 0.8;\n      }\n    `}\n    {/* background:#262626; */}\n    </style>\n    \n        \n  </div>\n)\n\nconst { number } = PropTypes\n\nNumberIcon.propTypes = {\n  number,\n}\n\nNumberIcon.defaultProps = {\n  number: '',\n}\n\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { equals, is, update, remove } from 'ramda'\nimport interact from 'interactjs'\nimport { DeleteIcon, NumberIcon } from './Icons'\nimport styles from './Crop.module.scss'\n\nclass Crop extends Component {\n\n  static cropStyle = (coordinate) => {\n    const {\n      x, y, width, height,\n    } = coordinate\n\n    return {\n      display: 'inline-block',\n      position: 'absolute',\n      transform: 'translate3d(0, 0, 0)',\n      boxSizing: 'border-box',\n      cursor: 'move',\n      width,\n      height,\n      top: y,\n      left: x,\n      border: '1px solid',\n      borderImageSource: 'url(\"data:image/gif;base64,R0lGODlhCgAKAJECAAAAAP///////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI5RDc5MTFDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI5RDc5MTBDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoAAgAsAAAAAAoACgAAAhWEERkn7W3ei7KlagMWF/dKgYeyGAUAIfkEBQoAAgAsAAAAAAoACgAAAg+UYwLJ7RnQm7QmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYgLJHdiinNSAVfOEKoUCACH5BAUKAAIALAAAAAAKAAoAAAIRVISAdusPo3RAzYtjaMIaUQAAIfkEBQoAAgAsAAAAAAoACgAAAg+MDiem7Q8bSLFaG5il6xQAIfkEBQoAAgAsAAAAAAoACgAAAg+UYRLJ7QnQm7SmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYBLJDdiinNSEVfOEKoECACH5BAUKAAIALAAAAAAKAAoAAAIRFISBdusPo3RBzYsjaMIaUQAAOw==\")',\n      borderImageSlice: '1',\n      borderImageRepeat: 'repeat',\n      msTouchAction: 'none',\n      touchAction: 'none',\n      userSelect: 'none',\n    }\n  }\n\n  prevCoordinate = {};\n  prevCoordinates = [];\n\n  isLeftBtnActive = false;\n  isRightBtnActive = false;\n\n  componentDidMount() {\n    interact(this.crop)\n      .draggable({\n        modifiers: [\n          interact.modifiers.restrictRect({\n            restriction: 'parent'\n          })\n        ],\n      })\n      .resizable({\n        edges: {\n          left: true, right: true, bottom: true, top: true,\n        },\n        modifiers: [\n          interact.modifiers.restrictRect({\n            restriction: 'parent'\n          })\n        ],\n      })\n      .on(['dragstart', 'resizestart'], this.changeStartPosition)\n      .on(['dragmove', 'dragend', 'resizemove', 'resizeend'], this.handleChange)\n      .actionChecker(this.actionTrigger)\n  }\n  shouldComponentUpdate(nextProps) {\n    return !equals(nextProps.coordinate, this.props.coordinate)\n      || (nextProps.index !== this.props.index)\n  }\n\n  actionTrigger = (pointer, event, action, interactable, element, interaction) => {\n    \n    \n    if (event.type === 'pointermove') {\n    }\n\n    if (event.type === 'pointerdown') {\n      \n    }\n\n\n    return action\n  }\n\n  handleChange = (e) => {\n    const {\n      index,\n      coordinate,\n      coordinate: { x, y },\n      coordinates,\n      onResize,\n      onRestore,\n      onDrag,\n      onChange,\n    } = this.props\n\n    \n    const { dx, dy } = e\n\n    let nextCoordinate = {};\n\n    if (e.type === 'resizemove') {\n      const { width, height } = e.rect\n      const { left, top } = e.deltaRect\n      nextCoordinate = {...coordinate, x: x + left, y: y + top, width, height,}\n    }\n\n    if (e.type === 'dragmove') {\n      nextCoordinate = { ...coordinate, x: x + dx, y: y + dy }\n    }\n    const nextCoordinates = update(index, nextCoordinate)(coordinates)\n\n      if (is(Function, onResize) && e.type === 'resizemove') {\n        onResize(nextCoordinate, index, nextCoordinates)\n      }\n      if (is(Function, onChange) && ['dragmove', 'resizemove'].includes(e.type)) {\n        onChange(nextCoordinate, index, nextCoordinates)\n      }\n      if (is(Function, onDrag)  && e.type === 'dragmove') {\n        onDrag(nextCoordinate, index, nextCoordinates)\n      }\n\n      if (['dragend', 'resizeend'].includes(e.type)) {\n        this.props.isChange(e);\n        document.removeEventListener('contextmenu', this.onContextMenu, false);\n      }\n      \n  }\n\n\n   changeStartPosition = (e) => {\n\n    const {\n      index,\n      coordinate,\n      coordinates,\n    } = this.props\n    \n    if (['dragstart', 'resizestart'].includes(e.type)) {\n      document.addEventListener('contextmenu', this.onContextMenu, false)\n      this.prevCoordinate = { ...coordinate}\n      this.prevCoordinates = [...coordinates]\n      this.prevCoordinates = update(index, this.prevCoordinate, coordinates)\n      this.props.isChange(e);\n    }\n    \n  }\n\n  handleRestore = (e) => {\n    const {\n      index,\n      onRestore,\n    } = this.props\n\n    if (is(Function, onRestore)) {\n      onRestore(this.prevCoordinate, index, this.prevCoordinates)\n    }\n  }\n\n  handleDelete = (e) => {\n    const {\n      index,\n      coordinate,\n      onDelete,\n      coordinates,\n    } = this.props\n    const nextCoordinates = remove(index, 1)(coordinates)\n    if (is(Function, onDelete)) {\n      onDelete(coordinate, index, nextCoordinates)\n    }\n  }\n\n  onContextMenu = (e) => {\n    e.preventDefault();\n    e.stopPropagation(); \n    if (e.button === 2) {\n\n      if (this.isLeftBtnActive === false) {\n        this.handleDelete();  \n      }\n      if (this.isLeftBtnActive === true) {\n        this.handleRestore();\n        this.isLeftBtnActive = false;\n      }  \n      \n    }\n    return false;\n  }\n\n  onMouseDown = (e) => {\n    if (e.button === 0) {\n      \n      // document.addEventListener('mouseup', this.outsideEvents, false)\n      // document.addEventListener('keydown', this.outsideEvents, false)\n      this.isLeftBtnActive = true;\n    }\n    if (e.button === 2) {\n      this.isRightBtnActive = true;\n    } \n  }\n\n  onMouseUp = (e) => {\n    if (e.button === 0) {\n      document.removeEventListener('mouseup', this.outsideEvents, false)\n      document.removeEventListener('keydown', this.outsideEvents, false)\n      document.removeEventListener('contextmenu', this.onContextMenu, false)\n      this.isLeftBtnActive = false;\n    }\n    if (e.button === 2) {\n      this.isRightBtnActive = false;\n    }\n  }\n\n  onKeyDown = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.code === \"Escape\") {\n      this.handleRestore();\n        this.isLeftBtnActive = false;\n    } \n  }\n\n  onKeyUp = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  componentWillUnmount() {\n    interact(this.crop)\n      .unset()\n  }\n\n  \n  render() {\n    const { coordinate, index, } = this.props\n    return (\n      <div\n        onMouseDown={this.onMouseDown}\n        onMouseUp={this.onMouseUp}\n        onContextMenu={this.onContextMenu}\n        style={Crop.cropStyle(coordinate)}\n        ref={crop => this.crop = crop}\n        onKeyDown={this.onKeyDown}\n        onKeyUp={this.onKeyUp}\n        tabIndex='0'\n      >\n        <NumberIcon number={index + 1} />\n        {/* <DeleteIcon\n          onClick={this.handleDelete}\n        /> */}\n        {\n          [styles.ordN, styles.ordNe, styles.ordNw, styles.ordS, styles.ordSe, styles.ordSw, styles.ordE, styles.ordW]\n          .map(\n            (style, id)=> <div className={style} key={id} />\n          )\n        }\n      </div>\n    )\n  }\n}\n\n\nexport const coordinateType = PropTypes.shape({\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n})\n\nCrop.propTypes = {\n  coordinate: coordinateType.isRequired,\n  index: PropTypes.number.isRequired,\n  onResize: PropTypes.func, // eslint-disable-line\n  onDrag: PropTypes.func, // eslint-disable-line\n  onDelete: PropTypes.func, // eslint-disable-line\n  onChange: PropTypes.func, // eslint-disable-line\n  onComplete: PropTypes.func, // eslint-disable-line\n  onRestore: PropTypes.func, // eslint-disable-line\n  coordinates: PropTypes.array, // eslint-disable-line\n  isChange: PropTypes.func, // eslint-disable-line\n}\n\nexport default Crop\n","import React, { Component } from 'react'\nimport { both, clone, is, complement, equals, map, addIndex } from 'ramda'\nimport PropTypes from 'prop-types'\nimport shortid from 'shortid'\nimport Crop, { coordinateType } from './Crop/Crop'\nimport { findAllByTestId } from '@testing-library/react'\n\n\nconst isValidPoint = (point = {}) => {\n  const strictNumber = number => both(\n    is(Number),\n    complement(equals(NaN)),\n  )(number)\n  return strictNumber(point.x) && strictNumber(point.y)\n}\n\n\nclass MultiCrops extends Component {\n  drawingIndex = -1\n\n  pointA = {}\n\n  id = shortid.generate()\n\n  prevCoordinate = {};\n  prevCoordinates = [];\n\n  isEscBtnTarget = false;\n  isDragResize = false;\n  isLeftBtnTarget = false;\n  mouseLeave = false;\n\n  isChange =(e)=>{\n    if (['dragstart', 'resizestart'].includes(e.type)) {\n        this.isDragResize = true;\n    }\n\n    if (['dragend', 'resizeend'].includes(e.type)) {\n        this.isDragResize = false;\n    }\n  }\n\n  renderCrops = (props) => {\n    const indexedMap = addIndex(map)\n    return indexedMap((coor, index) =>\n      (<Crop\n        // improve performance when delet crop in middle array\n        key={coor.id || index}\n        index={index}\n        coordinate={coor}\n        isChange={(e)=>{this.isChange(e)}}\n        {...props}\n      />))(props.coordinates)\n  }\n\n  \n\n  getCursorPosition = (e) => {\n    const { left, top } = this.container.getBoundingClientRect()\n    if (e.type === 'touchstart' || e.type === 'touchmove') {\n      return {\n        x: e.touches[0].pageX - left,\n        y: e.touches[0].pageY - top,\n      }\n    }\n    if (e.type === 'mousedown' || e.type === 'mousemove') {\n      return {\n      x: e.clientX - left,\n      y: e.clientY - top,\n      }\n    }\n    \n  }\n\n  handleMouseDown = (e) => {\n    document.removeEventListener('mouseup', this.outsideEvents, false)\n    document.removeEventListener('keydown', this.outsideEvents, false)\n    document.removeEventListener('contextmenu', this.onContextMenu, false)\n    \n    const { coordinates } = this.props\n    this.isDragResize = false;\n    if (e.button === 0 || e.type === 'touchstart') {\n      this.isLeftBtnTarget = true;\n      if (e.target === this.img || e.target === this.container) {\n        const { x, y } = this.getCursorPosition(e);\n        this.drawingIndex = coordinates.length;\n        this.pointA = { x, y };\n        this.id = shortid.generate();\n        this.isLeftBtnTarget = true;\n        this.prevCoordinate = {};\n        this.prevCoordinates = clone(coordinates);\n        this.isEscBtnTarget = false;\n        \n      }\n    }\n  }\n\n  outsideEvents = (e) => {\n    \n    const { onRestore, coordinates, coordinate } = this.props\n    if (e.button === 0) {\n      \n      if (this.isEscBtnTarget === false) {\n        if (is(Function, onRestore)) {\n          onRestore(coordinate, this.drawingIndex, coordinates)\n        }\n        this.handleMouseUp(e);\n      }\n      if(this.isEscBtnTarget === true && e.target !== this.img){\n        this.restoreCrops(e);\n        this.isEscBtnTarget = false;\n      }\n      document.removeEventListener('mouseup', this.outsideEvents, false)\n      document.removeEventListener('keydown', this.outsideEvents, false)\n      document.removeEventListener('contextmenu', this.onContextMenu, false)\n    }\n    \n    if (e.code === \"Escape\") {\n      this.isEscBtnTarget = true;\n    }\n    \n    if (e.button === 2 ) {\n      if(e.target !== this.img){\n        \n        this.restoreCrops(e);\n      }\n    }\n    return false;\n  }\n\n  handleMouseMove = (e) => {\n    if ((e.button === 0 || e.type === 'touchmove' )) {\n      const { onDraw, onChange, coordinates } = this.props\n      const { pointA } = this\n      if (isValidPoint(pointA) && (e.target.offsetParent===this.img.offsetParent)) {\n        const pointB = this.getCursorPosition(e)\n        console.log({e:e.target.offsetParent,t:this.img.offsetParent})\n        // get the drawing coordinate\n        const coordinate = {\n          x: Math.min(pointA.x, pointB.x),\n          y: Math.min(pointA.y, pointB.y),\n          width: Math.abs(pointA.x - pointB.x),\n          height: Math.abs(pointA.y - pointB.y),\n          id: this.id,\n        }\n        const nextCoordinates = clone(coordinates)\n        nextCoordinates[this.drawingIndex] = coordinate\n        if (is(Function, onDraw)) {\n          onDraw(coordinate, this.drawingIndex, nextCoordinates)\n        }\n        if (is(Function, onChange)) {\n          onChange(coordinate, this.drawingIndex, nextCoordinates)\n        }\n\n      }\n    }\n  }\n\n  restoreCrops = (e) => {\n    \n    const { onRestore } = this.props\n\n      \n    if (is(Function, onRestore)) {\n      onRestore(this.prevCoordinate, this.drawingIndex-1, this.prevCoordinates)\n    }\n\n    this.pointA = {};\n    this.isLeftBtnTarget = false;\n    this.isEscBtnTarget = false;\n  }\n\n\n  handleMouseUp = (e) => {\n\n    this.pointA = {};\n    this.isLeftBtnTarget = false;\n    this.mouseLeave = false;\n    this.isEscBtnTarget = false;\n    \n  }\n\n  handleMouseLeave = (e) => {\n    if (this.isDragResize === false && this.isLeftBtnTarget === true) {\n      document.addEventListener('contextmenu', this.onContextMenu, false)\n      document.addEventListener('mouseup', this.outsideEvents, false)\n      document.addEventListener('keydown', this.outsideEvents, false)\n    }\n    this.mouseLeave = true;\n  } \n\n  handleMouseEnter = (e) => {\n      document.removeEventListener('mouseup', this.outsideEvents, false)\n      document.removeEventListener('keydown', this.outsideEvents, false)\n      document.removeEventListener('contextmenu', this.onContextMenu, false)\n      this.mouseLeave = false;\n  } \n\n\n   onKeyDown = (e) => {\n   if (e.code === \"Escape\") {\n      this.isEscBtnTarget = true;\n    } \n  }\n\n  onContextMenu = (e)=>{\n    e.preventDefault();\n    e.stopPropagation();\n    return false;\n  }\n\n\n  render() {\n    const {\n      src, width, height, onLoad,\n    } = this.props\n    return (\n      <div\n        style={{\n          display: 'inline-block',\n          position: 'relative',\n          msTouchAction: 'none',\n          touchAction: 'none',\n          userSelect: 'none',\n        }}\n        onTouchStart={this.handleMouseDown}\n        onTouchMove={this.handleMouseMove}\n        onTouchEnd={(e)=>{!this.isEscBtnTarget ? this.handleMouseUp(e) : this.restoreCrops(e)}}\n        onMouseDown={this.handleMouseDown}\n        onMouseMove={this.handleMouseMove}\n        onMouseLeave={this.handleMouseLeave}\n        onMouseEnter={this.handleMouseEnter}\n        onKeyDown={this.onKeyDown}\n        onMouseUp={(e)=>{!this.isEscBtnTarget ? this.handleMouseUp(e) : this.restoreCrops(e)}}\n        ref={container => this.container = container}\n        tabIndex=\"0\"\n      >\n        <img\n          ref={img => this.img = img}\n          src={src}\n          width={width}\n          height={height}\n          onLoad={onLoad}\n          alt=\"\"\n          draggable={false}\n          onDragStart={(e) => { e.preventDefault() }}\n        />\n        {this.renderCrops(this.props)}\n\n      </div>\n    )\n  }\n}\n\nconst {\n  string, arrayOf, number, func,\n} = PropTypes\n\nMultiCrops.propTypes = {\n  coordinates: arrayOf(coordinateType),\n  src: string,\n  width: number, // eslint-disable-line\n  height: number, // eslint-disable-line\n  onDraw: func, // eslint-disable-line\n  onChange: func, // eslint-disable-line\n  onComplete: func, // eslint-disable-line\n  onRestore: func, // eslint-disable-line\n  onLoad: func, // eslint-disable-line\n}\n\nMultiCrops.defaultProps = {\n  coordinates: [],\n  src: '',\n}\n\nexport { removeid, addid } from './utils'\nexport default MultiCrops\n\n","import shortid from 'shortid'\nimport { map, assoc, omit } from 'ramda'\n\nexport const addid = map(assoc('id', shortid.generate()))\n\nexport const removeid = map(omit(['id']))\n","import Canvas from './../Canvas/Canvas';\r\nimport React, { useCallback, useRef, useState } from 'react';\r\nimport MultiCrops from './../MultiCrops/MultiCrops';\r\n\r\n\r\n\r\nconst canvasListStyle = {\r\n  display: 'flex',\r\n  flexFlow: 'row wrap', \r\n  alignItems: 'start',\r\n  justifyAlign: 'start',\r\n  justifyContent: 'start',\r\n  width: 'inherit',\r\n  height: '300px',\r\n  overflow: 'auto',\r\n  backgroundColor: 'lightgrey',\r\n}\r\n\r\nconst regionSelectorStyle = {\r\n  width: '600px',\r\n  height: '70vh',\r\n  backgroundColor: 'lightgrey',\r\n  msTouchAction: 'none',\r\n  touchAction: 'none',\r\n  userSelect: 'none'\r\n}\r\n\r\nconst RegionSelector = (props) => {\r\n\r\n  const {src} = props;\r\n\r\n  const [crops, setCrops] = useState([]);\r\n  const [completedCrops, setCompletedCrops] = useState([]);\r\n  const imgRef = useRef(null);\r\n\r\n  const onLoad = useCallback((img) => {\r\n    setCrops([]);\r\n    setCompletedCrops([]);\r\n    imgRef.current = img.target;\r\n  }, []);\r\n\r\n  const onChange = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n  }, []);\r\n\r\n  const onDelete = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n    setCompletedCrops(crops);\r\n  }, []);\r\n\r\n  const onRestore = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n    setCompletedCrops(crops);\r\n  }, []);\r\n\r\n  const onComplete = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n    setCompletedCrops(crops);\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <div \r\n      style={regionSelectorStyle} \r\n      onTouchEnd={(e)=>{setCompletedCrops(crops)}}\r\n      onClick={(e)=>{if (e.button === 0){setCompletedCrops(crops)}}}\r\n    >\r\n      <MultiCrops\r\n        src={src}\r\n        width={'600'}\r\n        coordinates={crops}\r\n        onChange={onChange}\r\n        onDelete={onDelete}\r\n        onRestore={onRestore}\r\n        onComplete={onComplete}\r\n        onLoad={onLoad}\r\n        \r\n      />\r\n      <div style={canvasListStyle}>\r\n        {completedCrops.map( (crop, i) =>\r\n          <Canvas\r\n            index={crop.id || i}\r\n            key={crop.id || i}\r\n            crop={crop}\r\n            img={imgRef.current}\r\n          />\r\n          )\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RegionSelector;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport RegionSelector from '../../components/RegionSelector/RegionSelector';\r\n\r\nconst Home = () => {\r\n\r\n  const [upImg, setUpImg] = useState();\r\n\r\n\r\n  const onSelectFile = (e) => {\r\n  if (e.target.files && e.target.files.length > 0) {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => setUpImg(reader.result));\r\n    reader.readAsDataURL(e.target.files[0]);\r\n  }\r\n  };\r\n\r\n  return (\r\n    <div style = {{\r\n      position: 'absolute',\r\n      top: '10%',\r\n      left: '50%',\r\n      transform: 'translate(-50%, -10%)', \r\n      display: 'flex',\r\n      flexFlow: 'column', \r\n      alignItems: 'center',\r\n      justifyAlign: 'center',\r\n      justifyContent: 'space-evenly',\r\n      height: '100vh',\r\n    }}>\r\n      <div>\r\n        <input type=\"file\" accept=\"image/*\" onChange={onSelectFile} />\r\n      </div>\r\n      <RegionSelector src={upImg}  />\r\n      <div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;","import {BrowserRouter, Route, Switch} from 'react-router-dom';\nimport logo from './logo.svg';\nimport './App.css';\nimport Home from './pages/Home/Home';\n\nfunction App() {\n  return (\n    <BrowserRouter basename=\"/\">\n        <Switch>\n            <Route path=\"/\" component={Home}/>\n        </Switch>\n      </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// serviceWorker.unregister();\n"],"sourceRoot":""}