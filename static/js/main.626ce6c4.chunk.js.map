{"version":3,"sources":["components/MultiCrops/Crop/Crop.module.scss","logo.svg","components/Canvas/Canvas.js","components/MultiCrops/Crop/Icons.js","components/MultiCrops/Crop/Crop.js","components/MultiCrops/MultiCrops.js","components/MultiCrops/utils.js","components/RegionSelector/RegionSelector.js","pages/Home/Home.js","App.js","index.js"],"names":["module","exports","canvasStyle","padding","Canvas","props","crop","canvasRef","img","callback","useRef","imgRef","current","useEffect","image","canvas","ctx","getContext","useCanvas","scaleX","naturalWidth","width","scaleY","naturalHeight","height","pixelRatio","window","devicePixelRatio","setTransform","imageSmoothingQuality","drawImage","x","y","ref","style","onClick","toBlob","blob","previewUrl","URL","createObjectURL","anchor","document","createElement","download","id","href","click","revokeObjectURL","generateDownload","NumberIcon","number","className","jsx","PropTypes","defaultProps","Crop","handleChange","e","index","coordinate","coordinates","onResize","onDrag","onChange","onComplete","dx","dy","nextCoordinate","includes","type","rect","deltaRect","left","top","nextCoordinates","update","is","Function","handleDelete","onDelete","remove","onContextMenu","event","console","log","preventDefault","stopPropagation","buttons","interact","this","draggable","modifiers","restrictRect","restriction","resizable","edges","right","bottom","on","nextProps","equals","unset","cropStyle","styles","ordN","ordNe","ordNw","ordS","ordSe","ordSw","ordE","ordW","map","Component","display","position","transform","boxSizing","cursor","border","borderImageSource","borderImageSlice","borderImageRepeat","shape","isRequired","isValidPoint","assoc","shortid","generate","omit","point","strictNumber","both","Number","complement","NaN","MultiCrops","drawingIndex","pointA","renderCrops","addIndex","indexedMap","coor","getCursorPosition","container","getBoundingClientRect","clientX","clientY","handleMouseDown","target","length","handleMouseMove","onDraw","pointB","Math","min","abs","clone","handleMouseUp","src","onLoad","onMouseDown","onMouseMove","onMouseUp","alt","string","arrayOf","func","canvasListStyle","flexFlow","alignItems","justifyAlign","justifyContent","overflow","backgroundColor","regionSelectorStyle","RegionSelector","useState","crops","setCrops","completedCrops","setCompletedCrops","useCallback","Home","upImg","setUpImg","accept","files","reader","FileReader","addEventListener","result","readAsDataURL","App","basename","path","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.626ce6c4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ordN\":\"Crop_ordN__F6Lkk\",\"ordNe\":\"Crop_ordNe__3yQCN\",\"ordNw\":\"Crop_ordNw__3FA7M\",\"ordS\":\"Crop_ordS__3XH0n\",\"ordSe\":\"Crop_ordSe__1UAa4\",\"ordSw\":\"Crop_ordSw__3NCyA\",\"ordE\":\"Crop_ordE__1HdlK\",\"ordW\":\"Crop_ordW__3q7pb\",\"ord-n\":\"Crop_ord-n__d_Xqz\",\"ord-e\":\"Crop_ord-e__177ep\",\"ord-s\":\"Crop_ord-s__2Z2QJ\",\"ord-w\":\"Crop_ord-w__87J-t\"};","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\nconst canvasStyle = {\r\n  padding: '10px',\r\n}\r\n\r\nfunction generateDownload(canvas, crop) {\r\n  if (!crop || !canvas) {\r\n    return;\r\n  }\r\n\r\n  canvas.toBlob(\r\n    (blob) => {\r\n      const previewUrl = window.URL.createObjectURL(blob);\r\n\r\n      const anchor = document.createElement('a');\r\n      anchor.download = `crop_${crop.id}.png`;\r\n      anchor.href = URL.createObjectURL(blob);\r\n      anchor.click();\r\n\r\n      window.URL.revokeObjectURL(previewUrl);\r\n    },\r\n    'image/png',\r\n    1\r\n  );\r\n}\r\n\r\nconst useCanvas = (props, callback) => {\r\n    const {crop, img} = props;\r\n\r\n    const canvasRef = useRef(null);\r\n    const imgRef = useRef(null);\r\n    imgRef.current = img;\r\n\r\n    useEffect(() => {\r\n        const image = imgRef.current;\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        callback([canvas, ctx, image]);\r\n    }, [crop]);\r\n\r\n    return canvasRef;\r\n}\r\n\r\nconst Canvas = (props) => {\r\n    const {crop, img} = props;\r\n\r\n    const canvasRef = useCanvas(props, ([canvas, ctx, image]) => {\r\n    const scaleX = image.naturalWidth / image.width;\r\n    const scaleY = image.naturalHeight / image.height;\r\n    const pixelRatio = window.devicePixelRatio;\r\n\r\n    canvas.width = crop.width * pixelRatio;\r\n    canvas.height = crop.height * pixelRatio;\r\n\r\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n    ctx.imageSmoothingQuality = 'high';\r\n\r\n    ctx.drawImage(\r\n      image,\r\n      crop.x * scaleX,\r\n      crop.y * scaleY,\r\n      crop.width * scaleX,\r\n      crop.height * scaleY,\r\n      0,\r\n      0,\r\n      crop.width,\r\n      crop.height\r\n    );\r\n  });\r\n\r\n  return (<canvas \r\n    ref={canvasRef} \r\n    style={canvasStyle}\r\n    onClick={() =>\r\n          generateDownload(canvasRef.current, crop)}\r\n/>);\r\n};\r\n\r\nexport default Canvas;\r\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\n\nexport const DeleteIcon = props => (\n  <div\n    className=\"rmc-icon-container\"\n    {...props}\n  >\n    <div className=\"rmc-remove\" />\n    <style jsx>{`\n      .rmc-icon-container {\n        width: 15px;\n        height: 15px;\n        cursor: pointer;\n        float: right;\n        background:#262626;\n        opacity: 0.8;\n      }\n      .rmc-remove {\n        color: white;\n        position: absolute;\n        margin-top: 6px;\n      }\n\n      .rmc-remove:hover {\n        cursor: pointer;\n      }\n\n      .rmc-remove:before {\n        content: '';\n        position: absolute;\n        width: 15px;\n        height: 1px;\n        background-color: currentColor;\n        -webkit-transform: rotate(45deg);\n                transform: rotate(45deg);\n      }\n\n      .rmc-remove:after {\n        content: '';\n        position: absolute;\n        width: 15px;\n        height: 1px;\n        background-color: currentColor;\n        -webkit-transform: rotate(-45deg);\n                transform: rotate(-45deg);\n      }\n    `}\n    </style>\n  </div>\n\n)\n\nexport const NumberIcon = ({ number }) => (\n  <div className=\"rmc-number\">\n    { number }\n    <style jsx>{`\n      .rmc-number {\n        width: 15px;\n        height: 15px;\n        float: left;\n        font-size: 12px;\n        text-align: center;\n        line-height: 15px;\n        color: white;\n        opacity: 0.8;\n      }\n    `}\n    {/* background:#262626; */}\n    </style>\n    \n        \n  </div>\n)\n\nconst { number } = PropTypes\n\nNumberIcon.propTypes = {\n  number,\n}\n\nNumberIcon.defaultProps = {\n  number: '',\n}\n\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { equals, is, update, remove } from 'ramda'\nimport interact from 'interactjs'\nimport { DeleteIcon, NumberIcon } from './Icons'\nimport styles from './Crop.module.scss'\n\nclass Crop extends Component {\n\n  static cropStyle = (coordinate) => {\n    const {\n      x, y, width, height,\n    } = coordinate\n\n    return {\n      display: 'inline-block',\n      position: 'absolute',\n      transform: 'translate3d(0, 0, 0)',\n      boxSizing: 'border-box',\n      cursor: 'move',\n      width,\n      height,\n      top: y,\n      left: x,\n      border: '1px solid',\n      borderImageSource: 'url(\"data:image/gif;base64,R0lGODlhCgAKAJECAAAAAP///////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI5RDc5MTFDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI5RDc5MTBDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoAAgAsAAAAAAoACgAAAhWEERkn7W3ei7KlagMWF/dKgYeyGAUAIfkEBQoAAgAsAAAAAAoACgAAAg+UYwLJ7RnQm7QmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYgLJHdiinNSAVfOEKoUCACH5BAUKAAIALAAAAAAKAAoAAAIRVISAdusPo3RAzYtjaMIaUQAAIfkEBQoAAgAsAAAAAAoACgAAAg+MDiem7Q8bSLFaG5il6xQAIfkEBQoAAgAsAAAAAAoACgAAAg+UYRLJ7QnQm7SmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYBLJDdiinNSEVfOEKoECACH5BAUKAAIALAAAAAAKAAoAAAIRFISBdusPo3RBzYsjaMIaUQAAOw==\")',\n      borderImageSlice: '1',\n      borderImageRepeat: 'repeat',\n    }\n  }\n\n  componentDidMount() {\n    interact(this.crop)\n      .draggable({\n        modifiers: [\n          interact.modifiers.restrictRect({\n            restriction: 'parent'\n          })\n        ],\n      })\n      .resizable({\n        edges: {\n          left: true, right: true, bottom: true, top: true,\n        },\n        modifiers: [\n          interact.modifiers.restrictRect({\n            restriction: 'parent'\n          })\n        ],\n      })\n      .on(['dragmove', 'dragend', 'resizemove', 'resizeend'], this.handleChange)\n  }\n  shouldComponentUpdate(nextProps) {\n    // reduce uncessary update\n    return !equals(nextProps.coordinate, this.props.coordinate)\n      || (nextProps.index !== this.props.index)\n  }\n\n  handleChange = (e) => {\n    const {\n      index,\n      coordinate,\n      coordinate: { x, y },\n      coordinates,\n      onResize,\n      onDrag,\n      onChange,\n      onComplete,\n    } = this.props\n\n    \n    const { dx, dy } = e\n\n    let nextCoordinate = {};\n\n    if (['resizemove', 'resizeend'].includes(e.type)) {\n      const { width, height } = e.rect\n      const { left, top } = e.deltaRect\n      nextCoordinate = {...coordinate, x: x + left, y: y + top, width, height,}\n    }\n\n    if (['dragmove', 'dragend'].includes(e.type)) {\n      nextCoordinate = { ...coordinate, x: x + dx, y: y + dy }\n    }\n\n    // const nextCoordinate = {\n    //   ...coordinate, x: x + left, y: y + top, width, height,\n    // }\n    // const nextCoordinate = { ...coordinate, x: x + dx, y: y + dy }\n    const nextCoordinates = update(index, nextCoordinate)(coordinates)\n\n    if (is(Function, onResize) && ['resizemove', 'resizeend'].includes(e.type)) {\n        onResize(nextCoordinate, index, nextCoordinates)\n    }\n    if (is(Function, onChange) && ['dragmove', 'dragend', 'resizemove', 'resizeend'].includes(e.type)) {\n        onChange(nextCoordinate, index, nextCoordinates)\n    }\n    if (is(Function, onDrag)  && ['dragmove', 'dragend'].includes(e.type)) {\n      onDrag(nextCoordinate, index, nextCoordinates)\n    }\n    if (is(Function, onComplete) && ['dragend', 'resizeend'].includes(e.type)) {\n      onComplete(nextCoordinate, index, nextCoordinates)\n    }\n  }\n\n  handleDelete = () => {\n    const {\n      index,\n      coordinate,\n      onDelete,\n      coordinates,\n    } = this.props\n    const nextCoordinates = remove(index, 1)(coordinates)\n    if (is(Function, onDelete)) {\n      onDelete(coordinate, index, nextCoordinates)\n    }\n  }\n\n  onContextMenu = (event) => {\n    console.log(event);\n    event.preventDefault();\n    event.stopPropagation(); \n    if (event.buttons !== 1) {\n      this.handleDelete()\n    }\n    return false;\n  }\n\n  componentWillUnmount() {\n    interact(this.crop)\n      .unset()\n  }\n\n  \n  render() {\n    const { coordinate, index } = this.props\n    return (\n      <div\n        onContextMenu={this.onContextMenu}\n        style={Crop.cropStyle(coordinate)}\n        ref={crop => this.crop = crop}\n      >\n        <NumberIcon number={index + 1} />\n        {/* <DeleteIcon\n          onClick={this.handleDelete}\n        /> */}\n        {/* {console.log(this)} */}\n        {\n          [styles.ordN, styles.ordNe, styles.ordNw, styles.ordS, styles.ordSe, styles.ordSw, styles.ordE, styles.ordW]\n          .map(\n            (style, id)=> <div className={style} key={id} />\n          )\n        }\n      </div>\n    )\n  }\n}\n\n\nexport const coordinateType = PropTypes.shape({\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n})\n\nCrop.propTypes = {\n  coordinate: coordinateType.isRequired,\n  index: PropTypes.number.isRequired,\n  onResize: PropTypes.func, // eslint-disable-line\n  onDrag: PropTypes.func, // eslint-disable-line\n  onDelete: PropTypes.func, // eslint-disable-line\n  onChange: PropTypes.func, // eslint-disable-line\n  onComplete: PropTypes.func, // eslint-disable-line\n  coordinates: PropTypes.array // eslint-disable-line\n}\n\nexport default Crop\n","import React, { Component } from 'react'\nimport { both, clone, is, complement, equals, map, addIndex } from 'ramda'\nimport PropTypes from 'prop-types'\nimport shortid from 'shortid'\nimport Crop, { coordinateType } from './Crop/Crop'\n\n\nconst isValidPoint = (point = {}) => {\n  const strictNumber = number => both(\n    is(Number),\n    complement(equals(NaN)),\n  )(number)\n  return strictNumber(point.x) && strictNumber(point.y)\n}\n\n\nclass MultiCrops extends Component {\n  drawingIndex = -1\n\n  pointA = {}\n\n  id = shortid.generate()\n\n  renderCrops = (props) => {\n    const indexedMap = addIndex(map)\n    return indexedMap((coor, index) =>\n      (<Crop\n        // improve performance when delet crop in middle array\n        key={coor.id || index}\n        index={index}\n        coordinate={coor}\n        {...props}\n      />))(props.coordinates)\n  }\n\n  getCursorPosition = (e) => {\n    const { left, top } = this.container.getBoundingClientRect()\n    return {\n      x: e.clientX - left,\n      y: e.clientY - top,\n    }\n  }\n\n  handleMouseDown = (e) => {\n    const { coordinates } = this.props\n    if (e.target === this.img || e.target === this.container) {\n      const { x, y } = this.getCursorPosition(e)\n\n      this.drawingIndex = coordinates.length\n      this.pointA = { x, y }\n      this.id = shortid.generate()\n    }\n  }\n\n\n  handleMouseMove = (e) => {\n    const { onDraw, onChange, coordinates } = this.props\n    const { pointA } = this\n    if (isValidPoint(pointA)) {\n      const pointB = this.getCursorPosition(e)\n\n      // get the drawing coordinate\n      const coordinate = {\n        x: Math.min(pointA.x, pointB.x),\n        y: Math.min(pointA.y, pointB.y),\n        width: Math.abs(pointA.x - pointB.x),\n        height: Math.abs(pointA.y - pointB.y),\n        id: this.id,\n      }\n      const nextCoordinates = clone(coordinates)\n      nextCoordinates[this.drawingIndex] = coordinate\n      if (is(Function, onDraw)) {\n        onDraw(coordinate, this.drawingIndex, nextCoordinates)\n      }\n      if (is(Function, onChange)) {\n        onChange(coordinate, this.drawingIndex, nextCoordinates)\n      }\n    }\n  }\n\n  handleMouseUp = (e) => {\n    const { onComplete, coordinates } = this.props\n    const { pointA } = this\n    if (isValidPoint(pointA)) {\n      const pointB = this.getCursorPosition(e)\n\n      // get the drawing coordinate\n      const coordinate = {\n        x: Math.min(pointA.x, pointB.x),\n        y: Math.min(pointA.y, pointB.y),\n        width: Math.abs(pointA.x - pointB.x),\n        height: Math.abs(pointA.y - pointB.y),\n        id: this.id,\n      }\n      const nextCoordinates = clone(coordinates)\n      nextCoordinates[this.drawingIndex] = coordinate\n      if (is(Function, onComplete)) {\n        onComplete(coordinate, this.drawingIndex, nextCoordinates)\n      }\n    }\n    this.pointA = {};\n  }\n\n\n  render() {\n    const {\n      src, width, height, onLoad,\n    } = this.props\n    // const { clicked } = this.state\n    return (\n      <div\n        style={{\n          display: 'inline-block',\n          position: 'relative',\n        }}\n        onMouseDown={this.handleMouseDown}\n        onMouseMove={this.handleMouseMove}\n        onMouseUp={this.handleMouseUp}\n        ref={container => this.container = container}\n      >\n        <img\n          ref={img => this.img = img}\n          src={src}\n          width={width}\n          height={height}\n          onLoad={onLoad}\n          alt=\"\"\n          draggable={false}\n        />\n        {this.renderCrops(this.props)}\n\n      </div>\n    )\n  }\n}\n\nconst {\n  string, arrayOf, number, func,\n} = PropTypes\n\nMultiCrops.propTypes = {\n  coordinates: arrayOf(coordinateType),\n  src: string,\n  width: number, // eslint-disable-line\n  height: number, // eslint-disable-line\n  onDraw: func, // eslint-disable-line\n  onChange: func, // eslint-disable-line\n  onComplete: func, // eslint-disable-line\n  onLoad: func, // eslint-disable-line\n}\n\nMultiCrops.defaultProps = {\n  coordinates: [],\n  src: '',\n}\n\nexport { removeid, addid } from './utils'\nexport default MultiCrops\n\n","import shortid from 'shortid'\nimport { map, assoc, omit } from 'ramda'\n\nexport const addid = map(assoc('id', shortid.generate()))\n\nexport const removeid = map(omit(['id']))\n","import Canvas from './../Canvas/Canvas';\r\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport MultiCrops from './../MultiCrops/MultiCrops';\r\n\r\n\r\n\r\nconst canvasListStyle = {\r\n  display: 'flex',\r\n  flexFlow: 'row wrap', \r\n  alignItems: 'center',\r\n  justifyAlign: 'center',\r\n  justifyContent: 'start',\r\n  width: 'inherit',\r\n  height: '300px',\r\n  overflow: 'auto',\r\n  backgroundColor: 'lightgrey',\r\n}\r\n\r\nconst regionSelectorStyle = {\r\n  width: '600px',\r\n  height: '70vh',\r\n  backgroundColor: 'lightgrey'\r\n}\r\n\r\nconst RegionSelector = (props) => {\r\n\r\n  const {src} = props;\r\n\r\n  const [crops, setCrops] = useState([]);\r\n  const [completedCrops, setCompletedCrops] = useState([]);\r\n  const imgRef = useRef(null);\r\n\r\n  const onLoad = useCallback((img) => {\r\n    setCrops([]);\r\n    setCompletedCrops([]);\r\n    imgRef.current = img.target;\r\n  }, []);\r\n\r\n  const onChange = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n  }, []);\r\n\r\n  const onDelete = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n    setCompletedCrops(crops);\r\n  }, []);\r\n\r\n  const onComplete = useCallback((crop, index, crops) => {\r\n    setCompletedCrops(crops);\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n    \r\n  // }, [completedCrops])\r\n\r\n    return (\r\n      <div style={regionSelectorStyle}>\r\n        <MultiCrops\r\n          src={src}\r\n          width={'600'}\r\n          coordinates={crops}\r\n          onChange={onChange}\r\n          onDelete={onDelete}\r\n          onComplete={onComplete}\r\n          onLoad={onLoad}\r\n        />\r\n        <div style={canvasListStyle}>\r\n          {completedCrops.map( (crop) =>\r\n            <Canvas\r\n              key={crop.id}\r\n              crop={crop}\r\n              img={imgRef.current}\r\n            />\r\n            )\r\n          }\r\n        </div>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default RegionSelector;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport RegionSelector from '../../components/RegionSelector/RegionSelector';\r\n\r\nconst Home = () => {\r\n\r\n  const [upImg, setUpImg] = useState();\r\n\r\n\r\n  const onSelectFile = (e) => {\r\n  if (e.target.files && e.target.files.length > 0) {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => setUpImg(reader.result));\r\n    reader.readAsDataURL(e.target.files[0]);\r\n  }\r\n  };\r\n\r\n  return (\r\n    <div style = {{\r\n      position: 'absolute',\r\n      top: '10%',\r\n      left: '50%',\r\n      transform: 'translate(-50%, -10%)', \r\n      display: 'flex',\r\n      flexFlow: 'column', \r\n      alignItems: 'center',\r\n      justifyAlign: 'center',\r\n      justifyContent: 'space-evenly',\r\n      height: '100vh',\r\n    }}>\r\n      <div>\r\n        <input type=\"file\" accept=\"image/*\" onChange={onSelectFile} />\r\n      </div>\r\n      <RegionSelector src={upImg}  />\r\n      <div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;","import {BrowserRouter, Route, Switch} from 'react-router-dom';\nimport logo from './logo.svg';\nimport './App.css';\nimport Home from './pages/Home/Home';\n\nfunction App() {\n  return (\n    <BrowserRouter basename=\"/\">\n        <Switch>\n            <Route path=\"/\" component={Home}/>\n        </Switch>\n      </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// serviceWorker.unregister();\n"],"sourceRoot":""}