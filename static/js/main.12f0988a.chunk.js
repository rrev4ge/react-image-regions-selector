(this["webpackJsonpregion-selector"]=this["webpackJsonpregion-selector"]||[]).push([[0],{163:function(e,t,n){},164:function(e,t,n){},30:function(e,t,n){e.exports={ordN:"Crop_ordN__F6Lkk",ordNe:"Crop_ordNe__3yQCN",ordNw:"Crop_ordNw__3FA7M",ordS:"Crop_ordS__3XH0n",ordSe:"Crop_ordSe__1UAa4",ordSw:"Crop_ordSw__3NCyA",ordE:"Crop_ordE__1HdlK",ordW:"Crop_ordW__3q7pb","ord-n":"Crop_ord-n__d_Xqz","ord-e":"Crop_ord-e__177ep","ord-s":"Crop_ord-s__2Z2QJ","ord-w":"Crop_ord-w__87J-t"}},474:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),i=n(26),a=n.n(i),s=(n(163),n(157)),c=n(8),u=(n.p,n(164),n(38)),d=n(2),h={padding:"10px"};var p=function(e){var t=e.crop,n=(e.img,function(e,t){var n=e.crop,r=e.img,i=Object(o.useRef)(null),a=Object(o.useRef)(null);return a.current=r,Object(o.useEffect)((function(){var e=a.current,n=i.current,o=n.getContext("2d");t([n,o,e])}),[n]),i}(e,(function(e){var n=Object(u.a)(e,3),o=n[0],r=n[1],i=n[2],a=i.naturalWidth/i.width,s=i.naturalHeight/i.height,c=window.devicePixelRatio;o.width=t.width*c,o.height=t.height*c,r.setTransform(c,0,0,c,0,0),r.imageSmoothingQuality="high",r.drawImage(i,t.x*a,t.y*s,t.width*a,t.height*s,0,0,t.width,t.height)})));return Object(d.jsx)("canvas",{ref:n,style:h,onClick:function(){return function(e,t){t&&e&&e.toBlob((function(e){var n=window.URL.createObjectURL(e),o=document.createElement("a");o.download="crop_".concat(t.id,".png"),o.href=URL.createObjectURL(e),o.click(),window.URL.revokeObjectURL(n)}),"image/png",1)}(n.current,t)}})},l=n(24),A=n(74),g=n(75),v=n(76),b=n(81),f=n(79),m=n(482),j=n(475),C=n(484),x=n(480),y=n(477),O=n(78),E=n(483),w=n(9),M=n.n(w),D=n(59),I=n.n(D),L=n(159),R=n(481),B=n(476),k=n(62),S=n.n(k),T=function(e){var t=e.number;return Object(d.jsxs)("div",{className:"rmc-number",children:[t,Object(d.jsx)("style",{jsx:!0,children:"\n      .rmc-number {\n        width: 15px;\n        height: 15px;\n        float: left;\n        font-size: 12px;\n        text-align: center;\n        line-height: 15px;\n        color: white;\n        opacity: 0.8;\n      }\n    "})]})};M.a.number;T.defaultProps={number:""};var U=n(30),z=n.n(U),N=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(A.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).prevCoordinate={},e.prevCoordinates=[],e.isLeftBtnActive=!1,e.isRightBtnActive=!1,e.actionTrigger=function(e,t,n,o,r,i){return t.type,t.type,n},e.handleChange=function(t){var n=e.props,o=n.index,r=n.coordinate,i=n.coordinate,a=i.x,s=i.y,c=n.coordinates,u=n.onResize,d=(n.onRestore,n.onDrag),h=n.onChange,p=t.dx,A=t.dy,g={};if("resizemove"===t.type){var v=t.rect,b=v.width,f=v.height,m=t.deltaRect,C=m.left,x=m.top;g=Object(l.a)(Object(l.a)({},r),{},{x:a+C,y:s+x,width:b,height:f})}"dragmove"===t.type&&(g=Object(l.a)(Object(l.a)({},r),{},{x:a+p,y:s+A}));var y=Object(R.a)(o,g)(c);Object(j.a)(Function,u)&&"resizemove"===t.type&&u(g,o,y),Object(j.a)(Function,h)&&["dragmove","resizemove"].includes(t.type)&&h(g,o,y),Object(j.a)(Function,d)&&"dragmove"===t.type&&d(g,o,y),["dragend","resizeend"].includes(t.type)&&(e.props.isChange(t),document.removeEventListener("contextmenu",e.onContextMenu,!1))},e.changeStartPosition=function(t){var n=e.props,o=n.index,r=n.coordinate,i=n.coordinates;["dragstart","resizestart"].includes(t.type)&&(document.addEventListener("contextmenu",e.onContextMenu,!1),e.prevCoordinate=Object(l.a)({},r),e.prevCoordinates=Object(L.a)(i),e.prevCoordinates=Object(R.a)(o,e.prevCoordinate,i),e.props.isChange(t))},e.handleRestore=function(t){var n=e.props,o=n.index,r=n.onRestore;Object(j.a)(Function,r)&&r(e.prevCoordinate,o,e.prevCoordinates)},e.handleDelete=function(t){var n=e.props,o=n.index,r=n.coordinate,i=n.onDelete,a=n.coordinates,s=Object(B.a)(o,1)(a);Object(j.a)(Function,i)&&i(r,o,s)},e.onContextMenu=function(t){return t.preventDefault(),t.stopPropagation(),2===t.button&&(!1===e.isLeftBtnActive&&e.handleDelete(),!0===e.isLeftBtnActive&&(e.handleRestore(),e.isLeftBtnActive=!1)),!1},e.onMouseDown=function(t){0===t.button&&(e.isLeftBtnActive=!0),2===t.button&&(e.isRightBtnActive=!0)},e.onMouseUp=function(t){0===t.button&&(document.removeEventListener("mouseup",e.outsideEvents,!1),document.removeEventListener("keydown",e.outsideEvents,!1),document.removeEventListener("contextmenu",e.onContextMenu,!1),e.isLeftBtnActive=!1),2===t.button&&(e.isRightBtnActive=!1)},e.onKeyDown=function(t){t.preventDefault(),t.stopPropagation(),"Escape"===t.code&&(e.handleRestore(),e.isLeftBtnActive=!1)},e.onKeyUp=function(e){e.preventDefault(),e.stopPropagation()},e}return Object(g.a)(n,[{key:"componentDidMount",value:function(){S()(this.crop).draggable({modifiers:[S.a.modifiers.restrictRect({restriction:"parent"})]}).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},modifiers:[S.a.modifiers.restrictRect({restriction:"parent"})]}).on(["dragstart","resizestart"],this.changeStartPosition).on(["dragmove","dragend","resizemove","resizeend"],this.handleChange).actionChecker(this.actionTrigger)}},{key:"shouldComponentUpdate",value:function(e){return!Object(x.a)(e.coordinate,this.props.coordinate)||e.index!==this.props.index}},{key:"componentWillUnmount",value:function(){S()(this.crop).unset()}},{key:"render",value:function(){var e=this,t=this.props,o=t.coordinate,r=t.index;return Object(d.jsxs)("div",{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onContextMenu:this.onContextMenu,style:n.cropStyle(o),ref:function(t){return e.crop=t},onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,tabIndex:"0",children:[Object(d.jsx)(T,{number:r+1}),[z.a.ordN,z.a.ordNe,z.a.ordNw,z.a.ordS,z.a.ordSe,z.a.ordSw,z.a.ordE,z.a.ordW].map((function(e,t){return Object(d.jsx)("div",{className:e},t)}))]})}}]),n}(o.Component);N.cropStyle=function(e){var t=e.x,n=e.y;return{display:"inline-block",position:"absolute",transform:"translate3d(0, 0, 0)",boxSizing:"border-box",cursor:"move",width:e.width,height:e.height,top:n,left:t,border:"1px solid",borderImageSource:'url("data:image/gif;base64,R0lGODlhCgAKAJECAAAAAP///////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI5RDc5MTFDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI5RDc5MTBDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoAAgAsAAAAAAoACgAAAhWEERkn7W3ei7KlagMWF/dKgYeyGAUAIfkEBQoAAgAsAAAAAAoACgAAAg+UYwLJ7RnQm7QmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYgLJHdiinNSAVfOEKoUCACH5BAUKAAIALAAAAAAKAAoAAAIRVISAdusPo3RAzYtjaMIaUQAAIfkEBQoAAgAsAAAAAAoACgAAAg+MDiem7Q8bSLFaG5il6xQAIfkEBQoAAgAsAAAAAAoACgAAAg+UYRLJ7QnQm7SmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYBLJDdiinNSEVfOEKoECACH5BAUKAAIALAAAAAAKAAoAAAIRFISBdusPo3RBzYsjaMIaUQAAOw==")',borderImageSlice:"1",borderImageRepeat:"repeat",msTouchAction:"none",touchAction:"none",userSelect:"none"}};M.a.shape({x:M.a.number.isRequired,y:M.a.number.isRequired,width:M.a.number.isRequired,height:M.a.number.isRequired});var Y=N,F=(n(176),n(478)),Q=n(479),_=(Object(O.a)(Object(F.a)("id",I.a.generate())),Object(O.a)(Object(Q.a)(["id"])),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){return Object(m.a)(Object(j.a)(Number),Object(C.a)(Object(x.a)(NaN)))(e)};return t(e.x)&&t(e.y)}),J=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(A.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).drawingIndex=-1,e.pointA={},e.id=I.a.generate(),e.prevCoordinate={},e.prevCoordinates=[],e.isEscBtnTarget=!1,e.isDragResize=!1,e.isLeftBtnTarget=!1,e.mouseLeave=!1,e.isChange=function(t){["dragstart","resizestart"].includes(t.type)&&(e.isDragResize=!0),["dragend","resizeend"].includes(t.type)&&(e.isDragResize=!1)},e.renderCrops=function(t){return Object(y.a)(O.a)((function(n,o){return Object(d.jsx)(Y,Object(l.a)({index:o,coordinate:n,isChange:function(t){e.isChange(t)}},t),n.id||o)}))(t.coordinates)},e.getCursorPosition=function(t){var n=e.container.getBoundingClientRect(),o=n.left,r=n.top;return"touchstart"===t.type||"touchmove"===t.type?{x:t.touches[0].pageX-o,y:t.touches[0].pageY-r}:"mousedown"===t.type||"mousemove"===t.type?{x:t.clientX-o,y:t.clientY-r}:void 0},e.handleMouseDown=function(t){document.removeEventListener("mouseup",e.outsideEvents,!1),document.removeEventListener("keydown",e.outsideEvents,!1),document.removeEventListener("contextmenu",e.onContextMenu,!1);var n=e.props.coordinates;if(e.isDragResize=!1,(0===t.button||"touchstart"===t.type)&&(e.isLeftBtnTarget=!0,t.target===e.img||t.target===e.container)){var o=e.getCursorPosition(t),r=o.x,i=o.y;e.drawingIndex=n.length,e.pointA={x:r,y:i},e.id=I.a.generate(),e.isLeftBtnTarget=!0,e.prevCoordinate={},e.prevCoordinates=Object(E.a)(n),e.isEscBtnTarget=!1}},e.outsideEvents=function(t){var n=e.props,o=n.onRestore,r=n.coordinates,i=n.coordinate;return 0===t.button&&(!1===e.isEscBtnTarget&&(Object(j.a)(Function,o)&&o(i,e.drawingIndex,r),e.handleMouseUp(t)),!0===e.isEscBtnTarget&&t.target!==e.img&&(e.restoreCrops(t),e.isEscBtnTarget=!1),document.removeEventListener("mouseup",e.outsideEvents,!1),document.removeEventListener("keydown",e.outsideEvents,!1),document.removeEventListener("contextmenu",e.onContextMenu,!1)),"Escape"===t.code&&(e.isEscBtnTarget=!0),2===t.button&&t.target!==e.img&&e.restoreCrops(t),!1},e.handleMouseMove=function(t){if(0===t.button||"touchmove"===t.type){var n=e.props,o=n.onDraw,r=n.onChange,i=n.coordinates,a=Object(v.a)(e).pointA;if(_(a)&&t.target.offsetParent===e.img.offsetParent){var s=e.getCursorPosition(t),c={x:Math.min(a.x,s.x),y:Math.min(a.y,s.y),width:Math.abs(a.x-s.x),height:Math.abs(a.y-s.y),id:e.id},u=Object(E.a)(i);u[e.drawingIndex]=c,Object(j.a)(Function,o)&&o(c,e.drawingIndex,u),Object(j.a)(Function,r)&&r(c,e.drawingIndex,u)}}},e.restoreCrops=function(t){var n=e.props.onRestore;Object(j.a)(Function,n)&&n(e.prevCoordinate,e.drawingIndex-1,e.prevCoordinates),e.pointA={},e.isLeftBtnTarget=!1,e.isEscBtnTarget=!1},e.handleMouseUp=function(t){e.pointA={},e.isLeftBtnTarget=!1,e.mouseLeave=!1,e.isEscBtnTarget=!1},e.handleMouseLeave=function(t){!1===e.isDragResize&&!0===e.isLeftBtnTarget&&(document.addEventListener("contextmenu",e.onContextMenu,!1),document.addEventListener("mouseup",e.outsideEvents,!1),document.addEventListener("keydown",e.outsideEvents,!1)),e.mouseLeave=!0},e.handleMouseEnter=function(t){document.removeEventListener("mouseup",e.outsideEvents,!1),document.removeEventListener("keydown",e.outsideEvents,!1),document.removeEventListener("contextmenu",e.onContextMenu,!1),e.mouseLeave=!1},e.onKeyDown=function(t){"Escape"===t.code&&(e.isEscBtnTarget=!0)},e.onContextMenu=function(e){return e.preventDefault(),e.stopPropagation(),!1},e}return Object(g.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.src,o=t.width,r=t.height,i=t.onLoad;return Object(d.jsxs)("div",{style:{display:"inline-block",position:"relative",msTouchAction:"none",touchAction:"none",userSelect:"none"},onTouchStart:this.handleMouseDown,onTouchMove:this.handleMouseMove,onTouchEnd:function(t){e.isEscBtnTarget?e.restoreCrops(t):e.handleMouseUp(t)},onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter,onKeyDown:this.onKeyDown,onMouseUp:function(t){e.isEscBtnTarget?e.restoreCrops(t):e.handleMouseUp(t)},ref:function(t){return e.container=t},tabIndex:"0",children:[Object(d.jsx)("img",{ref:function(t){return e.img=t},src:n,width:o,height:r,onLoad:i,alt:"",draggable:!1,onDragStart:function(e){e.preventDefault()}}),this.renderCrops(this.props)]})}}]),n}(o.Component);M.a.string,M.a.arrayOf,M.a.number,M.a.func;J.defaultProps={coordinates:[],src:""};var Z=J,G={display:"flex",flexFlow:"row wrap",alignItems:"start",justifyAlign:"start",justifyContent:"start",width:"inherit",height:"300px",overflow:"auto",backgroundColor:"lightgrey"},W={width:"600px",height:"70vh",backgroundColor:"lightgrey",msTouchAction:"none",touchAction:"none",userSelect:"none"},P=function(e){var t=e.src,n=Object(o.useState)([]),r=Object(u.a)(n,2),i=r[0],a=r[1],s=Object(o.useState)([]),c=Object(u.a)(s,2),h=c[0],l=c[1],A=Object(o.useRef)(null),g=Object(o.useCallback)((function(e){a([]),l([]),A.current=e.target}),[]),v=Object(o.useCallback)((function(e,t,n){a(n)}),[]),b=Object(o.useCallback)((function(e,t,n){a(n),l(n)}),[]),f=Object(o.useCallback)((function(e,t,n){a(n),l(n)}),[]),m=Object(o.useCallback)((function(e,t,n){a(n),l(n)}),[]);return Object(d.jsxs)("div",{style:W,onTouchEnd:function(e){l(i)},onClick:function(e){0===e.button&&l(i)},children:[Object(d.jsx)(Z,{src:t,width:"600",coordinates:i,onChange:v,onDelete:b,onRestore:f,onComplete:m,onLoad:g}),Object(d.jsx)("div",{style:G,children:h.map((function(e,t){return Object(d.jsx)(p,{index:e.id||t,crop:e,img:A.current},e.id||t)}))})]})},V=function(){var e=Object(o.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(d.jsxs)("div",{style:{position:"absolute",top:"10%",left:"50%",transform:"translate(-50%, -10%)",display:"flex",flexFlow:"column",alignItems:"center",justifyAlign:"center",justifyContent:"space-evenly",height:"100vh"},children:[Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){return r(t.result)})),t.readAsDataURL(e.target.files[0])}}})}),Object(d.jsx)(P,{src:n}),Object(d.jsx)("div",{})]})};var K=function(){return Object(d.jsx)(s.a,{basename:"/",children:Object(d.jsx)(c.c,{children:Object(d.jsx)(c.a,{path:"/",component:V})})})};a.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(K,{})}),document.getElementById("root"))}},[[474,1,2]]]);
//# sourceMappingURL=main.12f0988a.chunk.js.map