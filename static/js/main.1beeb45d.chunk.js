(this["webpackJsonpregion-selector"]=this["webpackJsonpregion-selector"]||[]).push([[0],{12:function(e,t,n){e.exports={ordN:"Crop_ordN__F6Lkk",ordNe:"Crop_ordNe__3yQCN",ordNw:"Crop_ordNw__3FA7M",ordS:"Crop_ordS__3XH0n",ordSe:"Crop_ordSe__1UAa4",ordSw:"Crop_ordSw__3NCyA",ordE:"Crop_ordE__1HdlK",ordW:"Crop_ordW__3q7pb","ord-n":"Crop_ord-n__d_Xqz","ord-e":"Crop_ord-e__177ep","ord-s":"Crop_ord-s__2Z2QJ","ord-w":"Crop_ord-w__87J-t"}},47:function(e,t,n){},48:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(40),a=n.n(i),c=(n(47),n(41)),d=n(5),s=(n.p,n(48),n(15)),u=n(1),l={padding:"10px"};var A=function(e){var t=e.crop,n=function(e,t){var n=Object(o.useRef)(null),r=Object(o.useRef)(null);return r.current=e,Object(o.useEffect)((function(){var e=r.current,o=n.current,i=o.getContext("2d");t([o,i,e])}),[]),n}(e.img,(function(e){var n=Object(s.a)(e,3),o=n[0],r=n[1],i=n[2],a=i.naturalWidth/i.width,c=i.naturalHeight/i.height,d=window.devicePixelRatio;o.width=t.width*d,o.height=t.height*d,r.setTransform(d,0,0,d,0,0),r.imageSmoothingQuality="high",r.drawImage(i,t.x*a,t.y*c,t.width*a,t.height*c,0,0,t.width,t.height)}));return Object(u.jsx)("canvas",{ref:n,style:l,onClick:function(){return function(e,t){t&&e&&e.toBlob((function(e){var n=window.URL.createObjectURL(e),o=document.createElement("a");o.download="crop_".concat(t.id,".png"),o.href=URL.createObjectURL(e),o.click(),window.URL.revokeObjectURL(n)}),"image/png",1)}(n.current,t)}})},h=n(11),b=n(27),g=n(28),j=n(21),p=n(33),f=n(31),O=n(71),x=n(64),m=n(73),v=n(69),y=n(66),w=n(30),C=n(72),M=n(7),I=n.n(M),D=n(22),R=n.n(D),E=n(70),k=n(65),N=n(25),S=n.n(N),U=function(e){var t=e.number;return Object(u.jsxs)("div",{className:"rmc-number",children:[t,Object(u.jsx)("style",{jsx:!0,children:"\n      .rmc-number {\n        width: 15px;\n        height: 15px;\n        float: left;\n        font-size: 12px;\n        text-align: center;\n        line-height: 15px;\n        color: white;\n        opacity: 0.8;\n      }\n    "})]})};I.a.number;U.defaultProps={number:""};var Q=n(12),F=n.n(Q),Y=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(b.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleResizeMove=function(t){var n=e.props,o=n.index,r=n.coordinate,i=n.coordinate,a=i.x,c=i.y,d=n.coordinates,s=n.onResize,u=n.onChange,l=n.onComplete,A=t.rect,b=A.width,g=A.height,j=t.deltaRect,p=j.left,f=j.top,O=Object(h.a)(Object(h.a)({},r),{},{x:a+p,y:c+f,width:b,height:g}),m=Object(E.a)(o,O)(d);Object(x.a)(Function,s)&&s(O,o,m),Object(x.a)(Function,u)&&u(O,o,m),Object(x.a)(Function,l)&&l(O,o,m)},e.handleDragMove=function(t){var n=e.props,o=n.index,r=n.coordinate,i=n.coordinate,a=i.x,c=i.y,d=n.coordinates,s=n.onDrag,u=n.onChange,l=n.onComplete,A=t.dx,b=t.dy,g=Object(h.a)(Object(h.a)({},r),{},{x:a+A,y:c+b}),j=Object(E.a)(o,g)(d);Object(x.a)(Function,s)&&s(g,o,j),Object(x.a)(Function,u)&&u(g,o,j),Object(x.a)(Function,l)&&l(g,o,j)},e.handleDelete=function(){var t=e.props,n=t.index,o=t.coordinate,r=t.onDelete,i=t.coordinates,a=Object(k.a)(n,1)(i);Object(x.a)(Function,r)&&r(o,n,a)},e.onContextMenu=function(t){return t.preventDefault(),t.stopPropagation(),e.handleDelete(),!1},e}return Object(g.a)(n,[{key:"componentDidMount",value:function(){S()(this.crop).draggable({modifiers:[S.a.modifiers.restrictRect({restriction:"parent"})]}).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},modifiers:[S.a.modifiers.restrictRect({restriction:"parent"})]}).on("dragmove",this.handleDragMove).on("resizemove",this.handleResizeMove)}},{key:"shouldComponentUpdate",value:function(e){return!Object(v.a)(e.coordinate,this.props.coordinate)||e.index!==this.props.index}},{key:"componentWillUnmount",value:function(){S()(this.crop).unset()}},{key:"render",value:function(){var e=this,t=this.props,o=t.coordinate,r=t.index;return Object(u.jsxs)("div",{onContextMenu:this.onContextMenu,style:n.cropStyle(o),ref:function(t){return e.crop=t},children:[Object(u.jsx)(U,{number:r+1}),[F.a.ordN,F.a.ordNe,F.a.ordNw,F.a.ordS,F.a.ordSe,F.a.ordSw,F.a.ordE,F.a.ordW].map((function(e,t){return Object(u.jsx)("div",{className:e},t)}))]})}}]),n}(o.Component);Y.cropStyle=function(e){var t=e.x,n=e.y;return{display:"inline-block",position:"absolute",transform:"translate3d(0, 0, 0)",boxSizing:"border-box",cursor:"move",width:e.width,height:e.height,top:n,left:t,border:"1px solid",borderImageSource:'url("data:image/gif;base64,R0lGODlhCgAKAJECAAAAAP///////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI5RDc5MTFDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI5RDc5MTBDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoAAgAsAAAAAAoACgAAAhWEERkn7W3ei7KlagMWF/dKgYeyGAUAIfkEBQoAAgAsAAAAAAoACgAAAg+UYwLJ7RnQm7QmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYgLJHdiinNSAVfOEKoUCACH5BAUKAAIALAAAAAAKAAoAAAIRVISAdusPo3RAzYtjaMIaUQAAIfkEBQoAAgAsAAAAAAoACgAAAg+MDiem7Q8bSLFaG5il6xQAIfkEBQoAAgAsAAAAAAoACgAAAg+UYRLJ7QnQm7SmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYBLJDdiinNSEVfOEKoECACH5BAUKAAIALAAAAAAKAAoAAAIRFISBdusPo3RBzYsjaMIaUQAAOw==")',borderImageSlice:"1",borderImageRepeat:"repeat"}};I.a.shape({x:I.a.number.isRequired,y:I.a.number.isRequired,width:I.a.number.isRequired,height:I.a.number.isRequired});var _=Y,z=n(67),L=n(68),J=(Object(w.a)(Object(z.a)("id",R.a.generate())),Object(w.a)(Object(L.a)(["id"])),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){return Object(O.a)(Object(x.a)(Number),Object(m.a)(Object(v.a)(NaN)))(e)};return t(e.x)&&t(e.y)}),Z=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(b.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).drawingIndex=-1,e.pointA={},e.id=R.a.generate(),e.renderCrops=function(e){return Object(y.a)(w.a)((function(t,n){return Object(u.jsx)(_,Object(h.a)({index:n,coordinate:t},e),t.id||n)}))(e.coordinates)},e.getCursorPosition=function(t){var n=e.container.getBoundingClientRect(),o=n.left,r=n.top;return{x:t.clientX-o,y:t.clientY-r}},e.handleMouseDown=function(t){var n=e.props.coordinates;if(t.target===e.img||t.target===e.container){var o=e.getCursorPosition(t),r=o.x,i=o.y;e.drawingIndex=n.length,e.pointA={x:r,y:i},e.id=R.a.generate()}},e.handleMouseMove=function(t){var n=e.props,o=n.onDraw,r=n.onChange,i=n.coordinates,a=Object(j.a)(e).pointA;if(J(a)){var c=e.getCursorPosition(t),d={x:Math.min(a.x,c.x),y:Math.min(a.y,c.y),width:Math.abs(a.x-c.x),height:Math.abs(a.y-c.y),id:e.id},s=Object(C.a)(i);s[e.drawingIndex]=d,Object(x.a)(Function,o)&&o(d,e.drawingIndex,s),Object(x.a)(Function,r)&&r(d,e.drawingIndex,s)}},e.handleMouseUp=function(t){var n=e.props,o=n.onComplete,r=n.coordinates,i=Object(j.a)(e).pointA;if(J(i)){var a=e.getCursorPosition(t),c={x:Math.min(i.x,a.x),y:Math.min(i.y,a.y),width:Math.abs(i.x-a.x),height:Math.abs(i.y-a.y),id:e.id},d=Object(C.a)(r);d[e.drawingIndex]=c,Object(x.a)(Function,o)&&o(c,e.drawingIndex,d)}e.pointA={}},e}return Object(g.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.src,o=t.width,r=t.height,i=t.onLoad;return Object(u.jsxs)("div",{style:{display:"inline-block",position:"relative"},onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,ref:function(t){return e.container=t},children:[Object(u.jsx)("img",{ref:function(t){return e.img=t},src:n,width:o,height:r,onLoad:i,alt:"",draggable:!1}),this.renderCrops(this.props)]})}}]),n}(o.Component);I.a.string,I.a.arrayOf,I.a.number,I.a.func;Z.defaultProps={coordinates:[],src:""};var B=Z,G={display:"flex",flexFlow:"row wrap",alignItems:"center",justifyAlign:"center",justifyContent:"start",width:"inherit",height:"300px",overflow:"auto",backgroundColor:"lightgrey"},W={width:"600px",height:"70vh",backgroundColor:"lightgrey"},T=function(e){var t=e.src,n=Object(o.useState)([]),r=Object(s.a)(n,2),i=r[0],a=r[1],c=Object(o.useState)([]),d=Object(s.a)(c,2),l=d[0],h=d[1],b=Object(o.useRef)(null),g=Object(o.useCallback)((function(e){b.current=e.target}),[]),j=Object(o.useCallback)((function(e,t,n){a(n),console.log(e)}),[]),p=Object(o.useCallback)((function(e,t,n){a(n),console.log(e),h(n)}),[]),f=Object(o.useCallback)((function(e,t,n){console.log(e),h(n)}),[]);return Object(o.useEffect)((function(){console.log({QQQ:l})}),[l]),Object(u.jsxs)("div",{style:W,children:[Object(u.jsx)(B,{src:t,width:"600",coordinates:i,onChange:j,onDelete:p,onComplete:f,onLoad:g}),Object(u.jsx)("div",{style:G,children:l.map((function(e){return Object(u.jsx)(A,{crop:e,img:b.current},e.id)}))})]})},V=function(){var e=Object(o.useState)(),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(u.jsxs)("div",{style:{position:"absolute",top:"10%",left:"50%",transform:"translate(-50%, -10%)",display:"flex",flexFlow:"column",alignItems:"center",justifyAlign:"center",justifyContent:"space-evenly",height:"100vh"},children:[Object(u.jsx)("div",{children:Object(u.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){return r(t.result)})),t.readAsDataURL(e.target.files[0])}}})}),Object(u.jsx)(T,{src:n}),Object(u.jsx)("div",{})]})};var P=function(){return Object(u.jsx)(c.a,{basename:"/",children:Object(u.jsx)(d.c,{children:Object(u.jsx)(d.a,{path:"/",component:V})})})};a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(P,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.1beeb45d.chunk.js.map