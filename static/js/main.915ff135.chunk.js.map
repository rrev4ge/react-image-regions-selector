{"version":3,"sources":["components/MultiCrops/Crop/Crop.module.scss","logo.svg","components/Canvas/Canvas.js","components/MultiCrops/Crop/Icons.js","components/MultiCrops/Crop/Crop.js","components/MultiCrops/MultiCrops.js","components/MultiCrops/utils.js","components/RegionSelector/RegionSelector.js","pages/Home/Home.js","App.js","index.js"],"names":["module","exports","canvasStyle","padding","Canvas","props","crop","canvasRef","img","callback","useRef","imgRef","current","useEffect","image","canvas","ctx","getContext","useCanvas","scaleX","naturalWidth","width","scaleY","naturalHeight","height","pixelRatio","window","devicePixelRatio","setTransform","imageSmoothingQuality","drawImage","x","y","ref","style","onClick","toBlob","blob","previewUrl","URL","createObjectURL","anchor","document","createElement","download","id","href","click","revokeObjectURL","generateDownload","NumberIcon","number","className","jsx","PropTypes","defaultProps","Crop","prevCoordinate","prevCoordinates","isLeftBtnActive","isRightBtnActive","actionTrigger","pointer","event","action","interactable","element","interaction","type","handleChange","e","index","coordinate","coordinates","onResize","onDrag","onRestore","onChange","dx","dy","nextCoordinate","rect","deltaRect","left","top","nextCoordinates","update","is","Function","includes","isChange","changeStartPosition","handleRestore","handleDelete","onDelete","remove","onContextMenu","preventDefault","stopPropagation","button","onMouseDown","onMouseUp","onKeyDown","code","console","log","onKeyUp","interact","this","draggable","modifiers","restrictRect","restriction","resizable","edges","right","bottom","on","actionChecker","nextProps","equals","unset","cropStyle","tabIndex","styles","ordN","ordNe","ordNw","ordS","ordSe","ordSw","ordE","ordW","map","Component","display","position","transform","boxSizing","cursor","border","borderImageSource","borderImageSlice","borderImageRepeat","msTouchAction","touchAction","userSelect","shape","isRequired","isValidPoint","assoc","shortid","generate","omit","point","strictNumber","both","Number","complement","NaN","MultiCrops","drawingIndex","pointA","mouseEnter","isEscBtnTarget","isDragResize","isLeftBtnTarget","E","D","renderCrops","addIndex","indexedMap","coor","getCursorPosition","container","getBoundingClientRect","touches","pageX","pageY","clientX","clientY","handleMouseDown","target","length","clone","outsideEvents","handleMouseUp","restoreCrops","removeEventListener","TARGET","THIS","handleMouseMove","onDraw","pointB","Math","min","abs","handleMouseLeave","addEventListener","handleMouseEnter","src","onLoad","onTouchStart","onTouchMove","onTouchEnd","onMouseMove","onMouseLeave","onMouseEnter","alt","string","arrayOf","func","canvasListStyle","flexFlow","alignItems","justifyAlign","justifyContent","overflow","backgroundColor","regionSelectorStyle","RegionSelector","useState","crops","setCrops","completedCrops","setCompletedCrops","useCallback","onComplete","i","Home","upImg","setUpImg","accept","files","reader","FileReader","result","readAsDataURL","App","basename","path","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.915ff135.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ordN\":\"Crop_ordN__F6Lkk\",\"ordNe\":\"Crop_ordNe__3yQCN\",\"ordNw\":\"Crop_ordNw__3FA7M\",\"ordS\":\"Crop_ordS__3XH0n\",\"ordSe\":\"Crop_ordSe__1UAa4\",\"ordSw\":\"Crop_ordSw__3NCyA\",\"ordE\":\"Crop_ordE__1HdlK\",\"ordW\":\"Crop_ordW__3q7pb\",\"ord-n\":\"Crop_ord-n__d_Xqz\",\"ord-e\":\"Crop_ord-e__177ep\",\"ord-s\":\"Crop_ord-s__2Z2QJ\",\"ord-w\":\"Crop_ord-w__87J-t\"};","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\nconst canvasStyle = {\r\n  padding: '10px',\r\n}\r\n\r\nfunction generateDownload(canvas, crop) {\r\n  if (!crop || !canvas) {\r\n    return;\r\n  }\r\n\r\n  canvas.toBlob(\r\n    (blob) => {\r\n      const previewUrl = window.URL.createObjectURL(blob);\r\n\r\n      const anchor = document.createElement('a');\r\n      anchor.download = `crop_${crop.id}.png`;\r\n      anchor.href = URL.createObjectURL(blob);\r\n      anchor.click();\r\n\r\n      window.URL.revokeObjectURL(previewUrl);\r\n    },\r\n    'image/png',\r\n    1\r\n  );\r\n}\r\n\r\nconst useCanvas = (props, callback) => {\r\n    const {crop, img} = props;\r\n\r\n    const canvasRef = useRef(null);\r\n    const imgRef = useRef(null);\r\n    imgRef.current = img;\r\n\r\n    useEffect(() => {\r\n        const image = imgRef.current;\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        callback([canvas, ctx, image]);\r\n    }, [crop]);\r\n\r\n    return canvasRef;\r\n}\r\n\r\nconst Canvas = (props) => {\r\n    const {crop, img} = props;\r\n\r\n    const canvasRef = useCanvas(props, ([canvas, ctx, image]) => {\r\n    const scaleX = image.naturalWidth / image.width;\r\n    const scaleY = image.naturalHeight / image.height;\r\n    const pixelRatio = window.devicePixelRatio;\r\n\r\n    canvas.width = crop.width * pixelRatio;\r\n    canvas.height = crop.height * pixelRatio;\r\n\r\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n    ctx.imageSmoothingQuality = 'high';\r\n\r\n    ctx.drawImage(\r\n      image,\r\n      crop.x * scaleX,\r\n      crop.y * scaleY,\r\n      crop.width * scaleX,\r\n      crop.height * scaleY,\r\n      0,\r\n      0,\r\n      crop.width,\r\n      crop.height\r\n    );\r\n  });\r\n\r\n  return (<canvas \r\n    ref={canvasRef} \r\n    style={canvasStyle}\r\n    onClick={() =>\r\n          generateDownload(canvasRef.current, crop)}\r\n/>);\r\n};\r\n\r\nexport default Canvas;\r\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\n\nexport const DeleteIcon = props => (\n  <div\n    className=\"rmc-icon-container\"\n    {...props}\n  >\n    <div className=\"rmc-remove\" />\n    <style jsx>{`\n      .rmc-icon-container {\n        width: 15px;\n        height: 15px;\n        cursor: pointer;\n        float: right;\n        background:#262626;\n        opacity: 0.8;\n      }\n      .rmc-remove {\n        color: white;\n        position: absolute;\n        margin-top: 6px;\n      }\n\n      .rmc-remove:hover {\n        cursor: pointer;\n      }\n\n      .rmc-remove:before {\n        content: '';\n        position: absolute;\n        width: 15px;\n        height: 1px;\n        background-color: currentColor;\n        -webkit-transform: rotate(45deg);\n                transform: rotate(45deg);\n      }\n\n      .rmc-remove:after {\n        content: '';\n        position: absolute;\n        width: 15px;\n        height: 1px;\n        background-color: currentColor;\n        -webkit-transform: rotate(-45deg);\n                transform: rotate(-45deg);\n      }\n    `}\n    </style>\n  </div>\n\n)\n\nexport const NumberIcon = ({ number }) => (\n  <div className=\"rmc-number\">\n    { number }\n    <style jsx>{`\n      .rmc-number {\n        width: 15px;\n        height: 15px;\n        float: left;\n        font-size: 12px;\n        text-align: center;\n        line-height: 15px;\n        color: white;\n        opacity: 0.8;\n      }\n    `}\n    {/* background:#262626; */}\n    </style>\n    \n        \n  </div>\n)\n\nconst { number } = PropTypes\n\nNumberIcon.propTypes = {\n  number,\n}\n\nNumberIcon.defaultProps = {\n  number: '',\n}\n\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { equals, is, update, remove } from 'ramda'\nimport interact from 'interactjs'\nimport { DeleteIcon, NumberIcon } from './Icons'\nimport styles from './Crop.module.scss'\n\nclass Crop extends Component {\n\n  static cropStyle = (coordinate) => {\n    const {\n      x, y, width, height,\n    } = coordinate\n\n    return {\n      display: 'inline-block',\n      position: 'absolute',\n      transform: 'translate3d(0, 0, 0)',\n      boxSizing: 'border-box',\n      cursor: 'move',\n      width,\n      height,\n      top: y,\n      left: x,\n      border: '1px solid',\n      borderImageSource: 'url(\"data:image/gif;base64,R0lGODlhCgAKAJECAAAAAP///////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI5RDc5MTFDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI5RDc5MTBDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoAAgAsAAAAAAoACgAAAhWEERkn7W3ei7KlagMWF/dKgYeyGAUAIfkEBQoAAgAsAAAAAAoACgAAAg+UYwLJ7RnQm7QmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYgLJHdiinNSAVfOEKoUCACH5BAUKAAIALAAAAAAKAAoAAAIRVISAdusPo3RAzYtjaMIaUQAAIfkEBQoAAgAsAAAAAAoACgAAAg+MDiem7Q8bSLFaG5il6xQAIfkEBQoAAgAsAAAAAAoACgAAAg+UYRLJ7QnQm7SmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYBLJDdiinNSEVfOEKoECACH5BAUKAAIALAAAAAAKAAoAAAIRFISBdusPo3RBzYsjaMIaUQAAOw==\")',\n      borderImageSlice: '1',\n      borderImageRepeat: 'repeat',\n      msTouchAction: 'none',\n      touchAction: 'none',\n      userSelect: 'none',\n    }\n  }\n\n  prevCoordinate = {};\n  prevCoordinates = [];\n\n  isLeftBtnActive = false;\n  isRightBtnActive = false;\n\n  componentDidMount() {\n    interact(this.crop)\n      .draggable({\n        modifiers: [\n          interact.modifiers.restrictRect({\n            restriction: 'parent'\n          })\n        ],\n      })\n      .resizable({\n        edges: {\n          left: true, right: true, bottom: true, top: true,\n        },\n        modifiers: [\n          interact.modifiers.restrictRect({\n            restriction: 'parent'\n          })\n        ],\n      })\n      .on(['dragstart', 'resizestart'], this.changeStartPosition)\n      .on(['dragmove', 'dragend', 'resizemove', 'resizeend'], this.handleChange)\n      .actionChecker(this.actionTrigger)\n  }\n  shouldComponentUpdate(nextProps) {\n    return !equals(nextProps.coordinate, this.props.coordinate)\n      || (nextProps.index !== this.props.index)\n  }\n\n  actionTrigger = (pointer, event, action, interactable, element, interaction) => {\n    \n    \n    if (event.type === 'pointermove') {\n    }\n\n    if (event.type === 'pointerdown') {\n      \n    }\n\n\n    return action\n  }\n\n  handleChange = (e) => {\n    const {\n      index,\n      coordinate,\n      coordinate: { x, y },\n      coordinates,\n      onResize,\n      onRestore,\n      onDrag,\n      onChange,\n    } = this.props\n\n    \n    const { dx, dy } = e\n\n    let nextCoordinate = {};\n\n    if (e.type === 'resizemove') {\n      const { width, height } = e.rect\n      const { left, top } = e.deltaRect\n      nextCoordinate = {...coordinate, x: x + left, y: y + top, width, height,}\n    }\n\n    if (e.type === 'dragmove') {\n      nextCoordinate = { ...coordinate, x: x + dx, y: y + dy }\n    }\n    const nextCoordinates = update(index, nextCoordinate)(coordinates)\n\n      if (is(Function, onResize) && e.type === 'resizemove') {\n          onResize(nextCoordinate, index, nextCoordinates)\n      }\n      if (is(Function, onChange) && ['dragmove', 'resizemove'].includes(e.type)) {\n        onChange(nextCoordinate, index, nextCoordinates)\n      }\n      if (is(Function, onDrag)  && e.type === 'dragmove') {\n        onDrag(nextCoordinate, index, nextCoordinates)\n      }\n\n      if (['dragend', 'resizeend'].includes(e.type)) {\n        this.props.isChange(e);\n      }\n      \n      \n  }\n\n\n   changeStartPosition = (e) => {\n\n    const {\n      index,\n      coordinate,\n      coordinates,\n    } = this.props\n    \n    if (['dragstart', 'resizestart'].includes(e.type)) {\n      this.prevCoordinate = { ...coordinate}\n      this.prevCoordinates = [...coordinates]\n      this.prevCoordinates = update(index, this.prevCoordinate, coordinates)\n    }\n\n    if (['dragstart', 'resizestart'].includes(e.type)) {\n        this.props.isChange(e);\n    }\n    \n  }\n\n  handleRestore = (e) => {\n    const {\n      index,\n      onRestore,\n    } = this.props\n\n    if (is(Function, onRestore)) {\n      onRestore(this.prevCoordinate, index, this.prevCoordinates)\n    }\n  }\n\n  handleDelete = (e) => {\n    const {\n      index,\n      coordinate,\n      onDelete,\n      coordinates,\n    } = this.props\n    const nextCoordinates = remove(index, 1)(coordinates)\n    if (is(Function, onDelete)) {\n      onDelete(coordinate, index, nextCoordinates)\n    }\n  }\n\n  onContextMenu = (e) => {\n    e.preventDefault();\n    e.stopPropagation(); \n    if (e.button === 2) {\n\n      if (this.isLeftBtnActive === false) {\n        this.handleDelete();  \n      }\n      if (this.isLeftBtnActive === true) {\n        this.handleRestore();\n        this.isLeftBtnActive = false;\n      }  \n      \n    }\n    return\n  }\n\n  onMouseDown = (e) => {\n    if (e.button === 0) {\n      this.isLeftBtnActive = true;\n    }\n    if (e.button === 2) {\n      this.isRightBtnActive = true;\n    } \n  }\n\n  onMouseUp = (e) => {\n    if (e.button === 0) {\n      this.isLeftBtnActive = false;\n    }\n    if (e.button === 2) {\n      this.isRightBtnActive = false;\n    }\n  }\n\n  onKeyDown = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.code === \"Escape\") {\n      console.log('Escape');\n      this.handleRestore();\n        this.isLeftBtnActive = false;\n    } \n  }\n\n  onKeyUp = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  componentWillUnmount() {\n    interact(this.crop)\n      .unset()\n  }\n\n  \n  render() {\n    const { coordinate, index, } = this.props\n    return (\n      <div\n        onMouseDown={this.onMouseDown}\n        onMouseUp={this.onMouseUp}\n        onContextMenu={this.onContextMenu}\n        style={Crop.cropStyle(coordinate)}\n        ref={crop => this.crop = crop}\n        onKeyDown={this.onKeyDown}\n        onKeyUp={this.onKeyUp}\n        tabIndex='0'\n      >\n        <NumberIcon number={index + 1} />\n        {/* <DeleteIcon\n          onClick={this.handleDelete}\n        /> */}\n        {\n          [styles.ordN, styles.ordNe, styles.ordNw, styles.ordS, styles.ordSe, styles.ordSw, styles.ordE, styles.ordW]\n          .map(\n            (style, id)=> <div className={style} key={id} />\n          )\n        }\n      </div>\n    )\n  }\n}\n\n\nexport const coordinateType = PropTypes.shape({\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n})\n\nCrop.propTypes = {\n  coordinate: coordinateType.isRequired,\n  index: PropTypes.number.isRequired,\n  onResize: PropTypes.func, // eslint-disable-line\n  onDrag: PropTypes.func, // eslint-disable-line\n  onDelete: PropTypes.func, // eslint-disable-line\n  onChange: PropTypes.func, // eslint-disable-line\n  onComplete: PropTypes.func, // eslint-disable-line\n  onRestore: PropTypes.func, // eslint-disable-line\n  coordinates: PropTypes.array, // eslint-disable-line\n  isChange: PropTypes.func, // eslint-disable-line\n}\n\nexport default Crop\n","import React, { Component } from 'react'\nimport { both, clone, is, complement, equals, map, addIndex } from 'ramda'\nimport PropTypes from 'prop-types'\nimport shortid from 'shortid'\nimport Crop, { coordinateType } from './Crop/Crop'\n\n\nconst isValidPoint = (point = {}) => {\n  const strictNumber = number => both(\n    is(Number),\n    complement(equals(NaN)),\n  )(number)\n  return strictNumber(point.x) && strictNumber(point.y)\n}\n\n\nclass MultiCrops extends Component {\n  drawingIndex = -1\n\n  pointA = {}\n\n  id = shortid.generate()\n\n  prevCoordinate = {};\n  prevCoordinates = [];\n\n  mouseEnter=true;\n  isEscBtnTarget = false;\n  isDragResize = false;\n  isLeftBtnTarget = false;\n\n  isChange =(e)=>{\n    if (['dragstart', 'resizestart'].includes(e.type)) {\n        this.isDragResize = true;\n        console.log({E:e.type, D:this.isDragResize});\n    }\n    if (['dragend', 'resizeend'].includes(e.type)) {\n        this.isDragResize = false;\n        console.log({E:e.type, D:this.isDragResize});\n    }\n  }\n\n  renderCrops = (props) => {\n    const indexedMap = addIndex(map)\n    return indexedMap((coor, index) =>\n      (<Crop\n        // improve performance when delet crop in middle array\n        key={coor.id || index}\n        index={index}\n        coordinate={coor}\n        isChange={(e)=>{this.isChange(e)}}\n        {...props}\n      />))(props.coordinates)\n  }\n\n  \n\n  getCursorPosition = (e) => {\n    const { left, top } = this.container.getBoundingClientRect()\n    if (e.type === 'touchstart' || e.type === 'touchmove') {\n      return {\n        x: e.touches[0].pageX - left,\n        y: e.touches[0].pageY - top,\n      }\n    }\n    if (e.type === 'mousedown' || e.type === 'mousemove') {\n      return {\n      x: e.clientX - left,\n      y: e.clientY - top,\n      }\n    }\n    \n  }\n\n  handleMouseDown = (e) => {\n    const { coordinates } = this.props\n    this.isDragResize = false;\n    if (e.button === 0 || e.type === 'touchstart') {\n      this.isLeftBtnTarget = true;\n      console.log(this.isDragResize);\n      if (e.target === this.img || e.target === this.container) {\n        const { x, y } = this.getCursorPosition(e);\n        this.drawingIndex = coordinates.length;\n        this.pointA = { x, y };\n        this.id = shortid.generate();\n        this.isLeftBtnTarget = true;\n        this.prevCoordinate = {};\n        this.prevCoordinates = clone(coordinates);\n        this.isEscBtnTarget = false;\n        \n      }\n    }\n  }\n\n  outsideEvents = (e) => {\n    \n    const { onRestore, coordinates, coordinate } = this.props\n    if (e.button === 0) {\n      if (this.isEscBtnTarget !== true) {\n        this.isEscBtnTarget = false;\n        if (is(Function, onRestore)) {\n          onRestore(coordinate, this.drawingIndex, coordinates)\n        }\n        this.handleMouseUp(e);\n      }\n      if(this.isEscBtnTarget === true && e.target !== this.container){\n        this.restoreCrops(e);\n        this.isEscBtnTarget = false;\n      }\n      document.removeEventListener('mouseup', this.outsideEvents, true)\n      document.removeEventListener('keyup', this.outsideEvents, true)\n      document.removeEventListener('contextmenu', this.outsideEvents, true)\n    }\n    \n    if (e.code === \"Escape\") {\n      \n      this.isEscBtnTarget = true;\n     \n    }\n    \n    if (e.button === 2 ) {\n      console.log(e.code)\n      e.preventDefault();\n      e.stopPropagation();\n      console.log({E:e, TARGET:e.target, THIS:this.container})\n      if(e.target !== this.container){\n        \n        this.restoreCrops(e);\n      }\n      document.removeEventListener('mouseup', this.outsideEvents, true)\n      document.removeEventListener('keyup', this.outsideEvents, true)\n      document.removeEventListener('contextmenu', this.outsideEvents, true)\n    }\n    \n    this.isLeftBtnTarget = false;\n  }\n\n  handleMouseMove = (e) => {\n    if ((e.button === 0 || e.type === 'touchmove' ) && e.target === this.img) {\n    const { onDraw, onChange, coordinates } = this.props\n    const { pointA } = this\n    if (isValidPoint(pointA)) {\n      const pointB = this.getCursorPosition(e)\n\n      // get the drawing coordinate\n      const coordinate = {\n        x: Math.min(pointA.x, pointB.x),\n        y: Math.min(pointA.y, pointB.y),\n        width: Math.abs(pointA.x - pointB.x),\n        height: Math.abs(pointA.y - pointB.y),\n        id: this.id,\n      }\n      const nextCoordinates = clone(coordinates)\n      nextCoordinates[this.drawingIndex] = coordinate\n      if (is(Function, onDraw)) {\n        onDraw(coordinate, this.drawingIndex, nextCoordinates)\n      }\n      if (is(Function, onChange)) {\n        onChange(coordinate, this.drawingIndex, nextCoordinates)\n      }\n\n    }\n    }\n  }\n\n  restoreCrops = (e) => {\n\n    \n    const { onDraw, onChange, onRestore } = this.props\n\n      \n    if (is(Function, onRestore)) {\n      onRestore(this.prevCoordinate, this.drawingIndex-1, this.prevCoordinates)\n    }\n\n    this.pointA = {};\n    this.isLeftBtnTarget = false;\n    this.isLeftBtnTarget = false;\n    this.isEscBtnTarget = false;\n  }\n\n\n  handleMouseUp = (e) => {\n\n    const { onDraw, onChange } = this.props\n\n    this.pointA = {};\n    this.isLeftBtnTarget = false;\n    this.isEscBtnTarget = false;\n    \n  }\n\n  handleMouseLeave = () => {\n    console.log(this.isDragResize);\n    if (this.isDragResize === false && this.isLeftBtnTarget === true) {\n      \n      console.log(this.isDragResize);\n      document.addEventListener('mouseup', this.outsideEvents, true)\n      document.addEventListener('keydown', this.outsideEvents, true)\n      document.addEventListener('contextmenu', this.outsideEvents, true)\n    }\n  } \n\n  handleMouseEnter = () => {\n      document.removeEventListener('mouseup', this.outsideEvents, true)\n      document.removeEventListener('keydown', this.outsideEvents, true)\n      document.removeEventListener('contextmenu', this.outsideEvents, true)\n  } \n\n\n   onKeyDown = (e) => {\n   if (e.code === \"Escape\") {\n      this.isEscBtnTarget = true;\n    } \n  }\n\n  onContextMenu = (e) => {\n    e.preventDefault();\n    e.stopPropagation(); \n  }\n\n  render() {\n    const {\n      src, width, height, onLoad,\n    } = this.props\n    return (\n      <div\n        style={{\n          display: 'inline-block',\n          position: 'relative',\n          msTouchAction: 'none',\n          touchAction: 'none',\n          userSelect: 'none',\n        }}\n        onTouchStart={this.handleMouseDown}\n        onTouchMove={this.handleMouseMove}\n        onTouchEnd={(e)=>{!this.isEscBtnTarget ? this.handleMouseUp(e) : this.restoreCrops(e)}}\n        onMouseDown={this.handleMouseDown}\n        onMouseMove={this.handleMouseMove}\n        onMouseLeave={this.handleMouseLeave}\n        onMouseEnter={this.handleMouseEnter}\n        onKeyDown={this.onKeyDown}\n        onContextMenu={this.isLeftBtnTarget ? this.onContextMenu : null}\n        onMouseUp={(e)=>{!this.isEscBtnTarget ? this.handleMouseUp(e) : this.restoreCrops(e)}}\n        ref={container => this.container = container}\n        tabIndex=\"0\"\n      >\n        <img\n          ref={img => this.img = img}\n          src={src}\n          width={width}\n          height={height}\n          onLoad={onLoad}\n          alt=\"\"\n          draggable={false}\n        />\n        {this.renderCrops(this.props)}\n\n      </div>\n    )\n  }\n}\n\nconst {\n  string, arrayOf, number, func,\n} = PropTypes\n\nMultiCrops.propTypes = {\n  coordinates: arrayOf(coordinateType),\n  src: string,\n  width: number, // eslint-disable-line\n  height: number, // eslint-disable-line\n  onDraw: func, // eslint-disable-line\n  onChange: func, // eslint-disable-line\n  onComplete: func, // eslint-disable-line\n  onRestore: func, // eslint-disable-line\n  onLoad: func, // eslint-disable-line\n}\n\nMultiCrops.defaultProps = {\n  coordinates: [],\n  src: '',\n}\n\nexport { removeid, addid } from './utils'\nexport default MultiCrops\n\n","import shortid from 'shortid'\nimport { map, assoc, omit } from 'ramda'\n\nexport const addid = map(assoc('id', shortid.generate()))\n\nexport const removeid = map(omit(['id']))\n","import Canvas from './../Canvas/Canvas';\r\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport MultiCrops from './../MultiCrops/MultiCrops';\r\n\r\n\r\n\r\nconst canvasListStyle = {\r\n  display: 'flex',\r\n  flexFlow: 'row wrap', \r\n  alignItems: 'start',\r\n  justifyAlign: 'start',\r\n  justifyContent: 'start',\r\n  width: 'inherit',\r\n  height: '300px',\r\n  overflow: 'auto',\r\n  backgroundColor: 'lightgrey',\r\n}\r\n\r\nconst regionSelectorStyle = {\r\n  width: '600px',\r\n  height: '70vh',\r\n  backgroundColor: 'lightgrey',\r\n  msTouchAction: 'none',\r\n  touchAction: 'none',\r\n  userSelect: 'none'\r\n}\r\n\r\nconst RegionSelector = (props) => {\r\n\r\n  const {src} = props;\r\n\r\n  const [crops, setCrops] = useState([]);\r\n  const [completedCrops, setCompletedCrops] = useState([]);\r\n  const imgRef = useRef(null);\r\n\r\n  const onLoad = useCallback((img) => {\r\n    setCrops([]);\r\n    setCompletedCrops([]);\r\n    imgRef.current = img.target;\r\n  }, []);\r\n\r\n  const onChange = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n  }, []);\r\n\r\n  const onDelete = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n    setCompletedCrops(crops);\r\n  }, []);\r\n\r\n  const onRestore = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n    setCompletedCrops(crops);\r\n  }, []);\r\n\r\n  const onComplete = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n    setCompletedCrops(crops);\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <div \r\n      style={regionSelectorStyle} \r\n      onTouchEnd={(e)=>{setCompletedCrops(crops)}}\r\n      onClick={(e)=>{if (e.button === 0){setCompletedCrops(crops)}}}\r\n    >\r\n      <MultiCrops\r\n        src={src}\r\n        width={'600'}\r\n        coordinates={crops}\r\n        onChange={onChange}\r\n        onDelete={onDelete}\r\n        onRestore={onRestore}\r\n        onComplete={onComplete}\r\n        onLoad={onLoad}\r\n        \r\n      />\r\n      <div style={canvasListStyle}>\r\n        {completedCrops.map( (crop, i) =>\r\n          <Canvas\r\n            index={crop.id || i}\r\n            key={crop.id || i}\r\n            crop={crop}\r\n            img={imgRef.current}\r\n          />\r\n          )\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RegionSelector;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport RegionSelector from '../../components/RegionSelector/RegionSelector';\r\n\r\nconst Home = () => {\r\n\r\n  const [upImg, setUpImg] = useState();\r\n\r\n\r\n  const onSelectFile = (e) => {\r\n  if (e.target.files && e.target.files.length > 0) {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => setUpImg(reader.result));\r\n    reader.readAsDataURL(e.target.files[0]);\r\n  }\r\n  };\r\n\r\n  return (\r\n    <div style = {{\r\n      position: 'absolute',\r\n      top: '10%',\r\n      left: '50%',\r\n      transform: 'translate(-50%, -10%)', \r\n      display: 'flex',\r\n      flexFlow: 'column', \r\n      alignItems: 'center',\r\n      justifyAlign: 'center',\r\n      justifyContent: 'space-evenly',\r\n      height: '100vh',\r\n    }}>\r\n      <div>\r\n        <input type=\"file\" accept=\"image/*\" onChange={onSelectFile} />\r\n      </div>\r\n      <RegionSelector src={upImg}  />\r\n      <div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;","import {BrowserRouter, Route, Switch} from 'react-router-dom';\nimport logo from './logo.svg';\nimport './App.css';\nimport Home from './pages/Home/Home';\n\nfunction App() {\n  return (\n    <BrowserRouter basename=\"/\">\n        <Switch>\n            <Route path=\"/\" component={Home}/>\n        </Switch>\n      </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// serviceWorker.unregister();\n"],"sourceRoot":""}