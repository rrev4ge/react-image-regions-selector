{"version":3,"sources":["components/RegionSelector/RegionSelector.module.scss","logo.svg","components/RegionSelector/MultiCrops/Crop/CropIcons.jsx","components/RegionSelector/MultiCrops/Crop/Crop.jsx","components/RegionSelector/MultiCrops/MultiCrops.jsx","components/RegionSelector/MultiCrops/utils.js","components/RegionSelector/Canvas/Canvas.jsx","components/RegionSelector/RegionSelector.jsx","pages/Home/Home.js","App.js","index.js","components/RegionSelector/MultiCrops/Crop/Crop.module.scss"],"names":["module","exports","DeleteIcon","props","className","styles","rmcIconContainer","rmcRemove","NumberIcon","number","numberIcon","CropContent","content","cropContent","PropTypes","string","defaultProps","Crop","cropStyle","coordinate","x","y","display","position","transform","boxSizing","cursor","width","height","top","left","border","borderImageSource","borderImageSlice","borderImageRepeat","msTouchAction","touchAction","userSelect","background","opacity","prevCoordinate","prevCoordinates","isLeftBtnActive","isRightBtnActive","actionTrigger","pointer","event","action","interactable","element","interaction","type","handleChange","e","index","coordinates","onResize","onDrag","onChange","dx","dy","nextCoordinate","rect","deltaRect","nextCoordinates","update","is","Function","includes","isChange","document","removeEventListener","onContextMenu","changeStartPosition","addEventListener","handleRestore","onRestore","handleDelete","onDelete","remove","preventDefault","stopPropagation","button","onMouseDown","onMouseUp","outsideEvents","onKeyDown","code","onKeyUp","interact","this","crop","draggable","modifiers","restrictRect","restriction","resizable","edges","right","bottom","restrict","restrictSize","min","max","parentImg","on","actionChecker","nextProps","equals","unset","deleteIcon","style","ref","tabIndex","onClick","ordN","ordNe","ordNw","ordS","ordSe","ordSw","ordE","ordW","map","id","Component","shape","isRequired","bool","func","array","object","isValidPoint","assoc","uuidv4","omit","point","strictNumber","both","Number","complement","NaN","MultiCrops","drawingIndex","pointA","isEscBtnTarget","isDragResize","isLeftBtnTarget","mouseLeave","renderCrops","addIndex","indexedMap","coor","img","getCursorPosition","container","getBoundingClientRect","touches","pageX","pageY","clientX","clientY","handleMouseDown","maxCrops","length","target","clone","handleMouseUp","restoreCrops","handleMouseMove","onDraw","offsetParent","pointB","Math","abs","handleMouseLeave","handleMouseEnter","src","onLoad","onTouchStart","onTouchMove","onTouchEnd","onMouseMove","onMouseLeave","onMouseEnter","alt","onDragStart","arrayOf","Infinity","Canvas","useState","isHover","setIsHover","canvasRef","callback","useRef","imgRef","current","useEffect","image","canvas","ctx","getContext","useCanvas","scaleX","naturalWidth","scaleY","naturalHeight","pixelRatio","window","devicePixelRatio","setTransform","imageSmoothingQuality","drawImage","color","borderRadius","padding","toBlob","blob","previewUrl","URL","createObjectURL","anchor","createElement","download","href","click","revokeObjectURL","generateDownload","RegionSelector","setCompletedCrops","completedCrops","isProportions","isShowCanvas","crops","setCrops","setCanvas","didMount","setDidMount","completed","calcProportions","calcPosition","parseInt","toFixed","useCallback","onComplete","regionSelector","multiCrops","cropsList","i","setCanvasImg","Home","upImg","setUpImg","alignItems","justifyContent","alignContent","flexDirection","gap","accept","files","reader","FileReader","result","readAsDataURL","App","basename","path","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a381dd44.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"regionSelector\":\"RegionSelector_regionSelector__1S7FS\",\"multiCrops\":\"RegionSelector_multiCrops__1T105\",\"cropsList\":\"RegionSelector_cropsList__2dz-j\"};","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styles from './Crop.module.scss'\r\n\r\nexport const DeleteIcon = (props) => (\r\n  <div\r\n    className={styles.rmcIconContainer}\r\n    {...props}\r\n  >\r\n    <div className={styles.rmcRemove} />\r\n  </div>\r\n\r\n)\r\n\r\nexport const NumberIcon = ({ number }) => (\r\n  <div className={styles.numberIcon}>\r\n      { number }\r\n  </div>\r\n)\r\n\r\nexport const CropContent = ({ content }) => (\r\n    <div className={styles.cropContent}>\r\n      { content }\r\n    </div>\r\n)\r\n\r\nconst { number, string } = PropTypes\r\n\r\nNumberIcon.propTypes = {\r\n  number: PropTypes.oneOfType([number, string]),\r\n}\r\n\r\nNumberIcon.defaultProps = {\r\n  number: '',\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { equals, is, update, remove } from 'ramda'\r\nimport interact from 'interactjs'\r\nimport {NumberIcon, DeleteIcon, CropContent} from './CropIcons'\r\nimport styles from './Crop.module.scss'\r\n\r\nclass Crop extends Component {\r\n\r\n  cropStyle = (coordinate) => {\r\n    // const { styles } = this.props\r\n    const {\r\n      x, y, width, height,\r\n    } = coordinate;\r\n\r\n    return {\r\n      display: 'inline-block',\r\n      position: 'absolute',\r\n      transform: 'translate3d(0, 0, 0)',\r\n      boxSizing: 'border-box',\r\n      cursor: 'move',\r\n      width: width,\r\n      height: height,\r\n      top: y,\r\n      left: x,\r\n      border: '1px solid',\r\n      borderImageSource: 'url(\"data:image/gif;base64,R0lGODlhCgAKAJECAAAAAP///////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI5RDc5MTFDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI5RDc5MTBDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoAAgAsAAAAAAoACgAAAhWEERkn7W3ei7KlagMWF/dKgYeyGAUAIfkEBQoAAgAsAAAAAAoACgAAAg+UYwLJ7RnQm7QmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYgLJHdiinNSAVfOEKoUCACH5BAUKAAIALAAAAAAKAAoAAAIRVISAdusPo3RAzYtjaMIaUQAAIfkEBQoAAgAsAAAAAAoACgAAAg+MDiem7Q8bSLFaG5il6xQAIfkEBQoAAgAsAAAAAAoACgAAAg+UYRLJ7QnQm7SmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYBLJDdiinNSEVfOEKoECACH5BAUKAAIALAAAAAAKAAoAAAIRFISBdusPo3RBzYsjaMIaUQAAOw==\")',\r\n      borderImageSlice: '1',\r\n      borderImageRepeat: 'repeat',\r\n      msTouchAction: 'none',\r\n      touchAction: 'none',\r\n      userSelect: 'none',\r\n      background: \"#262626\",\r\n      opacity: 0.5,\r\n      // ...styles,\r\n    }\r\n  }\r\n\r\n  prevCoordinate = {};\r\n  prevCoordinates = [];\r\n\r\n  isLeftBtnActive = false;\r\n  isRightBtnActive = false;\r\n\r\n  componentDidMount() {\r\n    interact(this.crop)\r\n      .draggable({\r\n        modifiers: [\r\n          interact.modifiers.restrictRect({\r\n            restriction: 'parent',\r\n          })\r\n        ],\r\n      })\r\n      .resizable({\r\n        edges: {\r\n          left: true, right: true, bottom: true, top: true,\r\n        },\r\n        modifiers: [\r\n          interact.modifiers.restrict({\r\n            restriction: 'parent',\r\n          }),\r\n          interact.modifiers.restrictSize({\r\n            min: { width: 1, height: 1 },\r\n            max: { width: this.props.parentImg?.width, height: this.props.parentImg?.height }\r\n          })\r\n        ],\r\n      })\r\n      .on(['dragstart', 'resizestart'], this.changeStartPosition)\r\n      .on(['dragmove', 'dragend', 'resizemove', 'resizeend'], this.handleChange)\r\n      .actionChecker(this.actionTrigger)\r\n  };\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    return !equals(nextProps.coordinate, this.props.coordinate)\r\n      || (nextProps.index !== this.props.index);\r\n  };\r\n\r\n  actionTrigger = (pointer, event, action, interactable, element, interaction) => {\r\n    \r\n    if (event.type === 'pointermove') {\r\n\r\n    }\r\n\r\n    if (event.type === 'pointerdown') {\r\n      \r\n    }\r\n\r\n    return action;\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    const {\r\n      index,\r\n      coordinate,\r\n      coordinate: { x, y },\r\n      coordinates,\r\n      onResize,\r\n      onDrag,\r\n      onChange,\r\n    } = this.props;\r\n    \r\n    const { dx, dy } = e;\r\n\r\n    let nextCoordinate = {};\r\n\r\n    if (e.type === 'resizemove') {\r\n      const { width, height } = e.rect;\r\n      const { left, top } = e.deltaRect;\r\n      nextCoordinate = {...coordinate, x: x + left, y: y + top, width, height};\r\n    }\r\n\r\n    if (e.type === 'dragmove') {\r\n      nextCoordinate = { ...coordinate, x: x + dx, y: y + dy };\r\n    }\r\n    const nextCoordinates = update(index, nextCoordinate)(coordinates);\r\n\r\n      if (is(Function, onResize) && e.type === 'resizemove') {\r\n        onResize(nextCoordinate, index, nextCoordinates)\r\n      }\r\n      if (is(Function, onChange) && ['dragmove', 'resizemove'].includes(e.type)) {\r\n        onChange(nextCoordinate, index, nextCoordinates)\r\n      }\r\n      if (is(Function, onDrag)  && e.type === 'dragmove') {\r\n        onDrag(nextCoordinate, index, nextCoordinates)\r\n      }\r\n      if (['dragend', 'resizeend'].includes(e.type)) {\r\n        this.props.isChange(e);\r\n        document.removeEventListener('contextmenu', this.onContextMenu, false);\r\n      }\r\n  }\r\n\r\n\r\n   changeStartPosition = (e) => {\r\n\r\n    const {\r\n      index,\r\n      coordinate,\r\n      coordinates,\r\n    } = this.props\r\n    \r\n    if (['dragstart', 'resizestart'].includes(e.type)) {\r\n      document.addEventListener('contextmenu', this.onContextMenu, false);\r\n      this.prevCoordinate = { ...coordinate};\r\n      this.prevCoordinates = [...coordinates];\r\n      this.prevCoordinates = update(index, this.prevCoordinate, coordinates);\r\n      this.props.isChange(e);\r\n    }\r\n    \r\n  }\r\n\r\n  handleRestore = (e) => {\r\n    const {\r\n      index,\r\n      onRestore,\r\n    } = this.props;\r\n\r\n    if (is(Function, onRestore)) {\r\n      onRestore(this.prevCoordinate, index, this.prevCoordinates);\r\n    }\r\n  }\r\n\r\n  handleDelete = (e) => {\r\n    const {\r\n      index,\r\n      coordinate,\r\n      onDelete,\r\n      coordinates,\r\n    } = this.props;\r\n    const nextCoordinates = remove(index, 1)(coordinates)\r\n    if (is(Function, onDelete)) {\r\n      onDelete(coordinate, index, nextCoordinates)\r\n    }\r\n  }\r\n\r\n  onContextMenu = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation(); \r\n    if (e.button === 2) {\r\n\r\n      if (this.isLeftBtnActive === false) {\r\n        this.handleDelete();  \r\n      }\r\n      if (this.isLeftBtnActive === true) {\r\n        this.handleRestore();\r\n        this.isLeftBtnActive = false;\r\n      }\r\n      \r\n    }\r\n    return false;\r\n  }\r\n\r\n  onMouseDown = (e) => {\r\n    if (e.button === 0) {\r\n      \r\n      // document.addEventListener('mouseup', this.outsideEvents, false)\r\n      // document.addEventListener('keydown', this.outsideEvents, false)\r\n      this.isLeftBtnActive = true;\r\n    }\r\n    if (e.button === 2) {\r\n      this.isRightBtnActive = true;\r\n    }\r\n  }\r\n\r\n  onMouseUp = (e) => {\r\n    if (e.button === 0) {\r\n      document.removeEventListener('mouseup', this.outsideEvents, false);\r\n      document.removeEventListener('keydown', this.outsideEvents, false);\r\n      document.removeEventListener('contextmenu', this.onContextMenu, false);\r\n      this.isLeftBtnActive = false;\r\n    }\r\n    if (e.button === 2) {\r\n      this.isRightBtnActive = false;\r\n    }\r\n  }\r\n\r\n  onKeyDown = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (e.code === \"Escape\") {\r\n      this.handleRestore();\r\n        this.isLeftBtnActive = false;\r\n    } \r\n  }\r\n\r\n  onKeyUp = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    interact(this.crop).unset();\r\n  }\r\n\r\n  \r\n  render() {\r\n    const { coordinate, index, numberIcon, cropContent, deleteIcon } = this.props;\r\n    return (\r\n        <div\r\n            onMouseDown={this.onMouseDown}\r\n            onMouseUp={this.onMouseUp}\r\n            onContextMenu={this.onContextMenu}\r\n            style={this.cropStyle(coordinate)}\r\n            ref={(crop) => (this.crop = crop)}\r\n            onKeyDown={this.onKeyDown}\r\n            onKeyUp={this.onKeyUp}\r\n            tabIndex=\"0\"\r\n        >\r\n          {/*<div>*/}\r\n            {numberIcon && <NumberIcon number={index + 1} />}\r\n            {deleteIcon && <DeleteIcon onClick={this.handleDelete} />}\r\n            {cropContent && <CropContent content={coordinate?.content} />}\r\n          {/*</div>*/}\r\n            {[\r\n                styles.ordN,\r\n                styles.ordNe,\r\n                styles.ordNw,\r\n                styles.ordS,\r\n                styles.ordSe,\r\n                styles.ordSw,\r\n                styles.ordE,\r\n                styles.ordW,\r\n            ].map((style, id) => (\r\n                <div className={style} key={id} />\r\n            ))}\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport const coordinateType = PropTypes.shape({\r\n  x: PropTypes.number.isRequired,\r\n  y: PropTypes.number.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n})\r\n\r\nconst { number, string, bool, func, array, object } = PropTypes\r\n\r\nCrop.propTypes = {\r\n  coordinate: coordinateType.isRequired,\r\n  cropContent: bool,\r\n  deleteIcon: bool,\r\n  numberIcon: bool,\r\n  index: PropTypes.oneOfType([number, string]).isRequired,\r\n  onResize: func,\r\n  onDrag: func,\r\n  onDelete: func,\r\n  onChange: func,\r\n  onComplete: func,\r\n  onRestore: func,\r\n  coordinates: array,\r\n  isChange: func,\r\n  styles: object,\r\n}\r\n\r\nCrop.defaultProps = {\r\n  styles: {},\r\n  cropContent: false,\r\n  deleteIcon: true,\r\n  numberIcon: true,\r\n}\r\n\r\nexport default Crop\r\n","import React, { Component } from 'react'\r\nimport { both, clone, is, complement, equals, map, addIndex } from 'ramda'\r\nimport PropTypes from 'prop-types'\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport Crop, { coordinateType } from './Crop/Crop'\r\n\r\n\r\nconst isValidPoint = (point = {}) => {\r\n  const strictNumber = number => both(\r\n    is(Number),\r\n    complement(equals(NaN)),\r\n  )(number)\r\n  return strictNumber(point.x) && strictNumber(point.y)\r\n}\r\n\r\n\r\nclass MultiCrops extends Component {\r\n  drawingIndex = -1;\r\n\r\n  pointA = {};\r\n  id = uuidv4();\r\n\r\n  prevCoordinate = {};\r\n  prevCoordinates = [];\r\n\r\n  isEscBtnTarget = false;\r\n  isDragResize = false;\r\n  isLeftBtnTarget = false;\r\n  mouseLeave = false;\r\n\r\n  isChange =(e)=>{\r\n    if (['dragstart', 'resizestart'].includes(e.type)) {\r\n        this.isDragResize = true;\r\n    }\r\n\r\n    if (['dragend', 'resizeend'].includes(e.type)) {\r\n        this.isDragResize = false;\r\n    }\r\n  }\r\n\r\n  renderCrops = (props) => {\r\n    const indexedMap = addIndex(map)\r\n    return indexedMap((coor, index) =>\r\n    {\r\n      return (<Crop\r\n        // improve performance when delet crop in middle array\r\n        key={coor.id || index}\r\n        index={index}\r\n        coordinate={coor}\r\n        isChange={(e)=>{this.isChange(e)}}\r\n        parentImg={this.img}\r\n        {...props}\r\n      />)})(props.coordinates)\r\n  }\r\n\r\n  \r\n\r\n  getCursorPosition = (e) => {\r\n    const { left, top } = this.container.getBoundingClientRect();\r\n    // console.log({left, top, e})\r\n    if (e.type === 'touchstart' || e.type === 'touchmove') {\r\n      return {\r\n        x: e.touches[0].pageX - left,\r\n        y: e.touches[0].pageY - top,\r\n      }\r\n    }\r\n    if (e.type === 'mousedown' || e.type === 'mousemove') {\r\n      return {\r\n      x: e.clientX - left,\r\n      y: e.clientY - top,\r\n      }\r\n    }\r\n    \r\n  }\r\n\r\n  handleMouseDown = (e) => {\r\n    document.removeEventListener('mouseup', this.outsideEvents, false)\r\n    document.removeEventListener('keydown', this.outsideEvents, false)\r\n    document.removeEventListener('contextmenu', this.onContextMenu, false)\r\n    this.isDragResize = false;\r\n    const { coordinates, maxCrops } = this.props\r\n    if ((coordinates.length <= maxCrops) && (e.button === 0 || e.type === 'touchstart')) {\r\n      this.isLeftBtnTarget = true;\r\n      if (e.target === this.img || e.target === this.container) {\r\n        const { x, y } = this.getCursorPosition(e);\r\n        this.drawingIndex = coordinates.length;\r\n        this.pointA = { x, y };\r\n        this.id = uuidv4();\r\n        this.isLeftBtnTarget = true;\r\n        this.prevCoordinate = {};\r\n        this.prevCoordinates = clone(coordinates);\r\n        this.isEscBtnTarget = false;\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  outsideEvents = (e) => {\r\n    \r\n    const { onRestore, coordinates, coordinate } = this.props\r\n    if (e.button === 0) {\r\n      \r\n      if (this.isEscBtnTarget === false) {\r\n        if (is(Function, onRestore)) {\r\n          onRestore(coordinate, this.drawingIndex, coordinates)\r\n        }\r\n        this.handleMouseUp(e);\r\n      }\r\n      if(this.isEscBtnTarget === true && e.target !== this.img){\r\n        this.restoreCrops(e);\r\n        this.isEscBtnTarget = false;\r\n      }\r\n      document.removeEventListener('mouseup', this.outsideEvents, false)\r\n      document.removeEventListener('keydown', this.outsideEvents, false)\r\n      document.removeEventListener('contextmenu', this.onContextMenu, false)\r\n    }\r\n    \r\n    if (e.code === \"Escape\") {\r\n      this.isEscBtnTarget = true;\r\n    }\r\n    \r\n    if (e.button === 2 ) {\r\n      if(e.target !== this.img){\r\n        \r\n        this.restoreCrops(e);\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  handleMouseMove = (e) => {\r\n\r\n    const { props:{onDraw, onChange, coordinates, maxCrops}, pointA } = this\r\n    if ((coordinates.length <= maxCrops) && (e.button === 0 || e.type === 'touchmove' )) {\r\n      if (isValidPoint(pointA) && (e.target.offsetParent===this.img.offsetParent)) {\r\n        const pointB = this.getCursorPosition(e)\r\n        // get the drawing coordinate\r\n        const coordinate = {\r\n          x: Math.min(pointA.x, pointB.x),\r\n          y: Math.min(pointA.y, pointB.y),\r\n          width: Math.abs(pointA.x - pointB.x),\r\n          height: Math.abs(pointA.y - pointB.y),\r\n          id: this.id,\r\n        };\r\n        const nextCoordinates = clone(coordinates)\r\n        nextCoordinates[this.drawingIndex] = coordinate\r\n        if (is(Function, onDraw)) {\r\n          onDraw(coordinate, this.drawingIndex, nextCoordinates)\r\n        }\r\n        if (is(Function, onChange)) {\r\n          onChange(coordinate, this.drawingIndex, nextCoordinates)\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  restoreCrops = (e) => {\r\n    \r\n    const { onRestore } = this.props\r\n\r\n      \r\n    if (is(Function, onRestore)) {\r\n      onRestore(this.prevCoordinate, this.drawingIndex-1, this.prevCoordinates)\r\n    }\r\n\r\n    this.pointA = {};\r\n    this.isLeftBtnTarget = false;\r\n    this.isEscBtnTarget = false;\r\n  }\r\n\r\n\r\n  handleMouseUp = (e) => {\r\n\r\n    this.pointA = {};\r\n    this.isLeftBtnTarget = false;\r\n    this.mouseLeave = false;\r\n    this.isEscBtnTarget = false;\r\n    \r\n  }\r\n\r\n  handleMouseLeave = (e) => {\r\n    if (this.isDragResize === false && this.isLeftBtnTarget === true) {\r\n      document.addEventListener('contextmenu', this.onContextMenu, false)\r\n      document.addEventListener('mouseup', this.outsideEvents, false)\r\n      document.addEventListener('keydown', this.outsideEvents, false)\r\n    }\r\n    this.mouseLeave = true;\r\n  } \r\n\r\n  handleMouseEnter = (e) => {\r\n      document.removeEventListener('mouseup', this.outsideEvents, false)\r\n      document.removeEventListener('keydown', this.outsideEvents, false)\r\n      document.removeEventListener('contextmenu', this.onContextMenu, false)\r\n      this.mouseLeave = false;\r\n  } \r\n\r\n\r\n   onKeyDown = (e) => {\r\n   if (e.code === \"Escape\") {\r\n      this.isEscBtnTarget = true;\r\n    } \r\n  }\r\n\r\n  onContextMenu = (e)=>{\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    return false;\r\n  }\r\n\r\n\r\n  render() {\r\n    const {\r\n      src, onLoad,\r\n    } = this.props\r\n    return (\r\n      <div\r\n          style={{\r\n            border: \"none\",\r\n            boxSizing: \"content-box\",\r\n            position: 'relative',\r\n            msTouchAction: 'none',\r\n            touchAction: 'none',\r\n            userSelect: 'none',\r\n          }}\r\n        onTouchStart={this.handleMouseDown}\r\n        onTouchMove={this.handleMouseMove}\r\n        onTouchEnd={(e)=>{!this.isEscBtnTarget ? this.handleMouseUp(e) : this.restoreCrops(e)}}\r\n        onMouseDown={this.handleMouseDown}\r\n        onMouseMove={this.handleMouseMove}\r\n        onMouseLeave={this.handleMouseLeave}\r\n        onMouseEnter={this.handleMouseEnter}\r\n        onKeyDown={this.onKeyDown}\r\n        onMouseUp={(e)=>{!this.isEscBtnTarget ? this.handleMouseUp(e) : this.restoreCrops(e)}}\r\n        ref={container => this.container = container}\r\n        tabIndex=\"0\"\r\n      >\r\n        <img\r\n          ref={img => this.img = img}\r\n          width={\"100%\"}\r\n          src={src}\r\n          onLoad={onLoad}\r\n          alt=\"\"\r\n          draggable={false}\r\n          onDragStart={(e) => { e.preventDefault() }}\r\n        />\r\n        {this.renderCrops(this.props)}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst {\r\n  string, arrayOf, number, func, bool,\r\n} = PropTypes\r\n\r\nMultiCrops.propTypes = {\r\n  coordinates: arrayOf(coordinateType),\r\n  src: string,\r\n  cropContent: bool,\r\n  deleteIcon: bool,\r\n  numberIcon: bool,\r\n  width: number, // eslint-disable-line\r\n  height: number, // eslint-disable-line\r\n  onDraw: func, // eslint-disable-line\r\n  onChange: func, // eslint-disable-line\r\n  onComplete: func, // eslint-disable-line\r\n  onRestore: func, // eslint-disable-line\r\n  onLoad: func, // eslint-disable-line\r\n  inProportions: bool,\r\n  maxCrops: number,\r\n}\r\n\r\nMultiCrops.defaultProps = {\r\n  coordinates: [],\r\n  src: '',\r\n  cropContent: false,\r\n  deleteIcon: true,\r\n  numberIcon: true,\r\n  maxCrops: Infinity,\r\n}\r\n\r\nexport { removeid, addid } from './utils'\r\nexport default MultiCrops\r\n\r\n","import { v4 as uuidv4 } from 'uuid';\r\nimport { map, assoc, omit } from 'ramda'\r\n\r\nexport const addid = map(assoc('id', uuidv4()))\r\n\r\nexport const removeid = map(omit(['id']))\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport PropTypes from \"prop-types\";\r\n\r\nfunction generateDownload(canvas, crop) {\r\n  if (!crop || !canvas) {\r\n    return;\r\n  }\r\n\r\n  canvas.toBlob(\r\n    (blob) => {\r\n      const previewUrl = window.URL.createObjectURL(blob);\r\n\r\n      const anchor = document.createElement('a');\r\n      anchor.download = `crop_${crop.id}.png`;\r\n      anchor.href = URL.createObjectURL(blob);\r\n      anchor.click();\r\n\r\n      window.URL.revokeObjectURL(previewUrl);\r\n    },\r\n    'image/png',\r\n    1\r\n  );\r\n}\r\n\r\nconst useCanvas = (props, callback) => {\r\n    const {crop, img} = props;\r\n\r\n    const canvasRef = useRef(null);\r\n    const imgRef = useRef(null);\r\n    imgRef.current = img;\r\n\r\n    useEffect(() => {\r\n        const image = imgRef.current;\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        callback([canvas, ctx, image]);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [crop]);\r\n\r\n    return canvasRef;\r\n}\r\n\r\nconst Canvas = (props) => {\r\n    const {crop} = props;\r\n\r\n    const [isHover, setIsHover] = useState(false);\r\n\r\n    const canvasRef = useCanvas(props, ([canvas, ctx, image]) => {\r\n    const scaleX = image.naturalWidth / image.width;\r\n    const scaleY = image.naturalHeight / image.height;\r\n    const pixelRatio = window.devicePixelRatio;\r\n\r\n    canvas.width = crop.width * pixelRatio;\r\n    canvas.height = crop.height * pixelRatio;\r\n\r\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n    ctx.imageSmoothingQuality = 'high';\r\n\r\n    ctx.drawImage(\r\n      image,\r\n      crop.x * scaleX,\r\n      crop.y * scaleY,\r\n      crop.width * scaleX,\r\n      crop.height * scaleY,\r\n      0,\r\n      0,\r\n      crop.width,\r\n      crop.height\r\n    );\r\n  });\r\n\r\n  return (\r\n      <div style={{position: \"relative\"}}\r\n           onMouseEnter={()=>{setIsHover(true)}}\r\n           onMouseLeave={()=>{setIsHover(false)}}\r\n      >\r\n      <canvas\r\n        ref={canvasRef}\r\n      />{ isHover &&\r\n          <div style={{\r\n              position: \"absolute\",\r\n              top:5,\r\n              right: 5,\r\n              color: \"white\",\r\n              border: \"1px solid white\",\r\n              borderRadius: 2,\r\n              padding: \"0 4px\",\r\n              background: \"#262626\",\r\n              opacity: 0.5,\r\n              cursor: \"pointer\",\r\n          }}\r\n          onClick={() =>\r\n            generateDownload(canvasRef.current, crop)\r\n          }\r\n          >Download</div>\r\n      }</div>\r\n  );\r\n};\r\n\r\nCanvas.propTypes = {\r\n    crop: PropTypes.object,\r\n    img: PropTypes.object,\r\n};\r\n\r\nCanvas.defaultProps = {\r\n    crop: null,\r\n    img: null,\r\n}\r\n\r\nexport default Canvas;\r\n","import React, {useCallback, useEffect, useRef, useState} from 'react';\r\nimport MultiCrops from \"./MultiCrops/MultiCrops\";\r\nimport PropTypes from \"prop-types\";\r\nimport {is} from \"ramda\";\r\nimport Canvas from \"./Canvas/Canvas\";\r\nimport styles from \"./RegionSelector.module.scss\"\r\n\r\n\r\n\r\nconst RegionSelector = (props) => {\r\n\r\n  const {src, width, setCompletedCrops, completedCrops, isProportions, isShowCanvas} = props;\r\n  const imgRef = useRef(null);\r\n  const [crops, setCrops] = useState([]);\r\n  const [canvas, setCanvas] = useState([]);\r\n  const [didMount, setDidMount] = useState(false)\r\n\r\n  const completed = (crops) => {\r\n    setCanvas(crops)\r\n    if (is(Function, setCompletedCrops)) {\r\n      if (isProportions) {\r\n        setCompletedCrops(()=>crops.map((crop)=>calcProportions(crop)));\r\n      }\r\n      if (!isProportions) {\r\n        setCompletedCrops(crops);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  const calcPosition = (crop) => {\r\n    const {width, height} = imgRef.current;\r\n\r\n    const proportions = {\r\n      ...crop,\r\n      x: parseInt((width * crop.x).toFixed(0),10),\r\n      y: parseInt((height * crop.y).toFixed(0),10),\r\n      height: parseInt((height * crop.height).toFixed(0),10),\r\n      width: parseInt((width * crop.width).toFixed(0),10),\r\n    }\r\n    return proportions;\r\n  }\r\n\r\n  const calcProportions = (crop) => {\r\n    const {width, height} = imgRef.current;\r\n\r\n    const proportions = {\r\n      ...crop,\r\n      x: (crop.x / width).toFixed(2),\r\n      y: (crop.y/ height).toFixed(2),\r\n      height: (crop.height / height).toFixed(2),\r\n      width: (crop.width / width).toFixed(2),\r\n    }\r\n    return proportions;\r\n  }\r\n\r\n\r\n  useEffect(()=>{\r\n    if (didMount) {\r\n      if (isProportions) {\r\n        setCrops(()=>completedCrops.map((crop)=>calcPosition(crop)))\r\n      }\r\n      if (!isProportions) {\r\n        setCrops(completedCrops);\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [completedCrops])\r\n\r\n  const onLoad = useCallback((img) => {\r\n    imgRef.current = img.target;\r\n    setDidMount(true);\r\n    if (isProportions) {\r\n      setCrops(()=>completedCrops.map((crop)=>calcPosition(crop)));\r\n      setCanvas(()=>completedCrops.map((crop)=>calcPosition(crop)));\r\n    }\r\n    if (!isProportions) {\r\n      setCrops(completedCrops);\r\n      setCanvas(completedCrops);\r\n    }\r\n  }, [completedCrops, isProportions]);\r\n\r\n  const onChange = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n  }, []);\r\n\r\n  const onDelete = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n    completed(crops);\r\n  }, []);\r\n\r\n  const onRestore = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n    completed(crops);\r\n  }, []);\r\n\r\n  const onComplete = useCallback((crop, index, crops) => {\r\n    setCrops(crops);\r\n    completed(crops);\r\n  }, []);\r\n\r\n  return (\r\n      <div className={styles.regionSelector}>\r\n        <div\r\n          style={{ width: width}}\r\n          className={styles.multiCrops}\r\n          onTouchEnd={(e)=>{\r\n            completed(crops);\r\n          }}\r\n          onClick={(e)=>{\r\n            if (e.button === 0){\r\n              completed(crops);\r\n            }\r\n          }}\r\n        >\r\n          <MultiCrops\r\n            src={src}\r\n            styles={styles}\r\n            coordinates={crops}\r\n            onChange={onChange}\r\n            onDelete={onDelete}\r\n            onRestore={onRestore}\r\n            onComplete={onComplete}\r\n            onLoad={onLoad}\r\n            {...props}\r\n          />\r\n        </div>\r\n        {isShowCanvas &&\r\n          <div className={styles.cropsList} style={{ width: width, height: (imgRef.current?.height || 0) + 8}}>\r\n            {canvas.map( (crop, i) =>\r\n                <Canvas\r\n                    key={crop.id || i}\r\n                    crop={crop}\r\n                    img={imgRef.current}\r\n                />)}\r\n          </div>\r\n        }\r\n      </div>\r\n  );\r\n}\r\n\r\nconst { string, array, bool, func, number } = PropTypes;\r\n\r\nRegionSelector.propTypes = {\r\n  src: string,\r\n  completedCrops: array,\r\n  setCompletedCrops: func,\r\n  isProportions: bool,\r\n  isShowCanvas: bool,\r\n  cropContent: bool,\r\n  maxCrops: number,\r\n  setCanvasImg: func,\r\n  width: number,\r\n}\r\n\r\nRegionSelector.defaultProps = {\r\n  setCompletedCrops: null,\r\n  completedCrops: [],\r\n  src: '',\r\n  isProportions: false,\r\n  isShowCanvas: true,\r\n  maxCrops: Infinity,\r\n  setCanvasImg: null,\r\n  width: 600,\r\n}\r\n\r\nexport default RegionSelector;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport RegionSelector from '../../components/RegionSelector/RegionSelector';\r\n\r\nconst Home = () => {\r\n\r\n  const [upImg, setUpImg] = useState();\r\n\r\n\r\n  const onSelectFile = (e) => {\r\n  if (e.target.files && e.target.files.length > 0) {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => setUpImg(reader.result));\r\n    reader.readAsDataURL(e.target.files[0]);\r\n  }\r\n  };\r\n\r\n  return (\r\n    <div\r\n        style = {{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"space-evenly\",\r\n            alignContent: \"space-evenly\",\r\n            flexDirection: \"column\",\r\n            gap: 25,\r\n        }}\r\n    >\r\n      <div>\r\n        <input type=\"file\" accept=\"image/*\" onChange={onSelectFile} />\r\n      </div>\r\n      <RegionSelector src={upImg}  />\r\n      <div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;","import {BrowserRouter, Route, Switch} from 'react-router-dom';\r\nimport logo from './logo.svg';\r\nimport './App.css';\r\nimport Home from './pages/Home/Home';\r\n\r\nfunction App() {\r\n  return (\r\n    <BrowserRouter basename=\"/\">\r\n        <Switch>\r\n            <Route path=\"/\" component={Home}/>\r\n        </Switch>\r\n      </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// serviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rmcIconContainer\":\"Crop_rmcIconContainer__1iA1Q\",\"rmcRemove\":\"Crop_rmcRemove__24yS6\",\"numberIcon\":\"Crop_numberIcon__1C1wb\",\"cropContent\":\"Crop_cropContent__bGzXD\",\"ordN\":\"Crop_ordN__q_WFC\",\"ordNe\":\"Crop_ordNe__3AwrN\",\"ordNw\":\"Crop_ordNw__nR68i\",\"ordS\":\"Crop_ordS__1JfsH\",\"ordSe\":\"Crop_ordSe__2KCfJ\",\"ordSw\":\"Crop_ordSw__2rV8_\",\"ordE\":\"Crop_ordE__3Pshz\",\"ordW\":\"Crop_ordW__1xO6a\",\"ord-n\":\"Crop_ord-n__NhVqC\",\"ord-e\":\"Crop_ord-e__1bn-z\",\"ord-s\":\"Crop_ord-s__yEzlt\",\"ord-w\":\"Crop_ord-w__2FiP_\"};"],"sourceRoot":""}