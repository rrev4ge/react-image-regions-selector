{"version":3,"file":"index.modern.js","sources":["../src/components/MultiCrops/Crop/CropIcons.tsx","../src/components/MultiCrops/Crop/Crop.tsx","../src/CONSTANTS.ts","../src/components/MultiCrops/utils.ts","../src/components/MultiCrops/MultiCrops.tsx","../src/components/Canvas/Canvas.tsx","../src/components/Canvas/CanvasList.tsx","../src/hooks/useDidMountEffect.ts","../src/components/RegionSelector/RegionSelector.tsx"],"sourcesContent":["import React from 'react';\nimport styles from './Crop.module.scss';\n\nexport const CropDeleteIcon = (props) => (\n  <div className={styles.rmcIconContainer} {...props}>\n    <div className={styles.rmcRemove} />\n  </div>\n);\n\nexport const CropNumberIcon = ({\n  number = '',\n}: {\n  number: number | string;\n}) => <div className={styles.numberIcon}>{number}</div>;\n\nexport const CropContent = ({ content }) => (\n  <div className={styles.cropContent}>{content}</div>\n);\n","import React, {\n  Component,\n  CSSProperties,\n  memo,\n  RefObject,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { equals, is, remove, update } from 'ramda';\nimport interact from 'interactjs';\nimport { CropContent, CropDeleteIcon, CropNumberIcon } from './CropIcons';\nimport styles from './Crop.module.scss';\nimport { ICropProps, TCoordinateType } from '../../../models';\n\nexport interface ICropState {\n  prevCoordinate: TCoordinateType;\n  prevCoordinates: TCoordinateType[];\n  isLeftBtnActive: boolean;\n  isRightBtnActive: boolean;\n  crop: HTMLDivElement | null;\n}\n\nclass Crop extends Component<ICropProps, ICropState> {\n  prevCoordinate: TCoordinateType = null!;\n\n  prevCoordinates: TCoordinateType[] = [];\n\n  isLeftBtnActive = false;\n\n  isRightBtnActive = false;\n\n  crop: HTMLDivElement | null = null!;\n\n  componentDidMount() {\n    const { parentImg } = this.props;\n    interact(this.crop!)\n      .draggable({\n        modifiers: [\n          interact.modifiers.restrictRect({\n            restriction: 'parent',\n          }),\n          interact.modifiers.restrictSize({\n            min: { width: 1, height: 1 },\n            max: { width: parentImg!.width, height: parentImg!.height },\n          }),\n        ],\n        inertia: true,\n      })\n      .resizable({\n        edges: {\n          left: true,\n          right: true,\n          bottom: true,\n          top: true,\n        },\n        modifiers: [\n          interact.modifiers.restrict({\n            restriction: 'parent',\n          }),\n          interact.modifiers.restrictSize({\n            min: { width: 1, height: 1 },\n            max: { width: parentImg!.width, height: parentImg!.height },\n          }),\n        ],\n        inertia: true,\n      })\n      .on(['dragstart', 'resizestart'], this.changeStartPosition)\n      .on(['dragmove', 'dragend', 'resizemove', 'resizeend'], this.handleChange)\n      .actionChecker(this.actionTrigger);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { coordinate, index } = this.props;\n    return (\n      !equals(nextProps.coordinate, coordinate) || nextProps.index !== index\n    );\n  }\n\n  componentWillUnmount() {\n    interact(this.crop!).unset();\n  }\n\n  handleChange = (e) => {\n    const {\n      index,\n      coordinate,\n      coordinate: { x, y },\n      coordinates,\n      onResize,\n      onDrag,\n      onChange,\n      onComplete,\n      isChange,\n      parentImg,\n    } = this.props;\n\n    const { dx, dy } = e;\n\n    let nextCoordinate = {};\n\n    if (e.type === 'resizemove') {\n      const {\n        rect: { width, height },\n        deltaRect: { left, top, right, bottom },\n      } = e;\n      const resizeCoordinate = {\n        ...(((x + left >= 0 && x + left + width < parentImg!.width) ||\n          (x + left >= 0 && left < 0)) && { x: x + left }),\n        ...(((y + top >= 0 && y + top + height < parentImg!.height) ||\n          (y + top >= 0 && top < 0)) && { y: y + top }),\n        // x: ((x + left >= 0) && ((x + left + width) < parentImg.width) ) || ((x + left >= 0) && left < 0 ) ? x + left : x,\n        // y: ((y + top >= 0) && ((y + top + height) < parentImg.height) ) || ((y + top >= 0) && top < 0 ) ? y + top : x,\n      };\n      const resize = {\n        width:\n          resizeCoordinate.x + width <= parentImg!.width\n            ? x + left <= 0 && right === 0\n              ? coordinate.width\n              : width\n            : coordinate.width,\n        height:\n          resizeCoordinate.y + height <= parentImg!.height\n            ? y + top <= 0 && bottom === 0\n              ? coordinate.height\n              : height\n            : coordinate.height,\n      };\n      nextCoordinate = {\n        ...coordinate,\n        ...resizeCoordinate,\n        ...resize,\n      };\n    }\n    if (e.type === 'dragmove') {\n      nextCoordinate = { ...coordinate, x: x + dx, y: y + dy };\n    }\n    const nextCoordinates = update(index, nextCoordinate)(coordinates);\n\n    if (onResize && is(Function, onResize) && e.type === 'resizemove') {\n      onResize(nextCoordinate, index, nextCoordinates);\n    }\n    if (is(Function, onChange) && ['dragmove', 'resizemove'].includes(e.type)) {\n      onChange(nextCoordinate, index, nextCoordinates);\n    }\n    if (onDrag && is(Function, onDrag) && e.type === 'dragmove') {\n      onDrag(nextCoordinate, index, nextCoordinates);\n    }\n    if (['dragend', 'resizeend'].includes(e.type)) {\n      onComplete(coordinate, index, coordinates);\n      isChange(e);\n      document.removeEventListener('contextmenu', this.onContextMenu, false);\n    }\n  };\n\n  changeStartPosition = (e) => {\n    const { index, coordinate, coordinates, isChange } = this.props;\n\n    if (['dragstart', 'resizestart'].includes(e.type)) {\n      document.addEventListener('contextmenu', this.onContextMenu, false);\n      this.prevCoordinate = { ...coordinate };\n      this.prevCoordinates = [...coordinates];\n      this.prevCoordinates = update(index, this.prevCoordinate, coordinates);\n      isChange(e);\n    }\n  };\n\n  handleRestore = () => {\n    const { index, onRestore } = this.props;\n\n    if (is(Function, onRestore)) {\n      onRestore(this.prevCoordinate, index, this.prevCoordinates);\n    }\n  };\n\n  handleDelete = () => {\n    const { index, coordinate, onDelete, coordinates } = this.props;\n    const nextCoordinates = remove(index, 1)(coordinates);\n    if (is(Function, onDelete)) {\n      onDelete(coordinate, index, nextCoordinates);\n    }\n  };\n\n  onContextMenu = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.button === 2) {\n      if (this.isLeftBtnActive === false) {\n        this.handleDelete();\n      }\n      if (this.isLeftBtnActive === true) {\n        this.handleRestore();\n        this.isLeftBtnActive = false;\n      }\n    }\n    return false;\n  };\n\n  onMouseDown = (e) => {\n    const { outsideEvents } = this.props;\n    if (e.button === 0) {\n      document.addEventListener('mouseup', outsideEvents, false);\n      document.addEventListener('keydown', outsideEvents, false);\n      this.isLeftBtnActive = true;\n    }\n    if (e.button === 2) {\n      this.isRightBtnActive = true;\n    }\n  };\n\n  onMouseUp = (e) => {\n    const { outsideEvents } = this.props;\n    if (e.button === 0) {\n      document.removeEventListener('mouseup', outsideEvents, false);\n      document.removeEventListener('keydown', outsideEvents, false);\n      document.removeEventListener('contextmenu', this.onContextMenu, false);\n      this.isLeftBtnActive = false;\n    }\n    if (e.button === 2) {\n      this.isRightBtnActive = false;\n    }\n  };\n\n  onKeyDown = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.code === 'Escape') {\n      this.handleRestore();\n      this.isLeftBtnActive = false;\n    }\n  };\n\n  onKeyUp = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  cropStyle = (coordinate): CSSProperties => {\n    const { x, y, width, height } = coordinate;\n\n    return {\n      display: 'inline-block',\n      position: 'absolute',\n      transform: 'translate3d(0, 0, 0)',\n      boxSizing: 'border-box',\n      cursor: 'move',\n      width,\n      height,\n      top: y,\n      left: x,\n      border: '1px solid',\n      borderImageSource:\n        'url(\"data:image/gif;base64,R0lGODlhCgAKAJECAAAAAP///////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI5RDc5MTFDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI5RDc5MTBDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoAAgAsAAAAAAoACgAAAhWEERkn7W3ei7KlagMWF/dKgYeyGAUAIfkEBQoAAgAsAAAAAAoACgAAAg+UYwLJ7RnQm7QmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYgLJHdiinNSAVfOEKoUCACH5BAUKAAIALAAAAAAKAAoAAAIRVISAdusPo3RAzYtjaMIaUQAAIfkEBQoAAgAsAAAAAAoACgAAAg+MDiem7Q8bSLFaG5il6xQAIfkEBQoAAgAsAAAAAAoACgAAAg+UYRLJ7QnQm7SmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYBLJDdiinNSEVfOEKoECACH5BAUKAAIALAAAAAAKAAoAAAIRFISBdusPo3RBzYsjaMIaUQAAOw==\")',\n      borderImageSlice: '1',\n      borderImageRepeat: 'repeat',\n      msTouchAction: 'none',\n      touchAction: 'none',\n      userSelect: 'none',\n      background: '#262626',\n      opacity: 0.5,\n    };\n  };\n\n  actionTrigger = (\n    pointer,\n    event,\n    action,\n    interactable,\n    element,\n    interaction,\n  ) => {\n    if (event.type === 'pointermove') {\n      //\n    }\n\n    if (event.type === 'pointerdown') {\n      //\n    }\n\n    return action;\n  };\n\n  render() {\n    const {\n      coordinate,\n      index,\n      cropConfig: {\n        hasNumberIcon = true,\n        hasContent = false,\n        hasDeleteButton = true,\n      },\n    } = this.props;\n\n    return (\n      <div\n        onMouseDown={this.onMouseDown}\n        onMouseUp={this.onMouseUp}\n        onContextMenu={this.onContextMenu}\n        style={this.cropStyle(coordinate)}\n        ref={(crop) => {\n          this.crop = crop;\n        }}\n        onKeyDown={this.onKeyDown}\n        onKeyUp={this.onKeyUp}\n        tabIndex={0}\n      >\n        {/* <div> */}\n        {hasNumberIcon && <CropNumberIcon number={index + 1} />}\n        {hasDeleteButton && <CropDeleteIcon onClick={this.handleDelete} />}\n        {hasContent && <CropContent content={coordinate?.content} />}\n        {/* </div> */}\n        {[\n          styles.ordN,\n          styles.ordNe,\n          styles.ordNw,\n          styles.ordS,\n          styles.ordSe,\n          styles.ordSw,\n          styles.ordE,\n          styles.ordW,\n        ].map((style, id) => (\n          <div className={style} key={id} />\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default Crop;\n","// const env = process.env.APP_ENV || 'development';\n\nexport interface IConstants {\n  MAX_REGION_LIST_LENGTH: number;\n  CHESS_BACKGROUND: string;\n  NOT_FOUND_IMG: string;\n}\n\nconst CONSTANTS: IConstants = {\n  MAX_REGION_LIST_LENGTH: 1000,\n  CHESS_BACKGROUND:\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC',\n  NOT_FOUND_IMG:\n    'data:image/png;base64,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',\n};\n\nexport default CONSTANTS;\n","import { v4 as uuidv4 } from 'uuid';\nimport { assoc, map, omit } from 'ramda';\n\nexport const addId = map(assoc('id', uuidv4()));\n\nexport const removeId = map(omit(['id']));\n","import React, { useRef, useState } from 'react';\nimport { addIndex, both, clone, complement, equals, is, map } from 'ramda';\nimport { v4 as uuidv4 } from 'uuid';\nimport Crop from './Crop/Crop';\nimport styles from './MultiCrops.module.scss';\nimport { IMultiCropsProps } from '../../models';\nimport CONSTANTS from '../../CONSTANTS';\n\nconst isValidPoint = (point: { x?: number; y?: number } = {}): boolean => {\n  const strictNumber = (number) =>\n    both(is(Number), complement(equals(NaN)))(number);\n  if (point?.x && point?.y) {\n    return strictNumber(point.x) && strictNumber(point.y);\n  }\n  return false;\n};\n\nconst MultiCrops = (props: IMultiCropsProps): React.ReactElement => {\n  const {\n    coordinate,\n    coordinates = [],\n    src = '',\n    maxRegionListLength = CONSTANTS.MAX_REGION_LIST_LENGTH,\n    onDraw,\n    onChange,\n    onComplete,\n    onRestore,\n    onLoad,\n  } = props;\n\n  const imgRef = useRef<HTMLImageElement | null>(null);\n  const containerRef = useRef<HTMLDivElement | null>(null);\n\n  const [drawingIndex, setDrawingIndex] = useState(-1);\n  const [pointA, setPointA] = useState<{ x?: number; y?: number }>({});\n\n  const [id, setId] = useState(uuidv4());\n\n  const [prevCoordinate, setPrevCoordinate] = useState({});\n  const [prevCoordinates, setPrevCoordinates] = useState([]);\n\n  const [isEscBtnTarget, setIsEscBtnTarget] = useState(false);\n  const [isDragResize, setIsDragResize] = useState(false);\n  const [isLeftBtnTarget, setIsLeftBtnTarget] = useState(false);\n  const [mouseLeave, setMouseLeave] = useState(false);\n\n  const isChange = (e) => {\n    if (['dragstart', 'resizestart'].includes(e.type)) {\n      setIsDragResize(true);\n    }\n    if (['dragend', 'resizeend'].includes(e.type)) {\n      setIsDragResize(false);\n    }\n  };\n\n  const renderCrops = (props): any => {\n    const { coordinates } = props;\n    const indexedMap = addIndex(map);\n    return indexedMap((coor, index) => {\n      return (\n        <Crop\n          // improve performance when delete crop in middle array\n          key={coor.id || index}\n          index={index}\n          coordinate={coor}\n          isChange={(e) => {\n            isChange(e);\n          }}\n          parentImg={imgRef.current}\n          {...props}\n        />\n      );\n    })(coordinates);\n  };\n\n  const getCursorPosition = (e) => {\n    const { left, top } = containerRef.current!.getBoundingClientRect();\n    if (e.type === 'touchstart' || e.type === 'touchmove') {\n      return {\n        x: e.touches[0].pageX - left,\n        y: e.touches[0].pageY - top,\n      };\n    }\n    if (e.type === 'mousedown' || e.type === 'mousemove') {\n      return {\n        x: e.clientX - left,\n        y: e.clientY - top,\n      };\n    }\n    return { x: 0, y: 0 };\n  };\n\n  const handleMouseDown = (e) => {\n    document.removeEventListener('mouseup', outsideEvents, false);\n    document.removeEventListener('keydown', outsideEvents, false);\n    document.removeEventListener('contextmenu', onContextMenu, false);\n    setIsDragResize(false);\n    if (\n      coordinates.length < maxRegionListLength &&\n      (e.button === 0 || e.type === 'touchstart')\n    ) {\n      setIsLeftBtnTarget(true);\n      if (e.target === imgRef.current || e.target === containerRef.current) {\n        const { x, y } = getCursorPosition(e);\n        setDrawingIndex(coordinates.length);\n        setPointA({ x, y });\n        setId(uuidv4());\n        setIsLeftBtnTarget(true);\n        setPrevCoordinate({});\n        setPrevCoordinates(clone(coordinates));\n        setIsEscBtnTarget(false);\n      }\n    }\n  };\n\n  const handleMouseMove = (e) => {\n    if (\n      coordinates.length <= maxRegionListLength &&\n      (e.button === 0 || e.type === 'touchmove')\n    ) {\n      if (\n        isValidPoint(pointA) &&\n        e.target.offsetParent === imgRef?.current?.offsetParent\n      ) {\n        const pointB = getCursorPosition(e);\n        // get the drawing coordinate\n        if (pointA.x && pointA.y) {\n          const coordinate = {\n            x: Math.min(pointA.x, pointB.x),\n            y: Math.min(pointA.y, pointB.y),\n            width: Math.abs(pointA.x - pointB.x),\n            height: Math.abs(pointA.y - pointB.y),\n            id,\n          };\n\n          const nextCoordinates = clone(coordinates);\n          nextCoordinates[drawingIndex] = coordinate;\n          if (onDraw && is(Function, onDraw)) {\n            onDraw(coordinate, drawingIndex, nextCoordinates);\n          }\n          if (is(Function, onChange)) {\n            onChange(coordinate, drawingIndex, nextCoordinates);\n          }\n        }\n      }\n    }\n  };\n\n  const restoreCrops = () => {\n    if (is(Function, onRestore)) {\n      onRestore(prevCoordinate, drawingIndex - 1, prevCoordinates);\n    }\n\n    setPointA({ x: 0, y: 0 });\n    setIsLeftBtnTarget(false);\n    setIsEscBtnTarget(false);\n  };\n\n  const handleMouseUp = () => {\n    setPointA({ x: 0, y: 0 });\n    setIsLeftBtnTarget(false);\n    setMouseLeave(false);\n    setIsEscBtnTarget(false);\n  };\n\n  const handleMouseLeave = () => {\n    if (isDragResize === false && isLeftBtnTarget === true) {\n      document.addEventListener('contextmenu', onContextMenu, false);\n      document.addEventListener('mouseup', outsideEvents, false);\n      document.addEventListener('keydown', outsideEvents, false);\n    }\n    setMouseLeave(true);\n  };\n\n  const handleMouseEnter = () => {\n    document.removeEventListener('mouseup', outsideEvents, false);\n    document.removeEventListener('keydown', outsideEvents, false);\n    document.removeEventListener('contextmenu', onContextMenu, false);\n    setMouseLeave(false);\n  };\n\n  const outsideEvents = (e): void | boolean => {\n    if (e.button === 0) {\n      if (isEscBtnTarget === false) {\n        if (is(Function, onRestore)) {\n          onRestore(coordinate, drawingIndex, coordinates);\n        }\n        handleMouseUp();\n      }\n      if (isEscBtnTarget === true && e.target !== imgRef.current) {\n        restoreCrops();\n        setIsEscBtnTarget(false);\n      }\n      document.removeEventListener('mouseup', outsideEvents, false);\n      document.removeEventListener('keydown', outsideEvents, false);\n      document.removeEventListener('contextmenu', onContextMenu, false);\n    }\n\n    if (e.code === 'Escape') {\n      setIsEscBtnTarget(true);\n    }\n\n    if (e.button === 2) {\n      if (e.target !== imgRef.current) {\n        restoreCrops();\n      }\n    }\n    return false;\n  };\n\n  const onKeyDown = (e) => {\n    if (e.code === 'Escape') {\n      setIsEscBtnTarget(true);\n    }\n  };\n\n  const onContextMenu = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    return false;\n  };\n\n  return (\n    <div\n      className={styles.multiCrops}\n      onTouchStart={handleMouseDown}\n      onTouchMove={handleMouseMove}\n      onTouchEnd={() => {\n        if (!isEscBtnTarget) {\n          handleMouseUp();\n          return;\n        }\n        restoreCrops();\n      }}\n      onMouseDown={handleMouseDown}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n      onMouseEnter={handleMouseEnter}\n      onKeyDown={onKeyDown}\n      onMouseUp={() => {\n        if (!isEscBtnTarget) {\n          handleMouseUp();\n          return;\n        }\n        restoreCrops();\n      }}\n      ref={(container) => {\n        containerRef.current = container;\n      }}\n      tabIndex={0}\n    >\n      {src && (\n        <img\n          ref={(img) => {\n            imgRef.current = img;\n          }}\n          width=\"100%\"\n          src={src}\n          onLoad={onLoad}\n          alt=\"\"\n          draggable={false}\n          onDragStart={(e) => {\n            e.preventDefault();\n          }}\n        />\n      )}\n      {renderCrops(props)}\n    </div>\n  );\n};\n\nexport { removeId, addId } from './utils';\nexport default MultiCrops;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { TCoordinateType } from '../MultiCrops/Crop/CropFC';\nimport styles from './Canvas.module.scss';\n\nfunction generateDownload(canvas, crop) {\n  if (!crop || !canvas) {\n    return;\n  }\n\n  canvas.toBlob(\n    (blob) => {\n      const previewUrl = window.URL.createObjectURL(blob);\n\n      const anchor = document.createElement('a');\n      anchor.download = `canvas_${crop.id}.png`;\n      anchor.href = URL.createObjectURL(blob);\n      anchor.click();\n\n      window.URL.revokeObjectURL(previewUrl);\n    },\n    'image/png',\n    1,\n  );\n}\n\nconst useCanvas = (\n  props: { crop: TCoordinateType; img: HTMLImageElement },\n  callback,\n) => {\n  const { crop = null, img = null } = props;\n\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n  const imgRef = useRef<HTMLImageElement | null>(null);\n  imgRef.current = img;\n\n  useEffect(() => {\n    const image = imgRef.current;\n    const canvas = canvasRef.current;\n    const ctx = canvas?.getContext('2d');\n    callback([canvas, ctx, image]);\n  }, [crop]);\n\n  return canvasRef;\n};\n\nconst Canvas = (props) => {\n  const { crop } = props;\n\n  const [isHover, setIsHover] = useState(false);\n\n  const canvasRef = useCanvas(props, ([canvas, ctx, image]) => {\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n    const pixelRatio = window.devicePixelRatio;\n\n    canvas.width = crop.width * pixelRatio;\n    canvas.height = crop.height * pixelRatio;\n\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    ctx.imageSmoothingQuality = 'high';\n\n    ctx.drawImage(\n      image,\n      crop.x * scaleX,\n      crop.y * scaleY,\n      crop.width * scaleX,\n      crop.height * scaleY,\n      0,\n      0,\n      crop.width,\n      crop.height,\n    );\n  });\n\n  return (\n    <div\n      className={styles.canvasItem}\n      onMouseEnter={() => {\n        setIsHover(true);\n      }}\n      onMouseLeave={() => {\n        setIsHover(false);\n      }}\n    >\n      {isHover && <div className={styles.canvasContent}>{crop.content}</div>}\n      <canvas ref={canvasRef} className={styles.canvasImg} />\n      {isHover && (\n        <div\n          className={styles.canvasDownloadButton}\n          onClick={() => generateDownload(canvasRef.current, crop)}\n        >\n          Download\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Canvas;\n","import React from 'react';\nimport Canvas from './Canvas';\nimport styles from './CanvasList.module.scss';\n\nconst CanvasList = (props) => {\n  const { canvas, img, config } = props;\n  return (\n    <div\n      className={styles.canvasList}\n      style={{\n        width: img?.width || config?.width,\n        height: img?.height ? img.height + 10 : 0,\n      }}\n    >\n      {canvas.map((crop, i) => (\n        <Canvas key={crop.id || i} crop={crop} img={img} />\n      ))}\n    </div>\n  );\n};\n\nexport default CanvasList;\n","import { useEffect, useRef } from 'react';\r\n\r\nconst useDidMountEffect = (func, deps) => {\r\n  const didMount = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (didMount.current) {\r\n      func();\r\n    } else {\r\n      didMount.current = true;\r\n    }\r\n  }, deps);\r\n};\r\n\r\nexport default useDidMountEffect;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { is } from 'ramda';\nimport MultiCrops from '../MultiCrops/MultiCrops';\nimport CanvasList from '../Canvas/CanvasList';\nimport { useDidMountEffect } from '../../hooks';\nimport styles from './RegionSelector.module.scss';\nimport { IRegionSelectorProps, TCoordinateType } from '../../models';\n\nconst RegionSelector = (props: IRegionSelectorProps): React.ReactElement => {\n  const {\n    src,\n    onRegionChange = null,\n    regions,\n    inProportions = false,\n    showCanvasList = true,\n    width = 460,\n  } = props;\n\n  const imgRef = useRef<HTMLImageElement | null>(null);\n  const [crops, setCrops] = useState<TCoordinateType[]>([]);\n  const [canvas, setCanvas] = useState<TCoordinateType[]>([]);\n  const [didMount, setDidMount] = useState<boolean>(false);\n\n  const completed = (crops) => {\n    setCanvas(crops);\n    if (onRegionChange && is(Function, onRegionChange)) {\n      if (inProportions) {\n        onRegionChange &&\n          onRegionChange(crops.map((crop) => calcProportions(crop)));\n      }\n      if (!inProportions) {\n        onRegionChange && onRegionChange(crops);\n      }\n    }\n  };\n\n  const calcPosition = (crop) => {\n    const { width, height } = (typeof imgRef?.current !== 'undefined' &&\n      imgRef?.current) || { width: 0, height: 0 };\n\n    const position = {\n      ...crop,\n      x: parseInt((width * crop.x).toFixed(0), 10),\n      y: parseInt((height * crop.y).toFixed(0), 10),\n      height: parseInt((height * crop.height).toFixed(0), 10),\n      width: parseInt((width * crop.width).toFixed(0), 10),\n    };\n    // console.log({\n    //   calcPosition: { position, crop, width, height, img: imgRef?.current },\n    // });\n    return position;\n  };\n\n  const calcProportions = (crop) => {\n    const { width, height } = (typeof imgRef?.current !== 'undefined' &&\n      imgRef?.current) || { width: 0, height: 0 };\n    const proportions = {\n      ...crop,\n      x: parseFloat((crop.x / width).toFixed(3)),\n      y: parseFloat((crop.y / height).toFixed(3)),\n      height: parseFloat((crop.height / height).toFixed(3)),\n      width: parseFloat((crop.width / width).toFixed(3)),\n    };\n    // console.log({\n    //   calcProportions: {\n    //     proportions,\n    //     crop,\n    //     width,\n    //     height,\n    //     img: imgRef?.current,\n    //   },\n    // });\n    return proportions;\n  };\n\n  useDidMountEffect(() => {\n    if (didMount && regions) {\n      if (inProportions) {\n        setCrops(() => regions.map((crop) => calcPosition(crop)));\n      }\n      if (!inProportions) {\n        setCrops(regions);\n      }\n    }\n  }, [regions]);\n\n  useDidMountEffect(() => {\n    if (!src) {\n      setCrops([]);\n      setCanvas([]);\n      imgRef.current = null;\n    }\n  }, [src]);\n\n  const onLoad = useCallback(\n    (img) => {\n      imgRef.current = img.target;\n      setDidMount(true);\n      if (inProportions && regions) {\n        setCrops(() => regions.map((crop) => calcPosition(crop)));\n        setCanvas(() => regions.map((crop) => calcPosition(crop)));\n      }\n      if (!inProportions && regions) {\n        setCrops(regions);\n        setCanvas(regions);\n      }\n    },\n    [regions, inProportions],\n  );\n\n  const onChange = useCallback((crop, index, crops) => {\n    setCrops(crops);\n    // completed(crops);\n  }, []);\n\n  const onDelete = useCallback((crop, index, crops) => {\n    setCrops(crops);\n    completed(crops);\n  }, []);\n\n  const onRestore = useCallback((crop, index, crops) => {\n    setCrops(crops);\n    completed(crops);\n  }, []);\n\n  const onComplete = useCallback((crop, index, crops) => {\n    setCrops(crops);\n    completed(crops);\n  }, []);\n\n  return (\n    <div className={styles.regionSelector}>\n      <div\n        style={{ width }}\n        className={styles.multiCrops}\n        onTouchEnd={() => {\n          completed(crops);\n        }}\n        onMouseUp={(e) => {\n          if (e.button === 0) {\n            completed(crops);\n          }\n        }}\n      >\n        <MultiCrops\n          src={src}\n          coordinates={crops}\n          onChange={onChange}\n          onDelete={onDelete}\n          onRestore={onRestore}\n          onComplete={onComplete}\n          onLoad={onLoad}\n          width={imgRef.current?.width || width}\n          {...props}\n        />\n      </div>\n      {showCanvasList && (\n        <CanvasList canvas={canvas} img={imgRef.current} config={{ width }} />\n      )}\n    </div>\n  );\n};\n\nexport default RegionSelector;\n"],"names":["CropDeleteIcon","props","styles","rmcIconContainer","rmcRemove","CropNumberIcon","number","numberIcon","CropContent","content","cropContent","Crop","e","index","coordinate","x","y","coordinates","onResize","onDrag","onChange","onComplete","isChange","parentImg","dx","dy","nextCoordinate","type","rect","width","height","deltaRect","left","top","right","bottom","resizeCoordinate","resize","nextCoordinates","update","is","Function","includes","document","removeEventListener","onContextMenu","addEventListener","prevCoordinate","prevCoordinates","onRestore","onDelete","remove","preventDefault","stopPropagation","button","isLeftBtnActive","handleDelete","handleRestore","outsideEvents","isRightBtnActive","code","display","position","transform","boxSizing","cursor","border","borderImageSource","borderImageSlice","borderImageRepeat","msTouchAction","touchAction","userSelect","background","opacity","pointer","event","action","interactable","element","interaction","componentDidMount","interact","crop","draggable","modifiers","restrictRect","restriction","restrictSize","min","max","inertia","resizable","edges","restrict","on","changeStartPosition","handleChange","actionChecker","actionTrigger","shouldComponentUpdate","nextProps","equals","componentWillUnmount","unset","render","cropConfig","hasNumberIcon","hasContent","hasDeleteButton","onMouseDown","onMouseUp","cropStyle","onKeyDown","onKeyUp","ordN","ordNe","ordNw","ordS","ordSe","ordSw","ordE","ordW","map","style","id","Component","CONSTANTS","MAX_REGION_LIST_LENGTH","CHESS_BACKGROUND","NOT_FOUND_IMG","addId","assoc","uuidv4","removeId","omit","isValidPoint","point","strictNumber","both","Number","complement","NaN","MultiCrops","src","maxRegionListLength","onDraw","onLoad","imgRef","useRef","containerRef","useState","drawingIndex","setDrawingIndex","pointA","setPointA","setId","setPrevCoordinate","setPrevCoordinates","isEscBtnTarget","setIsEscBtnTarget","isDragResize","setIsDragResize","isLeftBtnTarget","setIsLeftBtnTarget","mouseLeave","setMouseLeave","renderCrops","indexedMap","addIndex","coor","current","getCursorPosition","getBoundingClientRect","touches","pageX","pageY","clientX","clientY","handleMouseDown","length","target","clone","handleMouseMove","offsetParent","pointB","Math","abs","restoreCrops","handleMouseUp","handleMouseLeave","handleMouseEnter","multiCrops","container","img","generateDownload","canvas","toBlob","blob","previewUrl","window","URL","createObjectURL","anchor","createElement","download","href","click","revokeObjectURL","useCanvas","callback","canvasRef","useEffect","image","ctx","getContext","Canvas","isHover","setIsHover","scaleX","naturalWidth","scaleY","naturalHeight","pixelRatio","devicePixelRatio","setTransform","imageSmoothingQuality","drawImage","canvasItem","canvasContent","canvasImg","canvasDownloadButton","CanvasList","config","canvasList","i","useDidMountEffect","func","deps","didMount","RegionSelector","onRegionChange","regions","inProportions","showCanvasList","crops","setCrops","setCanvas","setDidMount","completed","calcProportions","calcPosition","parseInt","toFixed","proportions","parseFloat","useCallback","regionSelector"],"mappings":"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"}